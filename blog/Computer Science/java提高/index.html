
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="记录、分享">
      
      
        <meta name="author" content="gzh">
      
      
        <link rel="canonical" href="https://gongzihang6.github.io/blog/Computer%20Science/java%E6%8F%90%E9%AB%98/">
      
      
        <link rel="prev" href="../%E5%B8%B8%E7%94%A8API/">
      
      
        <link rel="next" href="../LeetCode/%E4%BA%A4%E6%98%93%E9%80%86%E5%BA%8F%E5%AF%B9%E7%9A%84%E6%80%BB%E6%95%B0/">
      
      
      <link rel="icon" href="https://s2.loli.net/2025/02/12/aE5ovtzAlNTd9Uh.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Java高级技术 - Blog of GZH</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../../stylesheets/extra2.css">
    
      <link rel="stylesheet" href="../../../stylesheets/简历.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Wcowin/Wcowin.github.io@main/docs/stylesheets/link.css">
    
      <link rel="stylesheet" href="../../../stylesheets/customize.css">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600&display=swap">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Wcowin/Wcowin.github.io@main/docs/stylesheets/ziti.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-40HC6RYSR1"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-40HC6RYSR1",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-40HC6RYSR1",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#java" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="Blog of GZH" class="md-header__button md-logo" aria-label="Blog of GZH" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 89 89">
  <path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z" />
  <path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5" />
  <path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z" />
  <path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25" />
</svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Blog of GZH
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Java高级技术
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="关闭自动模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="关闭自动模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="切换至夜间模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换至夜间模式" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="切换至日间模式"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="切换至日间模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="选择当前语言">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M0 128c0-35.3 28.7-64 64-64h512c35.3 0 64 28.7 64 64v256c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64zm320 0v256h256V128zm-141.7 47.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1.1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4zM160 233.2l19 42.8h-38zM448 164c11 0 20 9 20 20v4h60c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4.9.6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9L467 333.8c-4.5-2.7-8.8-5.5-13.1-8.5-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8L410 286.1c-7.8-7.8-7.8-20.5 0-28.3s20.5-7.8 28.3 0l14.6 14.6.5.5c12.4-13.1 22.5-28.3 29.8-45l-35.2.1h-72c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="/" hreflang="zh" class="md-select__link">
              简体中文
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/Mkdocs-Wcowin/en/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/Mkdocs-Wcowin/ZH-TW/" hreflang="zh-TW" class="md-select__link">
              China(TW)
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Gongzihang6" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Gongzihang6
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  主页

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../java%E5%9F%BA%E7%A1%80/" class="md-tabs__link">
          
  
  
    
  
  Computer Science

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../MachineLearning/K%E8%BF%91%E9%82%BB%E5%AD%A6%E4%B9%A0%E4%B8%8E%E9%99%8D%E7%BB%B4/" class="md-tabs__link">
          
  
  
    
  
  MachineLearning

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E6%AF%8F%E6%97%A5%E8%AF%97%E8%AF%8D/%E8%99%9E%E7%BE%8E%E4%BA%BA%C2%B7%E7%8E%89%E9%98%91%E5%B9%B2%E5%A4%96%E6%B8%85%E6%B1%9F%E6%B5%A6/" class="md-tabs__link">
          
  
  
    
  
  每日诗词

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../%E9%95%BF%E6%9C%9F%E4%B8%BB%E4%B9%89/fitness/" class="md-tabs__link">
          
  
  
    
  
  长期主义

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../about/geren/" class="md-tabs__link">
          
  
  
    
  
  关于

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Blog of GZH" class="md-nav__button md-logo" aria-label="Blog of GZH" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 89 89">
  <path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z" />
  <path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5" />
  <path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z" />
  <path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25" />
</svg>

    </a>
    Blog of GZH
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Gongzihang6" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Gongzihang6
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    主页
    
  </span>
  
    
  
  
    <span class="md-status md-status--new"></span>
  

  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Computer Science
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Computer Science
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Java
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Java
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../java%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Java面向对象基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%B8%B8%E7%94%A8API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Java集合框架与常用API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Java高级技术
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Java高级技术
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#java_1" class="md-nav__link">
    <span class="md-ellipsis">
      java 中的异常
    </span>
  </a>
  
    <nav class="md-nav" aria-label="java 中的异常">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      异常的基本处理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      异常的作用：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      自定义异常：
    </span>
  </a>
  
    <nav class="md-nav" aria-label="自定义异常：">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      自定义运行时异常：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      自定义编译时异常：
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      异常的处理方案：
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      泛型
    </span>
  </a>
  
    <nav class="md-nav" aria-label="泛型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      自定义泛型类
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      自定义泛型接口
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      自定义泛型方法，能够接收任何类型参数，实现通用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      并行流
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      其他实用技巧
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      注意事项
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file" class="md-nav__link">
    <span class="md-ellipsis">
      File 读写
    </span>
  </a>
  
    <nav class="md-nav" aria-label="File 读写">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file_1" class="md-nav__link">
    <span class="md-ellipsis">
      创建 FIle 类的对象
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      常见字符集
    </span>
  </a>
  
    <nav class="md-nav" aria-label="常见字符集">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ascii" class="md-nav__link">
    <span class="md-ellipsis">
      标准 ASCII 字符集
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gbk" class="md-nav__link">
    <span class="md-ellipsis">
      GBK（汉字内码扩展规范，国标）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unicode" class="md-nav__link">
    <span class="md-ellipsis">
      Unicode 字符集（统一码，也叫万国码）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      使用程序对字符进行编码和解码操作
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#io" class="md-nav__link">
    <span class="md-ellipsis">
      IO 流
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IO 流">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#io_1" class="md-nav__link">
    <span class="md-ellipsis">
      IO 流的体系
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IO 流的体系">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fileinputstream" class="md-nav__link">
    <span class="md-ellipsis">
      FileInputStream（文件字节输入流）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fileoutputstream" class="md-nav__link">
    <span class="md-ellipsis">
      FileOutputStream（文件字节输出流）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filereader" class="md-nav__link">
    <span class="md-ellipsis">
      FIleReader（文件字符输入流）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filewriter" class="md-nav__link">
    <span class="md-ellipsis">
      FileWriter（文件字符输出流）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      缓冲流
    </span>
  </a>
  
    <nav class="md-nav" aria-label="缓冲流">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bufferedreader" class="md-nav__link">
    <span class="md-ellipsis">
      BufferedReader（缓冲字符输入流）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bufferedwriter" class="md-nav__link">
    <span class="md-ellipsis">
      BufferedWriter（缓冲字符输出流）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      其他流
    </span>
  </a>
  
    <nav class="md-nav" aria-label="其他流">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inputstreamreader" class="md-nav__link">
    <span class="md-ellipsis">
      InputStreamReader（字符输入转换流）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#printstreamprintwriter" class="md-nav__link">
    <span class="md-ellipsis">
      PrintStream/PrintWriter（打印流）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      特殊数据流
    </span>
  </a>
  
    <nav class="md-nav" aria-label="特殊数据流">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dataoutputstream" class="md-nav__link">
    <span class="md-ellipsis">
      DataOutputStream（数据输出流）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datainputstream" class="md-nav__link">
    <span class="md-ellipsis">
      DataInputStream（数据输入流）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#io_2" class="md-nav__link">
    <span class="md-ellipsis">
      IO 框架
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IO 框架">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commons-io" class="md-nav__link">
    <span class="md-ellipsis">
      Commons-io 框架
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      多线程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="多线程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      创建线程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="创建线程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#thread" class="md-nav__link">
    <span class="md-ellipsis">
      多线程的创建方式一：继承 Thread 类
    </span>
  </a>
  
    <nav class="md-nav" aria-label="多线程的创建方式一：继承 Thread 类">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      方式一优缺点：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      创建线程的注意事项
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runnable" class="md-nav__link">
    <span class="md-ellipsis">
      多线程的创建方式二：实现 Runnable 接口
    </span>
  </a>
  
    <nav class="md-nav" aria-label="多线程的创建方式二：实现 Runnable 接口">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      方式二的优缺点：
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#callable" class="md-nav__link">
    <span class="md-ellipsis">
      线程的创建方式三：实现 Callable 接口
    </span>
  </a>
  
    <nav class="md-nav" aria-label="线程的创建方式三：实现 Callable 接口">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      线程创建方式三的优缺点：
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      总结三种线程创建方式的优缺点对比：
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      什么是线程安全问题？
    </span>
  </a>
  
    <nav class="md-nav" aria-label="什么是线程安全问题？">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      线程同步
    </span>
  </a>
  
    <nav class="md-nav" aria-label="线程同步">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      方式一：同步代码块；
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      方式二：同步方法；
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lock" class="md-nav__link">
    <span class="md-ellipsis">
      方式三：lock 锁；
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      线程池
    </span>
  </a>
  
    <nav class="md-nav" aria-label="线程池">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      线程池的工作原理：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      创建线程池
    </span>
  </a>
  
    <nav class="md-nav" aria-label="创建线程池">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#executorservice-threadpoolexecutor" class="md-nav__link">
    <span class="md-ellipsis">
      方式一：使用 ExecutorService 的实现类 ThreadPoolExecutor 来创建一个线程池对象；
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executors" class="md-nav__link">
    <span class="md-ellipsis">
      方式二：使用 Executors（线程池的工具类）调用方法来返回不同特点的线程池对象；
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      网络编程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="网络编程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      网络编程三要素
    </span>
  </a>
  
    <nav class="md-nav" aria-label="网络编程三要素">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ip" class="md-nav__link">
    <span class="md-ellipsis">
      IP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      端口
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      协议
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#udp" class="md-nav__link">
    <span class="md-ellipsis">
      UDP通信
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcp" class="md-nav__link">
    <span class="md-ellipsis">
      TCP通信
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      综合案例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#java_2" class="md-nav__link">
    <span class="md-ellipsis">
      Java 高级技术
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Java 高级技术">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      单元测试
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      反射
    </span>
  </a>
  
    <nav class="md-nav" aria-label="反射">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    <span class="md-ellipsis">
      认识反射、获取类
    </span>
  </a>
  
    <nav class="md-nav" aria-label="认识反射、获取类">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#class" class="md-nav__link">
    <span class="md-ellipsis">
      反射第一步，获取类的 class 对象（类本身）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    <span class="md-ellipsis">
      反射获取类中的成分并操作
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    <span class="md-ellipsis">
      反射的作用、应用场景
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    <span class="md-ellipsis">
      注解
    </span>
  </a>
  
    <nav class="md-nav" aria-label="注解">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    <span class="md-ellipsis">
      概述、自定义注解
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    <span class="md-ellipsis">
      元注解
    </span>
  </a>
  
    <nav class="md-nav" aria-label="元注解">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#target" class="md-nav__link">
    <span class="md-ellipsis">
      @Target
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retention" class="md-nav__link">
    <span class="md-ellipsis">
      @Retention
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    <span class="md-ellipsis">
      注解的解析
    </span>
  </a>
  
    <nav class="md-nav" aria-label="注解的解析">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    <span class="md-ellipsis">
      如何解析注解？
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    <span class="md-ellipsis">
      解析注解的案例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    <span class="md-ellipsis">
      作用、应用场景
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    <span class="md-ellipsis">
      动态代理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="动态代理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_51" class="md-nav__link">
    <span class="md-ellipsis">
      为什么需要代理？
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_52" class="md-nav__link">
    <span class="md-ellipsis">
      解决实际问题、掌握使用代理的好处
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_53" class="md-nav__link">
    <span class="md-ellipsis">
      动态代理的工作流程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_54" class="md-nav__link">
    <span class="md-ellipsis">
      代码实例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    LeetCode
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            LeetCode
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/%E4%BA%A4%E6%98%93%E9%80%86%E5%BA%8F%E5%AF%B9%E7%9A%84%E6%80%BB%E6%95%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    交易逆序对的总数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/%E5%8D%95%E8%AF%8D%E6%8E%A5%E9%BE%99/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    单词接龙
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/%E5%B2%9B%E5%B1%BF%E6%95%B0%E9%87%8F/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    岛屿数量
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/%E5%88%86%E8%80%83%E5%9C%BA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    分考场
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/%E6%8B%89%E9%A9%AC%E8%BD%A6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    拉马车
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/%E5%88%86%E5%B7%A7%E5%85%8B%E5%8A%9B/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    分巧克力
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/k%E5%80%8D%E5%8C%BA%E9%97%B4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    K倍区间
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    编辑距离
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/%E6%8E%A5%E9%9B%A8%E6%B0%B4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    接雨水
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/%E7%BB%84%E5%90%88%E6%80%BB%E5%92%8C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    组合总和
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/%E5%85%A8%E6%8E%92%E5%88%97/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    全排列
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/%E4%B9%98%E7%A7%AF%E6%9C%80%E5%A4%A7%E5%AD%90%E6%95%B0%E7%BB%84/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    乘积最大子数组
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5. 最长回文子串
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/%E5%89%8DK%E4%B8%AA%E9%AB%98%E9%A2%91%E5%85%83%E7%B4%A0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    前K个高频元素
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/%E6%9C%80%E5%B0%8F%E6%A0%88/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    最小栈
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/Pow%28x%2Cn%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pow(x,n)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/%E7%BD%91%E7%BB%9C%E5%BB%B6%E8%BF%9F%E6%97%B6%E9%97%B4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    网络延迟时间
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/%E8%AE%A1%E7%AE%97%E8%B4%A8%E6%95%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    计算质数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/%E5%AF%B9%E8%A7%92%E7%BA%BF%E4%B8%8A%E7%9A%84%E8%B4%A8%E6%95%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    对角线上的质数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/%E9%9B%B6%E9%92%B1%E5%85%91%E6%8D%A2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    零钱兑换
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/01%E7%9F%A9%E9%98%B5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    01矩阵
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    二分查找
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/%E6%8B%AC%E5%8F%B7%E5%8C%B9%E9%85%8D/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    括号匹配
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/300%E6%9C%80%E9%95%BF%E9%80%92%E5%A2%9E%E5%AD%90%E5%BA%8F%E5%88%97/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    300最长递增子序列
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/115%E4%B8%8D%E5%90%8C%E7%9A%84%E5%AD%90%E5%BA%8F%E5%88%97/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    115不同的子序列
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/712%E4%B8%A4%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%9C%80%E5%B0%8FASCII%E5%88%A0%E9%99%A4%E5%92%8C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    712两个字符串的最小ASCII删除和
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/516%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E5%BA%8F%E5%88%97/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    516最长回文子序列
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/139%E5%8D%95%E8%AF%8D%E6%8B%86%E5%88%86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    139单词拆分
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/221%E6%9C%80%E5%A4%A7%E6%AD%A3%E6%96%B9%E5%BD%A2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    221最大正方形
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/2845%E7%BB%9F%E8%AE%A1%E8%B6%A3%E5%91%B3%E5%AD%90%E6%95%B0%E7%BB%84%E7%9A%84%E6%95%B0%E7%9B%AE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2845统计趣味子数组的数目
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/2799%E7%BB%9F%E8%AE%A1%E5%AE%8C%E5%85%A8%E5%AD%90%E6%95%B0%E7%BB%84%E7%9A%84%E6%95%B0%E7%9B%AE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2799统计完全子数组的数目
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/1399%E7%BB%9F%E8%AE%A1%E6%9C%80%E5%A4%A7%E7%BB%84%E7%9A%84%E6%95%B0%E7%9B%AE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1399统计最大组的数目
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/2338%E7%BB%9F%E8%AE%A1%E7%90%86%E6%83%B3%E6%95%B0%E7%BB%84%E7%9A%84%E6%95%B0%E7%9B%AE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2338统计理想数组的数目
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/2179%E7%BB%9F%E8%AE%A1%E6%95%B0%E7%BB%84%E4%B8%AD%E5%A5%BD%E4%B8%89%E5%85%83%E7%BB%84%E6%95%B0%E7%9B%AE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2179统计数组中好三元组数目
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/2537%E7%BB%9F%E8%AE%A1%E5%A5%BD%E5%AD%90%E6%95%B0%E7%BB%84%E7%9A%84%E6%95%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2537统计好子数组的数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/2140%E8%A7%A3%E5%86%B3%E6%99%BA%E5%8A%9B%E9%97%AE%E9%A2%98/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2140解决智力问题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LeetCode/2278%E5%AD%97%E6%AF%8D%E5%9C%A8%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E7%9A%84%E7%99%BE%E5%88%86%E6%AF%94/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2278字母在字符串中的百分比
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    MachineLearning
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            MachineLearning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MachineLearning/K%E8%BF%91%E9%82%BB%E5%AD%A6%E4%B9%A0%E4%B8%8E%E9%99%8D%E7%BB%B4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    K近邻学习与降维
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MachineLearning/%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E5%A4%9A%E5%88%86%E7%B1%BB/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    模型评估与多分类
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MachineLearning/%E5%85%AC%E5%BC%8F%E6%B5%8B%E8%AF%95/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    公式测试
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MachineLearning/%E7%BB%8F%E5%85%B8%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    经典卷积神经网络
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MachineLearning/%E7%90%86%E8%A7%A3YOLO%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    理解YOLO网络结构
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    每日诗词
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            每日诗词
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%AF%8F%E6%97%A5%E8%AF%97%E8%AF%8D/%E8%99%9E%E7%BE%8E%E4%BA%BA%C2%B7%E7%8E%89%E9%98%91%E5%B9%B2%E5%A4%96%E6%B8%85%E6%B1%9F%E6%B5%A6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    虞美人·玉阑干外清江浦
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%AF%8F%E6%97%A5%E8%AF%97%E8%AF%8D/%E8%8F%A9%E8%90%A8%E8%9B%AE%C2%B7%E5%9B%9E%E6%96%87%E5%A4%8F%E9%97%BA%E6%80%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    菩萨蛮·回文夏闺怨
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%AF%8F%E6%97%A5%E8%AF%97%E8%AF%8D/%E6%B8%85%E5%B9%B3%E4%B9%90%C2%B7%E5%85%AD%E7%9B%98%E5%B1%B1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    清平乐·六盘山
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%AF%8F%E6%97%A5%E8%AF%97%E8%AF%8D/%E6%B4%9E%E4%BB%99%E6%AD%8C%C2%B7%E5%92%8F%E6%9F%B3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    洞仙歌·咏柳
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%AF%8F%E6%97%A5%E8%AF%97%E8%AF%8D/%E7%A7%8B%E5%85%B4%E5%85%AB%E9%A6%96%C2%B7%E5%85%B6%E4%B8%80/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    秋兴八首·其一
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%AF%8F%E6%97%A5%E8%AF%97%E8%AF%8D/%E4%B8%8E%E5%8F%B2%E9%83%8E%E4%B8%AD%E9%92%A6%E5%90%AC%E9%BB%84%E9%B9%A4%E6%A5%BC%E4%B8%8A%E5%90%B9%E7%AC%9B/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    与史郎中钦听黄鹤楼上吹笛
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    长期主义
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            长期主义
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E9%95%BF%E6%9C%9F%E4%B8%BB%E4%B9%89/fitness/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fitness
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    关于
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            关于
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/geren/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    作者个人简介
    
  </span>
  
    
  
  
    <span class="md-status md-status--new"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/%E7%AE%80%E5%8E%86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    个人简历
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/zcw/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    支持作者
    
  </span>
  
    
  
  
    <span class="md-status md-status--new"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/test/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    功能测试
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#java_1" class="md-nav__link">
    <span class="md-ellipsis">
      java 中的异常
    </span>
  </a>
  
    <nav class="md-nav" aria-label="java 中的异常">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      异常的基本处理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      异常的作用：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      自定义异常：
    </span>
  </a>
  
    <nav class="md-nav" aria-label="自定义异常：">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      自定义运行时异常：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      自定义编译时异常：
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      异常的处理方案：
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      泛型
    </span>
  </a>
  
    <nav class="md-nav" aria-label="泛型">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      自定义泛型类
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      自定义泛型接口
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      自定义泛型方法，能够接收任何类型参数，实现通用
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      并行流
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      其他实用技巧
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      注意事项
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file" class="md-nav__link">
    <span class="md-ellipsis">
      File 读写
    </span>
  </a>
  
    <nav class="md-nav" aria-label="File 读写">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#file_1" class="md-nav__link">
    <span class="md-ellipsis">
      创建 FIle 类的对象
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      常见字符集
    </span>
  </a>
  
    <nav class="md-nav" aria-label="常见字符集">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ascii" class="md-nav__link">
    <span class="md-ellipsis">
      标准 ASCII 字符集
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gbk" class="md-nav__link">
    <span class="md-ellipsis">
      GBK（汉字内码扩展规范，国标）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unicode" class="md-nav__link">
    <span class="md-ellipsis">
      Unicode 字符集（统一码，也叫万国码）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      使用程序对字符进行编码和解码操作
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#io" class="md-nav__link">
    <span class="md-ellipsis">
      IO 流
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IO 流">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#io_1" class="md-nav__link">
    <span class="md-ellipsis">
      IO 流的体系
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IO 流的体系">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fileinputstream" class="md-nav__link">
    <span class="md-ellipsis">
      FileInputStream（文件字节输入流）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fileoutputstream" class="md-nav__link">
    <span class="md-ellipsis">
      FileOutputStream（文件字节输出流）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filereader" class="md-nav__link">
    <span class="md-ellipsis">
      FIleReader（文件字符输入流）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filewriter" class="md-nav__link">
    <span class="md-ellipsis">
      FileWriter（文件字符输出流）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      缓冲流
    </span>
  </a>
  
    <nav class="md-nav" aria-label="缓冲流">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bufferedreader" class="md-nav__link">
    <span class="md-ellipsis">
      BufferedReader（缓冲字符输入流）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bufferedwriter" class="md-nav__link">
    <span class="md-ellipsis">
      BufferedWriter（缓冲字符输出流）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      其他流
    </span>
  </a>
  
    <nav class="md-nav" aria-label="其他流">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inputstreamreader" class="md-nav__link">
    <span class="md-ellipsis">
      InputStreamReader（字符输入转换流）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#printstreamprintwriter" class="md-nav__link">
    <span class="md-ellipsis">
      PrintStream/PrintWriter（打印流）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_18" class="md-nav__link">
    <span class="md-ellipsis">
      特殊数据流
    </span>
  </a>
  
    <nav class="md-nav" aria-label="特殊数据流">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dataoutputstream" class="md-nav__link">
    <span class="md-ellipsis">
      DataOutputStream（数据输出流）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#datainputstream" class="md-nav__link">
    <span class="md-ellipsis">
      DataInputStream（数据输入流）
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#io_2" class="md-nav__link">
    <span class="md-ellipsis">
      IO 框架
    </span>
  </a>
  
    <nav class="md-nav" aria-label="IO 框架">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#commons-io" class="md-nav__link">
    <span class="md-ellipsis">
      Commons-io 框架
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_19" class="md-nav__link">
    <span class="md-ellipsis">
      多线程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="多线程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_20" class="md-nav__link">
    <span class="md-ellipsis">
      创建线程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="创建线程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#thread" class="md-nav__link">
    <span class="md-ellipsis">
      多线程的创建方式一：继承 Thread 类
    </span>
  </a>
  
    <nav class="md-nav" aria-label="多线程的创建方式一：继承 Thread 类">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_21" class="md-nav__link">
    <span class="md-ellipsis">
      方式一优缺点：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_22" class="md-nav__link">
    <span class="md-ellipsis">
      创建线程的注意事项
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runnable" class="md-nav__link">
    <span class="md-ellipsis">
      多线程的创建方式二：实现 Runnable 接口
    </span>
  </a>
  
    <nav class="md-nav" aria-label="多线程的创建方式二：实现 Runnable 接口">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_23" class="md-nav__link">
    <span class="md-ellipsis">
      方式二的优缺点：
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#callable" class="md-nav__link">
    <span class="md-ellipsis">
      线程的创建方式三：实现 Callable 接口
    </span>
  </a>
  
    <nav class="md-nav" aria-label="线程的创建方式三：实现 Callable 接口">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_24" class="md-nav__link">
    <span class="md-ellipsis">
      线程创建方式三的优缺点：
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_25" class="md-nav__link">
    <span class="md-ellipsis">
      总结三种线程创建方式的优缺点对比：
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_26" class="md-nav__link">
    <span class="md-ellipsis">
      什么是线程安全问题？
    </span>
  </a>
  
    <nav class="md-nav" aria-label="什么是线程安全问题？">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_27" class="md-nav__link">
    <span class="md-ellipsis">
      线程同步
    </span>
  </a>
  
    <nav class="md-nav" aria-label="线程同步">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_28" class="md-nav__link">
    <span class="md-ellipsis">
      方式一：同步代码块；
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_29" class="md-nav__link">
    <span class="md-ellipsis">
      方式二：同步方法；
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lock" class="md-nav__link">
    <span class="md-ellipsis">
      方式三：lock 锁；
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_30" class="md-nav__link">
    <span class="md-ellipsis">
      线程池
    </span>
  </a>
  
    <nav class="md-nav" aria-label="线程池">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_31" class="md-nav__link">
    <span class="md-ellipsis">
      线程池的工作原理：
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_32" class="md-nav__link">
    <span class="md-ellipsis">
      创建线程池
    </span>
  </a>
  
    <nav class="md-nav" aria-label="创建线程池">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#executorservice-threadpoolexecutor" class="md-nav__link">
    <span class="md-ellipsis">
      方式一：使用 ExecutorService 的实现类 ThreadPoolExecutor 来创建一个线程池对象；
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#executors" class="md-nav__link">
    <span class="md-ellipsis">
      方式二：使用 Executors（线程池的工具类）调用方法来返回不同特点的线程池对象；
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_33" class="md-nav__link">
    <span class="md-ellipsis">
      网络编程
    </span>
  </a>
  
    <nav class="md-nav" aria-label="网络编程">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_34" class="md-nav__link">
    <span class="md-ellipsis">
      网络编程三要素
    </span>
  </a>
  
    <nav class="md-nav" aria-label="网络编程三要素">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ip" class="md-nav__link">
    <span class="md-ellipsis">
      IP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_35" class="md-nav__link">
    <span class="md-ellipsis">
      端口
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_36" class="md-nav__link">
    <span class="md-ellipsis">
      协议
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#udp" class="md-nav__link">
    <span class="md-ellipsis">
      UDP通信
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcp" class="md-nav__link">
    <span class="md-ellipsis">
      TCP通信
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_37" class="md-nav__link">
    <span class="md-ellipsis">
      综合案例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#java_2" class="md-nav__link">
    <span class="md-ellipsis">
      Java 高级技术
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Java 高级技术">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_38" class="md-nav__link">
    <span class="md-ellipsis">
      单元测试
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_39" class="md-nav__link">
    <span class="md-ellipsis">
      反射
    </span>
  </a>
  
    <nav class="md-nav" aria-label="反射">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_40" class="md-nav__link">
    <span class="md-ellipsis">
      认识反射、获取类
    </span>
  </a>
  
    <nav class="md-nav" aria-label="认识反射、获取类">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#class" class="md-nav__link">
    <span class="md-ellipsis">
      反射第一步，获取类的 class 对象（类本身）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_41" class="md-nav__link">
    <span class="md-ellipsis">
      反射获取类中的成分并操作
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_42" class="md-nav__link">
    <span class="md-ellipsis">
      反射的作用、应用场景
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_43" class="md-nav__link">
    <span class="md-ellipsis">
      注解
    </span>
  </a>
  
    <nav class="md-nav" aria-label="注解">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_44" class="md-nav__link">
    <span class="md-ellipsis">
      概述、自定义注解
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_45" class="md-nav__link">
    <span class="md-ellipsis">
      元注解
    </span>
  </a>
  
    <nav class="md-nav" aria-label="元注解">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#target" class="md-nav__link">
    <span class="md-ellipsis">
      @Target
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retention" class="md-nav__link">
    <span class="md-ellipsis">
      @Retention
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_46" class="md-nav__link">
    <span class="md-ellipsis">
      注解的解析
    </span>
  </a>
  
    <nav class="md-nav" aria-label="注解的解析">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_47" class="md-nav__link">
    <span class="md-ellipsis">
      如何解析注解？
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_48" class="md-nav__link">
    <span class="md-ellipsis">
      解析注解的案例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_49" class="md-nav__link">
    <span class="md-ellipsis">
      作用、应用场景
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_50" class="md-nav__link">
    <span class="md-ellipsis">
      动态代理
    </span>
  </a>
  
    <nav class="md-nav" aria-label="动态代理">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_51" class="md-nav__link">
    <span class="md-ellipsis">
      为什么需要代理？
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_52" class="md-nav__link">
    <span class="md-ellipsis">
      解决实际问题、掌握使用代理的好处
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_53" class="md-nav__link">
    <span class="md-ellipsis">
      动态代理的工作流程
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_54" class="md-nav__link">
    <span class="md-ellipsis">
      代码实例
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<div class="admonition info">
<p class="admonition-title">💾 AI智能摘要 (DeepSeek)</p>
<p>本文深入探讨Java高级技术中的异常处理与泛型机制。异常部分解析了运行时异常与编译时异常的区别，介绍了throws和try-catch处理方式，并详细说明自定义异常的实现方法。泛型章节阐述了其在类、接口和方法中的应用，包括类型约束、通配符使用及上下限设定，同时指出泛型不支持基本数据类型的特性。通过代码示例展示了自动装箱拆箱机制及包装类的字符串转换功能。</p>
</div>
<div class="admonition info">
<p class="admonition-title">📖 阅读信息</p>
<p>阅读时间：<strong>19</strong> 分钟 | 中文字符：<strong>7485</strong> | 有效代码行数：<strong>1962</strong></p>
</div>
<p><img alt="java提高_1751343229650" src="https://cdn.jsdelivr.net/gh/Gongzihang6/Pictures@main/Medias/medias%2F2025%2F07%2Fjava%E6%8F%90%E9%AB%98_1751343229650.svg" /></p>
<div class="toc">
<ul>
<li><a href="#java">java 提高</a><ul>
<li><a href="#java_1">java 中的异常</a><ul>
<li><a href="#_1">异常的基本处理</a></li>
<li><a href="#_2">异常的作用：</a></li>
<li><a href="#_3">自定义异常：</a><ul>
<li><a href="#_4">自定义运行时异常：</a></li>
<li><a href="#_5">自定义编译时异常：</a></li>
</ul>
</li>
<li><a href="#_6">异常的处理方案：</a></li>
</ul>
</li>
<li><a href="#_7">泛型</a><ul>
<li><a href="#_8">自定义泛型类</a></li>
<li><a href="#_9">自定义泛型接口</a></li>
<li><a href="#_10">自定义泛型方法，能够接收任何类型参数，实现通用</a></li>
<li><a href="#_11">并行流</a></li>
<li><a href="#_12">其他实用技巧</a></li>
<li><a href="#_13">注意事项</a></li>
<li><a href="#file">File 读写</a><ul>
<li><a href="#file_1">创建 FIle 类的对象</a></li>
</ul>
</li>
<li><a href="#_14">常见字符集</a><ul>
<li><a href="#ascii">标准 ASCII 字符集</a></li>
<li><a href="#gbk">GBK（汉字内码扩展规范，国标）</a></li>
<li><a href="#unicode">Unicode 字符集（统一码，也叫万国码）</a></li>
<li><a href="#_15">使用程序对字符进行编码和解码操作</a></li>
</ul>
</li>
<li><a href="#io">IO 流</a><ul>
<li><a href="#io_1">IO 流的体系</a><ul>
<li><a href="#fileinputstream">FileInputStream（文件字节输入流）</a></li>
<li><a href="#fileoutputstream">FileOutputStream（文件字节输出流）</a></li>
<li><a href="#filereader">FIleReader（文件字符输入流）</a></li>
<li><a href="#filewriter">FileWriter（文件字符输出流）</a></li>
</ul>
</li>
<li><a href="#_16">缓冲流</a><ul>
<li><a href="#bufferedreader">BufferedReader（缓冲字符输入流）</a></li>
<li><a href="#bufferedwriter">BufferedWriter（缓冲字符输出流）</a></li>
</ul>
</li>
<li><a href="#_17">其他流</a><ul>
<li><a href="#inputstreamreader">InputStreamReader（字符输入转换流）</a></li>
<li><a href="#printstreamprintwriter">PrintStream/PrintWriter（打印流）</a></li>
</ul>
</li>
<li><a href="#_18">特殊数据流</a><ul>
<li><a href="#dataoutputstream">DataOutputStream（数据输出流）</a></li>
<li><a href="#datainputstream">DataInputStream（数据输入流）</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#io_2">IO 框架</a><ul>
<li><a href="#commons-io">Commons-io 框架</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_19">多线程</a><ul>
<li><a href="#_20">创建线程</a><ul>
<li><a href="#thread">多线程的创建方式一：继承 Thread 类</a><ul>
<li><a href="#_21">方式一优缺点：</a></li>
<li><a href="#_22">创建线程的注意事项</a></li>
</ul>
</li>
<li><a href="#runnable">多线程的创建方式二：实现 Runnable 接口</a><ul>
<li><a href="#_23">方式二的优缺点：</a></li>
</ul>
</li>
<li><a href="#callable">线程的创建方式三：实现 Callable 接口</a><ul>
<li><a href="#_24">线程创建方式三的优缺点：</a></li>
</ul>
</li>
<li><a href="#_25">总结三种线程创建方式的优缺点对比：</a></li>
</ul>
</li>
<li><a href="#_26">什么是线程安全问题？</a><ul>
<li><a href="#_27">线程同步</a><ul>
<li><a href="#_28">方式一：同步代码块；</a></li>
<li><a href="#_29">方式二：同步方法；</a></li>
<li><a href="#lock">方式三：lock 锁；</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_30">线程池</a><ul>
<li><a href="#_31">线程池的工作原理：</a></li>
<li><a href="#_32">创建线程池</a><ul>
<li><a href="#executorservice-threadpoolexecutor">方式一：使用 ExecutorService 的实现类 ThreadPoolExecutor 来创建一个线程池对象；</a></li>
<li><a href="#executors">方式二：使用 Executors（线程池的工具类）调用方法来返回不同特点的线程池对象；</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#_33">网络编程</a><ul>
<li><a href="#_34">网络编程三要素</a><ul>
<li><a href="#ip">IP</a></li>
<li><a href="#_35">端口</a></li>
<li><a href="#_36">协议</a></li>
</ul>
</li>
<li><a href="#udp">UDP通信</a></li>
<li><a href="#tcp">TCP通信</a></li>
<li><a href="#_37">综合案例</a></li>
</ul>
</li>
<li><a href="#java_2">Java 高级技术</a><ul>
<li><a href="#_38">单元测试</a></li>
<li><a href="#_39">反射</a><ul>
<li><a href="#_40">认识反射、获取类</a><ul>
<li><a href="#class">反射第一步，获取类的 class 对象（类本身）</a></li>
<li><a href="#_41">反射获取类中的成分并操作</a></li>
</ul>
</li>
<li><a href="#_42">反射的作用、应用场景</a></li>
</ul>
</li>
<li><a href="#_43">注解</a><ul>
<li><a href="#_44">概述、自定义注解</a></li>
<li><a href="#_45">元注解</a><ul>
<li><a href="#target">@Target</a></li>
<li><a href="#retention">@Retention</a></li>
</ul>
</li>
<li><a href="#_46">注解的解析</a><ul>
<li><a href="#_47">如何解析注解？</a></li>
<li><a href="#_48">解析注解的案例</a></li>
</ul>
</li>
<li><a href="#_49">作用、应用场景</a></li>
</ul>
</li>
<li><a href="#_50">动态代理</a><ul>
<li><a href="#_51">为什么需要代理？</a></li>
<li><a href="#_52">解决实际问题、掌握使用代理的好处</a></li>
<li><a href="#_53">动态代理的工作流程</a></li>
<li><a href="#_54">代码实例</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h1 id="java">java 提高<a class="headerlink" href="#java" title="Permanent link">&para;</a></h1>
<h2 id="java_1">java 中的异常<a class="headerlink" href="#java_1" title="Permanent link">&para;</a></h2>
<p><img alt="Java 的异常体系谱图" src="https://cdn.jsdelivr.net/gh/Gongzihang6/Pictures@main/Medias/medias%2F2025%2F07%2Fimage-20250611182352774.png" /></p>
<p>认识运行时异常和编译时异常：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.itheima.demo1exception</span><span class="p">;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.FileInputStream</span><span class="p">;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.io.InputStream</span><span class="p">;</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.text.ParseException</span><span class="p">;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.text.SimpleDateFormat</span><span class="p">;</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Date</span><span class="p">;</span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ExceptionDemo1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">        </span><span class="c1">// 目标：认识异常的体系，搞清楚异常的基本作用。</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">        </span><span class="c1">// show();</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">        </span><span class="c1">// try...catch捕获异常的写法</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="w">            </span><span class="c1">// 监视代码，出现异常，会被catch拦截住这个异常</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="w">            </span><span class="n">show2</span><span class="p">();</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w"> </span><span class="c1">// 打印这个异常栈信息，按照程序调用逻辑顺序打印异常信息</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="w">    </span><span class="c1">// 定义一个方法认识编译异常。</span>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="w">    </span><span class="c1">// 编译异常直接抛出给方法</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">show2</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;==程序开始。。。。==&quot;</span><span class="p">);</span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="w">        </span><span class="c1">// 编译异常：编译阶段报错，编译不通过。</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;2024-07-09 11:12:13&quot;</span><span class="p">;</span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="w">        </span><span class="c1">// 把字符串时间解析成Java中的一个日期对象。</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="w">        </span><span class="n">SimpleDateFormat</span><span class="w"> </span><span class="n">sdf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SimpleDateFormat</span><span class="p">(</span><span class="s">&quot;yyyy-MM-dd HH:mm:ss&quot;</span><span class="p">);</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="w">        </span><span class="n">Date</span><span class="w"> </span><span class="n">date</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sdf</span><span class="p">.</span><span class="na">parse</span><span class="p">(</span><span class="n">str</span><span class="p">);</span><span class="w"> </span><span class="c1">// 编译时异常，提醒程序员这里的程序（解析日期时间）很容易出错，请您注意！</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">date</span><span class="p">);</span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="w">        </span><span class="c1">// InputStream is = new FileInputStream(&quot;D:/meinv.png&quot;);</span>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;==程序结束。。。。==&quot;</span><span class="p">);</span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a>
<a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="w">    </span><span class="c1">// 定义一个方法认识运行时异常。</span>
<a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">show</span><span class="p">(){</span>
<a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;==程序开始。。。。==&quot;</span><span class="p">);</span>
<a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="w">        </span><span class="c1">// 运行时异常的特点：编译阶段不报错，运行时出现的异常，继承自 RuntimeException。</span>
<a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="w">        </span><span class="kt">int</span><span class="o">[]</span><span class="w"> </span><span class="n">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">};</span>
<a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="w">        </span><span class="c1">// System.out.println(arr[3]); // ArrayIndexOutOfBoundsException</span>
<a id="__codelineno-0-44" name="__codelineno-0-44"></a>
<a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="w">        </span><span class="c1">// 出现运行时异常，程序会停止运行，不再运行异常后面的代码</span>
<a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="w">        </span><span class="c1">// System.out.println(10/0); // ArithmeticException</span>
<a id="__codelineno-0-47" name="__codelineno-0-47"></a>
<a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="w">        </span><span class="c1">// 空指针异常</span>
<a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>
<a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="na">length</span><span class="p">());</span><span class="w"> </span><span class="c1">// NullPointerException</span>
<a id="__codelineno-0-52" name="__codelineno-0-52"></a>
<a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;==程序结束。。。。==&quot;</span><span class="p">);</span>
<a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="_1">异常的基本处理<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>抛出异常（throws）</strong>：在方法上使用 throws 关键字，可以将方法内部出现的异常跑出去给调用者处理；</li>
<li><strong>捕获异常（try...catch）</strong>：直接捕获程序出现的异常；</li>
</ul>
<h3 id="_2">异常的作用：<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<ul>
<li>用来定位程序 bug 的关键信息；</li>
<li>可以作为方法内部的一种特殊返回值，以便通知上层调用者，方法的执行问题；</li>
</ul>
<h3 id="_3">自定义异常：<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>Java 无法为这个世界上全部的问题都提供异常类来代表， 如果企业自己的某种问题，想通过异常来表示，以便用异常来管理该问题，那就需要自己来定义异常类了。</p>
<h4 id="_4">自定义运行时异常：<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<ul>
<li>定义一个异常类型继承 RuntimeException</li>
<li>重写构造器</li>
<li>通过 throw new 异常类（×××）来创建异常对象并抛出</li>
<li>特点：编译阶段不报错，运行时才可能出现！提醒不属于激进型</li>
</ul>
<h4 id="_5">自定义编译时异常：<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<ul>
<li>定义一个异常类继承 Exception</li>
<li>重写构造器</li>
<li>通过 throw new 异常类（×××）创建异常对象并抛出</li>
<li>特点：编译阶段就报错，提醒比较激进</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-1-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-1-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-1-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-1-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-1-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-1-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-1-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-1-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-1-10">10</a></span>
<span class="normal"><a href="#__codelineno-1-11">11</a></span>
<span class="normal"><a href="#__codelineno-1-12">12</a></span>
<span class="normal"><a href="#__codelineno-1-13">13</a></span>
<span class="normal"><a href="#__codelineno-1-14">14</a></span>
<span class="normal"><a href="#__codelineno-1-15">15</a></span>
<span class="normal"><a href="#__codelineno-1-16">16</a></span>
<span class="normal"><a href="#__codelineno-1-17">17</a></span>
<span class="normal"><a href="#__codelineno-1-18">18</a></span>
<span class="normal"><a href="#__codelineno-1-19">19</a></span>
<span class="normal"><a href="#__codelineno-1-20">20</a></span>
<span class="normal"><a href="#__codelineno-1-21">21</a></span>
<span class="normal"><a href="#__codelineno-1-22">22</a></span>
<span class="normal"><a href="#__codelineno-1-23">23</a></span>
<span class="normal"><a href="#__codelineno-1-24">24</a></span>
<span class="normal"><a href="#__codelineno-1-25">25</a></span>
<span class="normal"><a href="#__codelineno-1-26">26</a></span>
<span class="normal"><a href="#__codelineno-1-27">27</a></span>
<span class="normal"><a href="#__codelineno-1-28">28</a></span>
<span class="normal"><a href="#__codelineno-1-29">29</a></span>
<span class="normal"><a href="#__codelineno-1-30">30</a></span>
<span class="normal"><a href="#__codelineno-1-31">31</a></span>
<span class="normal"><a href="#__codelineno-1-32">32</a></span>
<span class="normal"><a href="#__codelineno-1-33">33</a></span>
<span class="normal"><a href="#__codelineno-1-34">34</a></span>
<span class="normal"><a href="#__codelineno-1-35">35</a></span>
<span class="normal"><a href="#__codelineno-1-36">36</a></span>
<span class="normal"><a href="#__codelineno-1-37">37</a></span>
<span class="normal"><a href="#__codelineno-1-38">38</a></span>
<span class="normal"><a href="#__codelineno-1-39">39</a></span>
<span class="normal"><a href="#__codelineno-1-40">40</a></span>
<span class="normal"><a href="#__codelineno-1-41">41</a></span>
<span class="normal"><a href="#__codelineno-1-42">42</a></span>
<span class="normal"><a href="#__codelineno-1-43">43</a></span>
<span class="normal"><a href="#__codelineno-1-44">44</a></span>
<span class="normal"><a href="#__codelineno-1-45">45</a></span>
<span class="normal"><a href="#__codelineno-1-46">46</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.itheima.demo1exception</span><span class="p">;</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ExceptionDemo3</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="w">        </span><span class="c1">// 目标：认识自定义异常。</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;程序开始。。。。&quot;</span><span class="p">);</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="w">            </span><span class="n">saveAge</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;成功了!&quot;</span><span class="p">);</span>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">ItheimaAgeIllegalException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;失败了！&quot;</span><span class="p">);</span>
<a id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-1-14" name="__codelineno-1-14"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;程序结束。。。。&quot;</span><span class="p">);</span>
<a id="__codelineno-1-15" name="__codelineno-1-15"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-1-16" name="__codelineno-1-16"></a>
<a id="__codelineno-1-17" name="__codelineno-1-17"></a><span class="w">    </span><span class="c1">// 需求：我们公司的系统只要收到了年龄小于1岁或者大于200岁就是一个年龄非法异常。</span>
<a id="__codelineno-1-18" name="__codelineno-1-18"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">saveAge</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">ItheimaAgeIllegalException</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-19" name="__codelineno-1-19"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">age</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">200</span><span class="p">){</span>
<a id="__codelineno-1-20" name="__codelineno-1-20"></a><span class="w">            </span><span class="c1">// 年龄非法；抛出去一个异常。</span>
<a id="__codelineno-1-21" name="__codelineno-1-21"></a><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ItheimaAgeIllegalException</span><span class="p">(</span><span class="s">&quot;年龄非法 age 不能低于1岁不能高于200岁&quot;</span><span class="p">);</span>
<a id="__codelineno-1-22" name="__codelineno-1-22"></a><span class="w">        </span><span class="p">}</span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-23" name="__codelineno-1-23"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;年龄合法&quot;</span><span class="p">);</span>
<a id="__codelineno-1-24" name="__codelineno-1-24"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;保存年龄：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">age</span><span class="p">);</span>
<a id="__codelineno-1-25" name="__codelineno-1-25"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-1-26" name="__codelineno-1-26"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-1-27" name="__codelineno-1-27"></a><span class="p">}</span>
<a id="__codelineno-1-28" name="__codelineno-1-28"></a><span class="c1">// 自定义运行时异常，编译正常，运行时可能出错</span>
<a id="__codelineno-1-29" name="__codelineno-1-29"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ItheimaAgeIllegalRuntimeException</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">{</span>
<a id="__codelineno-1-30" name="__codelineno-1-30"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ItheimaAgeIllegalRuntimeException</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-31" name="__codelineno-1-31"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-1-32" name="__codelineno-1-32"></a>
<a id="__codelineno-1-33" name="__codelineno-1-33"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ItheimaAgeIllegalRuntimeException</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-34" name="__codelineno-1-34"></a><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
<a id="__codelineno-1-35" name="__codelineno-1-35"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-1-36" name="__codelineno-1-36"></a><span class="p">}</span>
<a id="__codelineno-1-37" name="__codelineno-1-37"></a>
<a id="__codelineno-1-38" name="__codelineno-1-38"></a><span class="c1">// 自定义编译时异常，编译阶段就提醒，激进，必须抛出去才能正常编译运行</span>
<a id="__codelineno-1-39" name="__codelineno-1-39"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ItheimaAgeIllegalException</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Exception</span><span class="p">{</span>
<a id="__codelineno-1-40" name="__codelineno-1-40"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ItheimaAgeIllegalException</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-41" name="__codelineno-1-41"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-1-42" name="__codelineno-1-42"></a>
<a id="__codelineno-1-43" name="__codelineno-1-43"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ItheimaAgeIllegalException</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-44" name="__codelineno-1-44"></a><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">message</span><span class="p">);</span>
<a id="__codelineno-1-45" name="__codelineno-1-45"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-1-46" name="__codelineno-1-46"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="_6">异常的处理方案：<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<ol>
<li>底层异常层层往上抛出，最外层捕获异常，记录下异常信息，并响应适合用户观看的信息进行提示；</li>
<li>最外层捕获异常后，尝试重新修复；</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span>
<span class="normal"><a href="#__codelineno-2-16">16</a></span>
<span class="normal"><a href="#__codelineno-2-17">17</a></span>
<span class="normal"><a href="#__codelineno-2-18">18</a></span>
<span class="normal"><a href="#__codelineno-2-19">19</a></span>
<span class="normal"><a href="#__codelineno-2-20">20</a></span>
<span class="normal"><a href="#__codelineno-2-21">21</a></span>
<span class="normal"><a href="#__codelineno-2-22">22</a></span>
<span class="normal"><a href="#__codelineno-2-23">23</a></span>
<span class="normal"><a href="#__codelineno-2-24">24</a></span>
<span class="normal"><a href="#__codelineno-2-25">25</a></span>
<span class="normal"><a href="#__codelineno-2-26">26</a></span>
<span class="normal"><a href="#__codelineno-2-27">27</a></span>
<span class="normal"><a href="#__codelineno-2-28">28</a></span>
<span class="normal"><a href="#__codelineno-2-29">29</a></span>
<span class="normal"><a href="#__codelineno-2-30">30</a></span>
<span class="normal"><a href="#__codelineno-2-31">31</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.itheima.demo1exception</span><span class="p">;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.Scanner</span><span class="p">;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ExceptionDemo6</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="w">        </span><span class="c1">// 目标：掌握异常的处理方案2：捕获异常对象，尝试重新修复。</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="w">        </span><span class="c1">// 接收用户的一个定价</span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;程序开始。。。。&quot;</span><span class="p">);</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">        </span><span class="c1">// 设置一个死循环，只有正常处理才能break，如果出现异常，则继续循环，知道用户修复bug为止</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="w">                </span><span class="kt">double</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userInputPrice</span><span class="p">();</span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;用户成功设置了商品定价：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">price</span><span class="p">);</span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="w">                </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;您输入的数据是瞎搞的，请不要瞎输入价格！&quot;</span><span class="p">);</span>
<a id="__codelineno-2-19" name="__codelineno-2-19"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-2-20" name="__codelineno-2-20"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-2-21" name="__codelineno-2-21"></a>
<a id="__codelineno-2-22" name="__codelineno-2-22"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;程序结束。。。。&quot;</span><span class="p">);</span>
<a id="__codelineno-2-23" name="__codelineno-2-23"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-24" name="__codelineno-2-24"></a>
<a id="__codelineno-2-25" name="__codelineno-2-25"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="nf">userInputPrice</span><span class="p">(){</span>
<a id="__codelineno-2-26" name="__codelineno-2-26"></a><span class="w">        </span><span class="n">Scanner</span><span class="w"> </span><span class="n">sc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Scanner</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">in</span><span class="p">);</span>
<a id="__codelineno-2-27" name="__codelineno-2-27"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;请您输入商品定价：&quot;</span><span class="p">);</span>
<a id="__codelineno-2-28" name="__codelineno-2-28"></a><span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sc</span><span class="p">.</span><span class="na">nextDouble</span><span class="p">();</span>
<a id="__codelineno-2-29" name="__codelineno-2-29"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">price</span><span class="p">;</span>
<a id="__codelineno-2-30" name="__codelineno-2-30"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-2-31" name="__codelineno-2-31"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h2 id="_7">泛型<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>定义类、接口、方法时，同时声明了一个或者多个类型变量（如：<E>），称为泛型类，泛型接口，泛型方法，它们统称为泛型；</p>
</li>
<li>
<p><strong>作用</strong>：泛型约束了在编译阶段所能操作的数据类型，并自动进行检查的能力！</p>
<p>这样可以避免强制类型转换，及其可能出现的异常；</p>
</li>
<li>
<p><strong>泛型的本质</strong>：把具体的数据类型作为参数传给类型变量；</p>
</li>
</ul>
<h4 id="_8">自定义泛型类<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h4>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-3-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-3-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-3-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-3-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-3-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-3-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-3-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-3-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-3-10">10</a></span>
<span class="normal"><a href="#__codelineno-3-11">11</a></span>
<span class="normal"><a href="#__codelineno-3-12">12</a></span>
<span class="normal"><a href="#__codelineno-3-13">13</a></span>
<span class="normal"><a href="#__codelineno-3-14">14</a></span>
<span class="normal"><a href="#__codelineno-3-15">15</a></span>
<span class="normal"><a href="#__codelineno-3-16">16</a></span>
<span class="normal"><a href="#__codelineno-3-17">17</a></span>
<span class="normal"><a href="#__codelineno-3-18">18</a></span>
<span class="normal"><a href="#__codelineno-3-19">19</a></span>
<span class="normal"><a href="#__codelineno-3-20">20</a></span>
<span class="normal"><a href="#__codelineno-3-21">21</a></span>
<span class="normal"><a href="#__codelineno-3-22">22</a></span>
<span class="normal"><a href="#__codelineno-3-23">23</a></span>
<span class="normal"><a href="#__codelineno-3-24">24</a></span>
<span class="normal"><a href="#__codelineno-3-25">25</a></span>
<span class="normal"><a href="#__codelineno-3-26">26</a></span>
<span class="normal"><a href="#__codelineno-3-27">27</a></span>
<span class="normal"><a href="#__codelineno-3-28">28</a></span>
<span class="normal"><a href="#__codelineno-3-29">29</a></span>
<span class="normal"><a href="#__codelineno-3-30">30</a></span>
<span class="normal"><a href="#__codelineno-3-31">31</a></span>
<span class="normal"><a href="#__codelineno-3-32">32</a></span>
<span class="normal"><a href="#__codelineno-3-33">33</a></span>
<span class="normal"><a href="#__codelineno-3-34">34</a></span>
<span class="normal"><a href="#__codelineno-3-35">35</a></span>
<span class="normal"><a href="#__codelineno-3-36">36</a></span>
<span class="normal"><a href="#__codelineno-3-37">37</a></span>
<span class="normal"><a href="#__codelineno-3-38">38</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="c1">// 自定义泛型类</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyArrayList</span><span class="o">&lt;</span><span class="n">E</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ArrayList</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="p">();</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="n">E</span><span class="w"> </span><span class="n">e</span><span class="p">){</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<a id="__codelineno-3-8" name="__codelineno-3-8"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">true</span><span class="p">;</span>
<a id="__codelineno-3-9" name="__codelineno-3-9"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-3-10" name="__codelineno-3-10"></a>
<a id="__codelineno-3-11" name="__codelineno-3-11"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">remove</span><span class="p">(</span><span class="n">E</span><span class="w"> </span><span class="n">e</span><span class="p">){</span>
<a id="__codelineno-3-12" name="__codelineno-3-12"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">e</span><span class="p">);</span>
<a id="__codelineno-3-13" name="__codelineno-3-13"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-3-14" name="__codelineno-3-14"></a>
<a id="__codelineno-3-15" name="__codelineno-3-15"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-3-16" name="__codelineno-3-16"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">toString</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-17" name="__codelineno-3-17"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="na">toString</span><span class="p">();</span>
<a id="__codelineno-3-18" name="__codelineno-3-18"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-3-19" name="__codelineno-3-19"></a><span class="p">}</span>
<a id="__codelineno-3-20" name="__codelineno-3-20"></a>
<a id="__codelineno-3-21" name="__codelineno-3-21"></a>
<a id="__codelineno-3-22" name="__codelineno-3-22"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GenericDemo2</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-23" name="__codelineno-3-23"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-24" name="__codelineno-3-24"></a><span class="w">        </span><span class="c1">// 目标：学会自定义泛型类。</span>
<a id="__codelineno-3-25" name="__codelineno-3-25"></a><span class="w">        </span><span class="c1">// 需求：请您模拟ArrayList集合自定义一个集合MyArrayList.</span>
<a id="__codelineno-3-26" name="__codelineno-3-26"></a><span class="w">        </span><span class="c1">// MyArrayList&lt;String&gt; list = new MyArrayList&lt;String&gt;();</span>
<a id="__codelineno-3-27" name="__codelineno-3-27"></a><span class="w">        </span><span class="n">MyArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">mlist</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span><span class="w"> </span><span class="c1">// JDK 7开始支持的后面类型可以不写</span>
<a id="__codelineno-3-28" name="__codelineno-3-28"></a><span class="w">        </span><span class="n">mlist</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">);</span>
<a id="__codelineno-3-29" name="__codelineno-3-29"></a><span class="w">        </span><span class="n">mlist</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;world&quot;</span><span class="p">);</span>
<a id="__codelineno-3-30" name="__codelineno-3-30"></a><span class="c1">//        list.add(555); // 报错</span>
<a id="__codelineno-3-31" name="__codelineno-3-31"></a><span class="w">        </span><span class="n">mlist</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;java&quot;</span><span class="p">);</span>
<a id="__codelineno-3-32" name="__codelineno-3-32"></a><span class="w">        </span><span class="n">mlist</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;前端&quot;</span><span class="p">);</span>
<a id="__codelineno-3-33" name="__codelineno-3-33"></a>
<a id="__codelineno-3-34" name="__codelineno-3-34"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">mlist</span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="s">&quot;world&quot;</span><span class="p">));</span>
<a id="__codelineno-3-35" name="__codelineno-3-35"></a>
<a id="__codelineno-3-36" name="__codelineno-3-36"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">mlist</span><span class="p">);</span>
<a id="__codelineno-3-37" name="__codelineno-3-37"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-3-38" name="__codelineno-3-38"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="_9">自定义泛型接口<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h4>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span>
<span class="normal"><a href="#__codelineno-4-4">4</a></span>
<span class="normal"><a href="#__codelineno-4-5">5</a></span>
<span class="normal"><a href="#__codelineno-4-6">6</a></span>
<span class="normal"><a href="#__codelineno-4-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="c1">// 自定义泛型接口</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">Data</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">t</span><span class="p">);</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">delete</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">t</span><span class="p">);</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">t</span><span class="p">);</span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="w">    </span><span class="n">T</span><span class="w"> </span><span class="nf">query</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="_10">自定义泛型方法，能够接收任何类型参数，实现通用<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h4>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span>
<span class="normal"><a href="#__codelineno-5-11">11</a></span>
<span class="normal"><a href="#__codelineno-5-12">12</a></span>
<span class="normal"><a href="#__codelineno-5-13">13</a></span>
<span class="normal"><a href="#__codelineno-5-14">14</a></span>
<span class="normal"><a href="#__codelineno-5-15">15</a></span>
<span class="normal"><a href="#__codelineno-5-16">16</a></span>
<span class="normal"><a href="#__codelineno-5-17">17</a></span>
<span class="normal"><a href="#__codelineno-5-18">18</a></span>
<span class="normal"><a href="#__codelineno-5-19">19</a></span>
<span class="normal"><a href="#__codelineno-5-20">20</a></span>
<span class="normal"><a href="#__codelineno-5-21">21</a></span>
<span class="normal"><a href="#__codelineno-5-22">22</a></span>
<span class="normal"><a href="#__codelineno-5-23">23</a></span>
<span class="normal"><a href="#__codelineno-5-24">24</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GenericDemo4</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">        </span><span class="c1">// 目标：学会定义泛型方法，搞清楚作用。</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">        </span><span class="c1">// 需求：打印任意数组的内容。</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">        </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;赵敏&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;张无忌&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;周芷若&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;小昭&quot;</span><span class="p">};</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">        </span><span class="n">printArray</span><span class="p">(</span><span class="n">names</span><span class="p">);</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">        </span><span class="n">Student</span><span class="o">[]</span><span class="w"> </span><span class="n">stus</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Student</span><span class="o">[</span><span class="mi">3</span><span class="o">]</span><span class="p">;</span>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="w">        </span><span class="n">printArray</span><span class="p">(</span><span class="n">stus</span><span class="p">);</span>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a>
<a id="__codelineno-5-11" name="__codelineno-5-11"></a><span class="w">        </span><span class="n">Student</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getMax</span><span class="p">(</span><span class="n">stus</span><span class="p">);</span>
<a id="__codelineno-5-12" name="__codelineno-5-12"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">max2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getMax</span><span class="p">(</span><span class="n">names</span><span class="p">);</span>
<a id="__codelineno-5-13" name="__codelineno-5-13"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-14" name="__codelineno-5-14"></a>
<a id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">printArray</span><span class="p">(</span><span class="n">T</span><span class="o">[]</span><span class="w"> </span><span class="n">names</span><span class="p">){</span>
<a id="__codelineno-5-16" name="__codelineno-5-16"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">names</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-17" name="__codelineno-5-17"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
<a id="__codelineno-5-18" name="__codelineno-5-18"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-5-19" name="__codelineno-5-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-20" name="__codelineno-5-20"></a>
<a id="__codelineno-5-21" name="__codelineno-5-21"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="nf">getMax</span><span class="p">(</span><span class="n">T</span><span class="o">[]</span><span class="w"> </span><span class="n">names</span><span class="p">){</span>
<a id="__codelineno-5-22" name="__codelineno-5-22"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<a id="__codelineno-5-23" name="__codelineno-5-23"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-24" name="__codelineno-5-24"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p><strong>通配符：</strong></p>
<ul>
<li>就是“？”，可以在“使用泛型”的时候代表一切类型；E、T、K、V 是在定义泛型的时候使用的；</li>
</ul>
<p><strong>泛型的上下限：</strong></p>
<ul>
<li>泛型上限：<code>? extends Car</code>：?能接收的必须是 Car 或者其子类；</li>
<li>泛型下限：<code>? super Car</code>：?能接收的必须是 Car 或者其父类；</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-6-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-6-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-6-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-6-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-6-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-6-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-6-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-6-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-6-10">10</a></span>
<span class="normal"><a href="#__codelineno-6-11">11</a></span>
<span class="normal"><a href="#__codelineno-6-12">12</a></span>
<span class="normal"><a href="#__codelineno-6-13">13</a></span>
<span class="normal"><a href="#__codelineno-6-14">14</a></span>
<span class="normal"><a href="#__codelineno-6-15">15</a></span>
<span class="normal"><a href="#__codelineno-6-16">16</a></span>
<span class="normal"><a href="#__codelineno-6-17">17</a></span>
<span class="normal"><a href="#__codelineno-6-18">18</a></span>
<span class="normal"><a href="#__codelineno-6-19">19</a></span>
<span class="normal"><a href="#__codelineno-6-20">20</a></span>
<span class="normal"><a href="#__codelineno-6-21">21</a></span>
<span class="normal"><a href="#__codelineno-6-22">22</a></span>
<span class="normal"><a href="#__codelineno-6-23">23</a></span>
<span class="normal"><a href="#__codelineno-6-24">24</a></span>
<span class="normal"><a href="#__codelineno-6-25">25</a></span>
<span class="normal"><a href="#__codelineno-6-26">26</a></span>
<span class="normal"><a href="#__codelineno-6-27">27</a></span>
<span class="normal"><a href="#__codelineno-6-28">28</a></span>
<span class="normal"><a href="#__codelineno-6-29">29</a></span>
<span class="normal"><a href="#__codelineno-6-30">30</a></span>
<span class="normal"><a href="#__codelineno-6-31">31</a></span>
<span class="normal"><a href="#__codelineno-6-32">32</a></span>
<span class="normal"><a href="#__codelineno-6-33">33</a></span>
<span class="normal"><a href="#__codelineno-6-34">34</a></span>
<span class="normal"><a href="#__codelineno-6-35">35</a></span>
<span class="normal"><a href="#__codelineno-6-36">36</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.itheima.demo4genericity</span><span class="p">;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.ArrayList</span><span class="p">;</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GenericDemo5</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-6" name="__codelineno-6-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-7" name="__codelineno-6-7"></a><span class="w">        </span><span class="c1">// 目标：理解通配符和上下限。</span>
<a id="__codelineno-6-8" name="__codelineno-6-8"></a><span class="w">        </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Xiaomi</span><span class="o">&gt;</span><span class="w"> </span><span class="n">xiaomis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<a id="__codelineno-6-9" name="__codelineno-6-9"></a><span class="w">        </span><span class="n">xiaomis</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Xiaomi</span><span class="p">());</span>
<a id="__codelineno-6-10" name="__codelineno-6-10"></a><span class="w">        </span><span class="n">xiaomis</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Xiaomi</span><span class="p">());</span>
<a id="__codelineno-6-11" name="__codelineno-6-11"></a><span class="w">        </span><span class="n">xiaomis</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Xiaomi</span><span class="p">());</span>
<a id="__codelineno-6-12" name="__codelineno-6-12"></a><span class="w">        </span><span class="n">go</span><span class="p">(</span><span class="n">xiaomis</span><span class="p">);</span>
<a id="__codelineno-6-13" name="__codelineno-6-13"></a>
<a id="__codelineno-6-14" name="__codelineno-6-14"></a><span class="w">        </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">BYD</span><span class="o">&gt;</span><span class="w"> </span><span class="n">byds</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<a id="__codelineno-6-15" name="__codelineno-6-15"></a><span class="w">        </span><span class="n">byds</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BYD</span><span class="p">());</span>
<a id="__codelineno-6-16" name="__codelineno-6-16"></a><span class="w">        </span><span class="n">byds</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BYD</span><span class="p">());</span>
<a id="__codelineno-6-17" name="__codelineno-6-17"></a><span class="w">        </span><span class="n">byds</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">BYD</span><span class="p">());</span>
<a id="__codelineno-6-18" name="__codelineno-6-18"></a><span class="w">        </span><span class="n">go</span><span class="p">(</span><span class="n">byds</span><span class="p">);</span>
<a id="__codelineno-6-19" name="__codelineno-6-19"></a>
<a id="__codelineno-6-20" name="__codelineno-6-20"></a>
<a id="__codelineno-6-21" name="__codelineno-6-21"></a><span class="c1">//        ArrayList&lt;Dog&gt; dogs = new ArrayList&lt;&gt;();</span>
<a id="__codelineno-6-22" name="__codelineno-6-22"></a><span class="c1">//        dogs.add(new Dog());</span>
<a id="__codelineno-6-23" name="__codelineno-6-23"></a><span class="c1">//        dogs.add(new Dog());</span>
<a id="__codelineno-6-24" name="__codelineno-6-24"></a><span class="c1">//        dogs.add(new Dog());</span>
<a id="__codelineno-6-25" name="__codelineno-6-25"></a><span class="c1">//        go(dogs);</span>
<a id="__codelineno-6-26" name="__codelineno-6-26"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-6-27" name="__codelineno-6-27"></a>
<a id="__codelineno-6-28" name="__codelineno-6-28"></a><span class="w">    </span><span class="c1">// 需求：开发一个极品飞车的游戏。</span>
<a id="__codelineno-6-29" name="__codelineno-6-29"></a><span class="w">    </span><span class="c1">// 虽然Xiaomi和BYD是Car的子类，但是 ArrayList&lt;Xiaomi&gt;  ArrayList&lt;BYD&gt;和 ArrayList&lt;Car&gt; 是没有半毛钱关系！</span>
<a id="__codelineno-6-30" name="__codelineno-6-30"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">go</span><span class="p">(</span><span class="n">ArrayList</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Car</span><span class="o">&gt;</span><span class="w"> </span><span class="n">cars</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-31" name="__codelineno-6-31"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-6-32" name="__codelineno-6-32"></a>
<a id="__codelineno-6-33" name="__codelineno-6-33"></a><span class="w">    </span><span class="c1">// public static void go2(ArrayList&lt;E&gt;){</span>
<a id="__codelineno-6-34" name="__codelineno-6-34"></a><span class="w">    </span><span class="c1">//</span>
<a id="__codelineno-6-35" name="__codelineno-6-35"></a><span class="w">    </span><span class="c1">// }</span>
<a id="__codelineno-6-36" name="__codelineno-6-36"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p><strong>泛型支持的类型：</strong></p>
<ul>
<li>泛型不支持基本数据类型，只能支持对象类型（引用数据类型）</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align: center;">基本数据类型</th>
<th style="text-align: center;">对应的包装类（引用数据类型）</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">byte</td>
<td style="text-align: center;">Byte</td>
</tr>
<tr>
<td style="text-align: center;">short</td>
<td style="text-align: center;">Short</td>
</tr>
<tr>
<td style="text-align: center;">int</td>
<td style="text-align: center;">Integer</td>
</tr>
<tr>
<td style="text-align: center;">long</td>
<td style="text-align: center;">Long</td>
</tr>
<tr>
<td style="text-align: center;">char</td>
<td style="text-align: center;">Character</td>
</tr>
<tr>
<td style="text-align: center;">float</td>
<td style="text-align: center;">Float</td>
</tr>
<tr>
<td style="text-align: center;">double</td>
<td style="text-align: center;">Double</td>
</tr>
<tr>
<td style="text-align: center;">boolean</td>
<td style="text-align: center;">Boolean</td>
</tr>
</tbody>
</table>
<p>自动装箱：基本数据类型可以自动转化为包装类型；</p>
<p>自动拆箱：包装类型可以自动转化为基本数据类型；</p>
<p><strong>包装类具备的其他功能：</strong></p>
<ul>
<li>
<p>可以把基本类型的数据转换成字符串类型</p>
</li>
<li>
<p><code>java
    public static String toString(double d)
    public String toString()</code></p>
</li>
<li>
<p>可以把字符串类型的数值转换成数值本身对应的真实数据类型</p>
</li>
<li>
<p><code>java
    public static int parseInt(String s)
    public static Integer valueOf(String s)</code></p>
</li>
</ul>
<p>```java
package com.itheima.demo5genericity;</p>
<p>import java.util.ArrayList;</p>
<p>public class GenericDemo6 {
    public static void main(String[] args) {
        // 目标：搞清楚泛型和集合不支持基本数据类型，只能支持对象类型（引用数据类型）。
        // ArrayList<int> list = new ArrayList&lt;&gt;();
        // 泛型擦除：泛型工作在编译阶段，等编译后泛型就没用了，所以泛型在编译后都会被擦除。所有类型会恢复成Object类型</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code>    // 把基本数据类型变成包装类对象。
    // 手工包装:
    // Integer i = new Integer(100); // 过时
    Integer it1 = Integer.valueOf(100);  // 推荐的
    Integer it2 = Integer.valueOf(100);  // 推荐的
    System.out.println(it1 == it2);

    // 自动装箱成对象：基本数据类型的数据可以直接变成包装对象的数据，不需要额外做任何事情
    Integer it11 = 130;
    Integer it22 = 130;
    System.out.println(it11 == it22);

    // 自动拆箱：把包装类型的对象直接给基本类型的数据
    int i = it11;
    System.out.println(i);

    ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;();
    list.add(130);  // 自动装箱
    list.add(120);  // 自动装箱
    int rs = list.get(1); // 自动拆箱

    System.out.println(&quot;-----------------------------------------------------------------------&quot;);

    // 包装类新增的功能：
    // 1、把基本类型的数据转换成字符串。
    int j = 23;
    String rs1 = Integer.toString(j);   // &quot;23&quot;
    System.out.println(rs1 + 1); // 231

    Integer i2 = j;
    String rs2 = i2.toString(); // &quot;23&quot;
    System.out.println(rs2 + 1 ); // 231

    String rs3 = j + &quot;&quot;;
    System.out.println(rs3 + 1 ); // 231

    System.out.println(&quot;-----------------------------------------------------------------------&quot;);

    // 2、把字符串数值转换成对应的基本数据类型（很有用）。
    String str = &quot;98&quot;;
    // int i1 = Integer.parseInt(str);
    int i1 = Integer.valueOf(str);
    System.out.println(i1 + 2);

    String str2 = &quot;98.8&quot;;
</code></pre></div></td></tr></table></div>
<p>//        double d = Double.parseDouble(str2);
        double d = Double.valueOf(str2);
        System.out.println(d + 2);
    }
}</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Text Only</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-7-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-7-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-7-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-7-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-7-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-7-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-7-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-7-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-7-10">10</a></span>
<span class="normal"><a href="#__codelineno-7-11">11</a></span>
<span class="normal"><a href="#__codelineno-7-12">12</a></span>
<span class="normal"><a href="#__codelineno-7-13">13</a></span>
<span class="normal"><a href="#__codelineno-7-14">14</a></span>
<span class="normal"><a href="#__codelineno-7-15">15</a></span>
<span class="normal"><a href="#__codelineno-7-16">16</a></span>
<span class="normal"><a href="#__codelineno-7-17">17</a></span>
<span class="normal"><a href="#__codelineno-7-18">18</a></span>
<span class="normal"><a href="#__codelineno-7-19">19</a></span>
<span class="normal"><a href="#__codelineno-7-20">20</a></span>
<span class="normal"><a href="#__codelineno-7-21">21</a></span>
<span class="normal"><a href="#__codelineno-7-22">22</a></span>
<span class="normal"><a href="#__codelineno-7-23">23</a></span>
<span class="normal"><a href="#__codelineno-7-24">24</a></span>
<span class="normal"><a href="#__codelineno-7-25">25</a></span>
<span class="normal"><a href="#__codelineno-7-26">26</a></span>
<span class="normal"><a href="#__codelineno-7-27">27</a></span>
<span class="normal"><a href="#__codelineno-7-28">28</a></span>
<span class="normal"><a href="#__codelineno-7-29">29</a></span>
<span class="normal"><a href="#__codelineno-7-30">30</a></span>
<span class="normal"><a href="#__codelineno-7-31">31</a></span>
<span class="normal"><a href="#__codelineno-7-32">32</a></span>
<span class="normal"><a href="#__codelineno-7-33">33</a></span>
<span class="normal"><a href="#__codelineno-7-34">34</a></span>
<span class="normal"><a href="#__codelineno-7-35">35</a></span>
<span class="normal"><a href="#__codelineno-7-36">36</a></span>
<span class="normal"><a href="#__codelineno-7-37">37</a></span>
<span class="normal"><a href="#__codelineno-7-38">38</a></span>
<span class="normal"><a href="#__codelineno-7-39">39</a></span>
<span class="normal"><a href="#__codelineno-7-40">40</a></span>
<span class="normal"><a href="#__codelineno-7-41">41</a></span>
<span class="normal"><a href="#__codelineno-7-42">42</a></span>
<span class="normal"><a href="#__codelineno-7-43">43</a></span>
<span class="normal"><a href="#__codelineno-7-44">44</a></span>
<span class="normal"><a href="#__codelineno-7-45">45</a></span>
<span class="normal"><a href="#__codelineno-7-46">46</a></span>
<span class="normal"><a href="#__codelineno-7-47">47</a></span>
<span class="normal"><a href="#__codelineno-7-48">48</a></span>
<span class="normal"><a href="#__codelineno-7-49">49</a></span>
<span class="normal"><a href="#__codelineno-7-50">50</a></span>
<span class="normal"><a href="#__codelineno-7-51">51</a></span>
<span class="normal"><a href="#__codelineno-7-52">52</a></span>
<span class="normal"><a href="#__codelineno-7-53">53</a></span>
<span class="normal"><a href="#__codelineno-7-54">54</a></span>
<span class="normal"><a href="#__codelineno-7-55">55</a></span>
<span class="normal"><a href="#__codelineno-7-56">56</a></span>
<span class="normal"><a href="#__codelineno-7-57">57</a></span>
<span class="normal"><a href="#__codelineno-7-58">58</a></span>
<span class="normal"><a href="#__codelineno-7-59">59</a></span>
<span class="normal"><a href="#__codelineno-7-60">60</a></span>
<span class="normal"><a href="#__codelineno-7-61">61</a></span>
<span class="normal"><a href="#__codelineno-7-62">62</a></span>
<span class="normal"><a href="#__codelineno-7-63">63</a></span>
<span class="normal"><a href="#__codelineno-7-64">64</a></span>
<span class="normal"><a href="#__codelineno-7-65">65</a></span>
<span class="normal"><a href="#__codelineno-7-66">66</a></span>
<span class="normal"><a href="#__codelineno-7-67">67</a></span>
<span class="normal"><a href="#__codelineno-7-68">68</a></span>
<span class="normal"><a href="#__codelineno-7-69">69</a></span>
<span class="normal"><a href="#__codelineno-7-70">70</a></span>
<span class="normal"><a href="#__codelineno-7-71">71</a></span>
<span class="normal"><a href="#__codelineno-7-72">72</a></span>
<span class="normal"><a href="#__codelineno-7-73">73</a></span>
<span class="normal"><a href="#__codelineno-7-74">74</a></span>
<span class="normal"><a href="#__codelineno-7-75">75</a></span>
<span class="normal"><a href="#__codelineno-7-76">76</a></span>
<span class="normal"><a href="#__codelineno-7-77">77</a></span>
<span class="normal"><a href="#__codelineno-7-78">78</a></span>
<span class="normal"><a href="#__codelineno-7-79">79</a></span>
<span class="normal"><a href="#__codelineno-7-80">80</a></span>
<span class="normal"><a href="#__codelineno-7-81">81</a></span>
<span class="normal"><a href="#__codelineno-7-82">82</a></span>
<span class="normal"><a href="#__codelineno-7-83">83</a></span>
<span class="normal"><a href="#__codelineno-7-84">84</a></span>
<span class="normal"><a href="#__codelineno-7-85">85</a></span>
<span class="normal"><a href="#__codelineno-7-86">86</a></span>
<span class="normal"><a href="#__codelineno-7-87">87</a></span>
<span class="normal"><a href="#__codelineno-7-88">88</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a>为什么要有包装类？
<a id="__codelineno-7-2" name="__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a>- 为了万物皆对象，并且泛型和集合都不支持基本类型，只支持包装类；
<a id="__codelineno-7-4" name="__codelineno-7-4"></a>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a>## File、字符集、I/O 流
<a id="__codelineno-7-6" name="__codelineno-7-6"></a>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a>### stream 流
<a id="__codelineno-7-8" name="__codelineno-7-8"></a>
<a id="__codelineno-7-9" name="__codelineno-7-9"></a>使用 stream 流流式编程；简化代码，提高可读性；Stream API（`java.util.stream`）提供了一种声明式处理集合数据的方式，支持函数式编程风格。
<a id="__codelineno-7-10" name="__codelineno-7-10"></a>
<a id="__codelineno-7-11" name="__codelineno-7-11"></a>#### 创建流
<a id="__codelineno-7-12" name="__codelineno-7-12"></a>
<a id="__codelineno-7-13" name="__codelineno-7-13"></a>| 方法                                  | 说明             | 示例                                 |
<a id="__codelineno-7-14" name="__codelineno-7-14"></a>| :------------------------------------ | :--------------- | :----------------------------------- |
<a id="__codelineno-7-15" name="__codelineno-7-15"></a>| `集合.stream()`                       | 从集合创建顺序流 | `list.stream()`                      |
<a id="__codelineno-7-16" name="__codelineno-7-16"></a>| `集合.parallelStream()`               | 创建并行流       | `list.parallelStream()`              |
<a id="__codelineno-7-17" name="__codelineno-7-17"></a>| `Stream.of(T...)`                     | 从元素创建流     | `Stream.of(&quot;a&quot;, &quot;b&quot;)`                |
<a id="__codelineno-7-18" name="__codelineno-7-18"></a>| `Arrays.stream(T[])`                  | 从数组创建流     | `Arrays.stream(new int[]{1,2})`      |
<a id="__codelineno-7-19" name="__codelineno-7-19"></a>| `Stream.iterate(种子, UnaryOperator)` | 迭代生成无限流   | `Stream.iterate(0, n -&gt; n+2)`        |
<a id="__codelineno-7-20" name="__codelineno-7-20"></a>| `Stream.generate(Supplier)`           | 生成无限流       | `Stream.generate(Math::random)`      |
<a id="__codelineno-7-21" name="__codelineno-7-21"></a>| `Stream.empty()`                      | 创建空流         | `Stream.empty()`                     |
<a id="__codelineno-7-22" name="__codelineno-7-22"></a>| `Files.lines(Path)`                   | 从文件创建行流   | `Files.lines(Paths.get(&quot;file.txt&quot;))` |
<a id="__codelineno-7-23" name="__codelineno-7-23"></a>
<a id="__codelineno-7-24" name="__codelineno-7-24"></a>#### 中间操作（惰性操作）
<a id="__codelineno-7-25" name="__codelineno-7-25"></a>
<a id="__codelineno-7-26" name="__codelineno-7-26"></a>| 操作                 | 说明                   | 示例                                       |
<a id="__codelineno-7-27" name="__codelineno-7-27"></a>| :------------------- | :--------------------- | :----------------------------------------- |
<a id="__codelineno-7-28" name="__codelineno-7-28"></a>| `filter(Predicate)`  | 过滤元素               | `stream.filter(s -&gt; s.contains(&quot;a&quot;))`      |
<a id="__codelineno-7-29" name="__codelineno-7-29"></a>| `map(Function)`      | 元素转换               | `stream.map(String::toUpperCase)`          |
<a id="__codelineno-7-30" name="__codelineno-7-30"></a>| `flatMap(Function)`  | 扁平化流（合并嵌套流） | `listStream.flatMap(List::stream)`         |
<a id="__codelineno-7-31" name="__codelineno-7-31"></a>| `distinct()`         | 去重                   | `stream.distinct()`                        |
<a id="__codelineno-7-32" name="__codelineno-7-32"></a>| `sorted()`           | 自然排序               | `stream.sorted()`                          |
<a id="__codelineno-7-33" name="__codelineno-7-33"></a>| `sorted(Comparator)` | 自定义排序             | `stream.sorted(Comparator.reverseOrder())` |
<a id="__codelineno-7-34" name="__codelineno-7-34"></a>| `limit(long)`        | 截取前 n 个元素        | `stream.limit(5)`                          |
<a id="__codelineno-7-35" name="__codelineno-7-35"></a>| `skip(long)`         | 跳过前 n 个元素        | `stream.skip(2)`                           |
<a id="__codelineno-7-36" name="__codelineno-7-36"></a>| `peek(Consumer)`     | 调试（不修改流）       | `stream.peek(System.out::println)`         |
<a id="__codelineno-7-37" name="__codelineno-7-37"></a>
<a id="__codelineno-7-38" name="__codelineno-7-38"></a>------
<a id="__codelineno-7-39" name="__codelineno-7-39"></a>
<a id="__codelineno-7-40" name="__codelineno-7-40"></a>#### 终端操作（触发计算）
<a id="__codelineno-7-41" name="__codelineno-7-41"></a>
<a id="__codelineno-7-42" name="__codelineno-7-42"></a>##### 遍历与匹配
<a id="__codelineno-7-43" name="__codelineno-7-43"></a>
<a id="__codelineno-7-44" name="__codelineno-7-44"></a>| 操作                   | 说明                       | 示例                                       |
<a id="__codelineno-7-45" name="__codelineno-7-45"></a>| :--------------------- | :------------------------- | :----------------------------------------- |
<a id="__codelineno-7-46" name="__codelineno-7-46"></a>| `forEach(Consumer)`    | 遍历所有元素               | `stream.forEach(System.out::println)`      |
<a id="__codelineno-7-47" name="__codelineno-7-47"></a>| `allMatch(Predicate)`  | 所有元素匹配               | `stream.allMatch(s -&gt; s.length() &gt; 0)`     |
<a id="__codelineno-7-48" name="__codelineno-7-48"></a>| `anyMatch(Predicate)`  | 任意元素匹配               | `stream.anyMatch(s -&gt; s.equals(&quot;Java&quot;))`   |
<a id="__codelineno-7-49" name="__codelineno-7-49"></a>| `noneMatch(Predicate)` | 无元素匹配                 | `stream.noneMatch(s -&gt; s.startsWith(&quot;x&quot;))` |
<a id="__codelineno-7-50" name="__codelineno-7-50"></a>| `findFirst()`          | 返回第一个元素             | `stream.findFirst()`                       |
<a id="__codelineno-7-51" name="__codelineno-7-51"></a>| `findAny()`            | 返回任意元素（并行流高效） | `stream.findAny()`                         |
<a id="__codelineno-7-52" name="__codelineno-7-52"></a>
<a id="__codelineno-7-53" name="__codelineno-7-53"></a>##### 聚合计算
<a id="__codelineno-7-54" name="__codelineno-7-54"></a>
<a id="__codelineno-7-55" name="__codelineno-7-55"></a>| 操作                             | 说明           | 示例                             |
<a id="__codelineno-7-56" name="__codelineno-7-56"></a>| :------------------------------- | :------------- | :------------------------------- |
<a id="__codelineno-7-57" name="__codelineno-7-57"></a>| `count()`                        | 元素总数       | `stream.count()`                 |
<a id="__codelineno-7-58" name="__codelineno-7-58"></a>| `max(Comparator)`                | 最大值         | `stream.max(Integer::compare)`   |
<a id="__codelineno-7-59" name="__codelineno-7-59"></a>| `min(Comparator)`                | 最小值         | `stream.min(String::compareTo)`  |
<a id="__codelineno-7-60" name="__codelineno-7-60"></a>| `reduce(BinaryOperator)`         | 自定义聚合     | `stream.reduce((a,b) -&gt; a + b)`  |
<a id="__codelineno-7-61" name="__codelineno-7-61"></a>| `reduce(初始值, BinaryOperator)` | 带初始值的聚合 | `stream.reduce(0, Integer::sum)` |
<a id="__codelineno-7-62" name="__codelineno-7-62"></a>
<a id="__codelineno-7-63" name="__codelineno-7-63"></a>##### 收集结果
<a id="__codelineno-7-64" name="__codelineno-7-64"></a>
<a id="__codelineno-7-65" name="__codelineno-7-65"></a>```java
<a id="__codelineno-7-66" name="__codelineno-7-66"></a>// 转为集合
<a id="__codelineno-7-67" name="__codelineno-7-67"></a>List&lt;String&gt; list = stream.collect(Collectors.toList());
<a id="__codelineno-7-68" name="__codelineno-7-68"></a>Set&lt;String&gt; set = stream.collect(Collectors.toSet());
<a id="__codelineno-7-69" name="__codelineno-7-69"></a>
<a id="__codelineno-7-70" name="__codelineno-7-70"></a>// 转为数组
<a id="__codelineno-7-71" name="__codelineno-7-71"></a>String[] arr = stream.toArray(String[]::new);
<a id="__codelineno-7-72" name="__codelineno-7-72"></a>
<a id="__codelineno-7-73" name="__codelineno-7-73"></a>// 连接字符串
<a id="__codelineno-7-74" name="__codelineno-7-74"></a>String joined = stream.collect(Collectors.joining(&quot;, &quot;));
<a id="__codelineno-7-75" name="__codelineno-7-75"></a>
<a id="__codelineno-7-76" name="__codelineno-7-76"></a>// 分组（返回 Map&lt;K, List&lt;T&gt;&gt;）
<a id="__codelineno-7-77" name="__codelineno-7-77"></a>Map&lt;Integer, List&lt;Person&gt;&gt; byAge = personStream.collect(
<a id="__codelineno-7-78" name="__codelineno-7-78"></a>    Collectors.groupingBy(Person::getAge)
<a id="__codelineno-7-79" name="__codelineno-7-79"></a>);
<a id="__codelineno-7-80" name="__codelineno-7-80"></a>
<a id="__codelineno-7-81" name="__codelineno-7-81"></a>// 分区（按 true/false 分组）
<a id="__codelineno-7-82" name="__codelineno-7-82"></a>Map&lt;Boolean, List&lt;Person&gt;&gt; adults = personStream.collect(
<a id="__codelineno-7-83" name="__codelineno-7-83"></a>    Collectors.partitioningBy(p -&gt; p.getAge() &gt;= 18)
<a id="__codelineno-7-84" name="__codelineno-7-84"></a>);
<a id="__codelineno-7-85" name="__codelineno-7-85"></a>
<a id="__codelineno-7-86" name="__codelineno-7-86"></a>// 汇总统计（数值流）
<a id="__codelineno-7-87" name="__codelineno-7-87"></a>IntSummaryStatistics stats = intStream.summaryStatistics();
<a id="__codelineno-7-88" name="__codelineno-7-88"></a>System.out.println(&quot;平均值: &quot; + stats.getAverage());
</code></pre></div></td></tr></table></div>
<hr />
<p>数值流（避免装箱开销）</p>
<table>
<thead>
<tr>
<th style="text-align: left;">类型</th>
<th style="text-align: left;">创建方法</th>
<th style="text-align: left;">特殊操作</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>IntStream</code></td>
<td style="text-align: left;"><code>IntStream.of(1,2,3)</code> <code>IntStream.range(1,10)</code></td>
<td style="text-align: left;"><code>sum()</code>, <code>average()</code>, <code>summaryStatistics()</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>LongStream</code></td>
<td style="text-align: left;"><code>LongStream.rangeClosed(1,100)</code></td>
<td style="text-align: left;">同 <code>IntStream</code></td>
</tr>
<tr>
<td style="text-align: left;"><code>DoubleStream</code></td>
<td style="text-align: left;"><code>Arrays.stream(new double[]{1.1, 2.2})</code></td>
<td style="text-align: left;">同 <code>IntStream</code></td>
</tr>
</tbody>
</table>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span>
<span class="normal"><a href="#__codelineno-8-3">3</a></span>
<span class="normal"><a href="#__codelineno-8-4">4</a></span>
<span class="normal"><a href="#__codelineno-8-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="c1">// 对象流转数值流</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="n">IntStream</span><span class="w"> </span><span class="n">ages</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">personStream</span><span class="p">.</span><span class="na">mapToInt</span><span class="p">(</span><span class="n">Person</span><span class="p">::</span><span class="n">getAge</span><span class="p">);</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="c1">// 数值流转对象流</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="n">Stream</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">boxed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">intStream</span><span class="p">.</span><span class="na">boxed</span><span class="p">();</span>
</code></pre></div></td></tr></table></div>
<hr />
<h4 id="_11">并行流<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h4>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="c1">// 创建并行流</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">parallelStream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="na">parallelStream</span><span class="p">();</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="c1">// 顺序流转并行流</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="n">stream</span><span class="p">.</span><span class="na">parallel</span><span class="p">().</span><span class="na">filter</span><span class="p">(...)</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="c1">// 注意事项：</span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="c1">// 1. 确保操作线程安全（避免共享可变状态）</span>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="c1">// 2. 数据量大时使用更高效</span>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="c1">// 3. 避免有状态操作（如 sorted()）</span>
</code></pre></div></td></tr></table></div>
<hr />
<h4 id="_12">其他实用技巧<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h4>
<ol>
<li><strong>跳过空值</strong></li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="n">stream</span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">Objects</span><span class="p">::</span><span class="n">nonNull</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<ol>
<li><strong>链式操作组合</strong></li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span>
<span class="normal"><a href="#__codelineno-11-2">2</a></span>
<span class="normal"><a href="#__codelineno-11-3">3</a></span>
<span class="normal"><a href="#__codelineno-11-4">4</a></span>
<span class="normal"><a href="#__codelineno-11-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="n">list</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="w">   </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">length</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="w">   </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">String</span><span class="p">::</span><span class="n">toUpperCase</span><span class="p">)</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">   </span><span class="p">.</span><span class="na">distinct</span><span class="p">()</span>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="w">   </span><span class="p">.</span><span class="na">forEach</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<ol>
<li><strong>短路操作</strong></li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="kt">boolean</span><span class="w"> </span><span class="n">hasJava</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="w">                </span><span class="p">.</span><span class="na">anyMatch</span><span class="p">(</span><span class="s">&quot;Java&quot;</span><span class="p">::</span><span class="n">equals</span><span class="p">);</span><span class="w"> </span><span class="c1">// 找到即终止</span>
</code></pre></div></td></tr></table></div>
<ol>
<li><strong>自定义收集器</strong></li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span>
<span class="normal"><a href="#__codelineno-13-2">2</a></span>
<span class="normal"><a href="#__codelineno-13-3">3</a></span>
<span class="normal"><a href="#__codelineno-13-4">4</a></span>
<span class="normal"><a href="#__codelineno-13-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="n">Collector</span><span class="o">&lt;</span><span class="n">Person</span><span class="p">,</span><span class="w"> </span><span class="o">?</span><span class="p">,</span><span class="w"> </span><span class="n">TreeSet</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">toTreeSet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="w">    </span><span class="n">Collector</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">TreeSet</span><span class="p">::</span><span class="k">new</span><span class="p">,</span><span class="w"> </span><span class="n">TreeSet</span><span class="p">::</span><span class="n">add</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="w"> </span><span class="n">right</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="w">        </span><span class="n">left</span><span class="p">.</span><span class="na">addAll</span><span class="p">(</span><span class="n">right</span><span class="p">);</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">left</span><span class="p">;</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="w">    </span><span class="p">});</span>
</code></pre></div></td></tr></table></div>
<hr />
<h4 id="_13">注意事项<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<ol>
<li><strong>流不可复用</strong>：终端操作后流即关闭，再次使用会抛 <code>IllegalStateException</code>。</li>
<li><strong>惰性求值</strong>：中间操作不立即执行，直到调用终端操作。</li>
<li><strong>避免副作用</strong>：不要在 <code>map/filter</code> 中修改外部状态。</li>
<li><strong>并行流谨慎使用</strong>：确保操作线程安全且数据量足够大。</li>
</ol>
<p>示例代码</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">  1</a></span>
<span class="normal"><a href="#__codelineno-14-2">  2</a></span>
<span class="normal"><a href="#__codelineno-14-3">  3</a></span>
<span class="normal"><a href="#__codelineno-14-4">  4</a></span>
<span class="normal"><a href="#__codelineno-14-5">  5</a></span>
<span class="normal"><a href="#__codelineno-14-6">  6</a></span>
<span class="normal"><a href="#__codelineno-14-7">  7</a></span>
<span class="normal"><a href="#__codelineno-14-8">  8</a></span>
<span class="normal"><a href="#__codelineno-14-9">  9</a></span>
<span class="normal"><a href="#__codelineno-14-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-14-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-14-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-14-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-14-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-14-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-14-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-14-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-14-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-14-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-14-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-14-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-14-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-14-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-14-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-14-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-14-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-14-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-14-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-14-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-14-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-14-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-14-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-14-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-14-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-14-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-14-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-14-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-14-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-14-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-14-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-14-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-14-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-14-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-14-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-14-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-14-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-14-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-14-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-14-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-14-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-14-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-14-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-14-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-14-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-14-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-14-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-14-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-14-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-14-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-14-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-14-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-14-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-14-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-14-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-14-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-14-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-14-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-14-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-14-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-14-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-14-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-14-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-14-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-14-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-14-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-14-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-14-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-14-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-14-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-14-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-14-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-14-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-14-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-14-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-14-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-14-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-14-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-14-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-14-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-14-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-14-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-14-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-14-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-14-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-14-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-14-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-14-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-14-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-14-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-14-100">100</a></span>
<span class="normal"><a href="#__codelineno-14-101">101</a></span>
<span class="normal"><a href="#__codelineno-14-102">102</a></span>
<span class="normal"><a href="#__codelineno-14-103">103</a></span>
<span class="normal"><a href="#__codelineno-14-104">104</a></span>
<span class="normal"><a href="#__codelineno-14-105">105</a></span>
<span class="normal"><a href="#__codelineno-14-106">106</a></span>
<span class="normal"><a href="#__codelineno-14-107">107</a></span>
<span class="normal"><a href="#__codelineno-14-108">108</a></span>
<span class="normal"><a href="#__codelineno-14-109">109</a></span>
<span class="normal"><a href="#__codelineno-14-110">110</a></span>
<span class="normal"><a href="#__codelineno-14-111">111</a></span>
<span class="normal"><a href="#__codelineno-14-112">112</a></span>
<span class="normal"><a href="#__codelineno-14-113">113</a></span>
<span class="normal"><a href="#__codelineno-14-114">114</a></span>
<span class="normal"><a href="#__codelineno-14-115">115</a></span>
<span class="normal"><a href="#__codelineno-14-116">116</a></span>
<span class="normal"><a href="#__codelineno-14-117">117</a></span>
<span class="normal"><a href="#__codelineno-14-118">118</a></span>
<span class="normal"><a href="#__codelineno-14-119">119</a></span>
<span class="normal"><a href="#__codelineno-14-120">120</a></span>
<span class="normal"><a href="#__codelineno-14-121">121</a></span>
<span class="normal"><a href="#__codelineno-14-122">122</a></span>
<span class="normal"><a href="#__codelineno-14-123">123</a></span>
<span class="normal"><a href="#__codelineno-14-124">124</a></span>
<span class="normal"><a href="#__codelineno-14-125">125</a></span>
<span class="normal"><a href="#__codelineno-14-126">126</a></span>
<span class="normal"><a href="#__codelineno-14-127">127</a></span>
<span class="normal"><a href="#__codelineno-14-128">128</a></span>
<span class="normal"><a href="#__codelineno-14-129">129</a></span>
<span class="normal"><a href="#__codelineno-14-130">130</a></span>
<span class="normal"><a href="#__codelineno-14-131">131</a></span>
<span class="normal"><a href="#__codelineno-14-132">132</a></span>
<span class="normal"><a href="#__codelineno-14-133">133</a></span>
<span class="normal"><a href="#__codelineno-14-134">134</a></span>
<span class="normal"><a href="#__codelineno-14-135">135</a></span>
<span class="normal"><a href="#__codelineno-14-136">136</a></span>
<span class="normal"><a href="#__codelineno-14-137">137</a></span>
<span class="normal"><a href="#__codelineno-14-138">138</a></span>
<span class="normal"><a href="#__codelineno-14-139">139</a></span>
<span class="normal"><a href="#__codelineno-14-140">140</a></span>
<span class="normal"><a href="#__codelineno-14-141">141</a></span>
<span class="normal"><a href="#__codelineno-14-142">142</a></span>
<span class="normal"><a href="#__codelineno-14-143">143</a></span>
<span class="normal"><a href="#__codelineno-14-144">144</a></span>
<span class="normal"><a href="#__codelineno-14-145">145</a></span>
<span class="normal"><a href="#__codelineno-14-146">146</a></span>
<span class="normal"><a href="#__codelineno-14-147">147</a></span>
<span class="normal"><a href="#__codelineno-14-148">148</a></span>
<span class="normal"><a href="#__codelineno-14-149">149</a></span>
<span class="normal"><a href="#__codelineno-14-150">150</a></span>
<span class="normal"><a href="#__codelineno-14-151">151</a></span>
<span class="normal"><a href="#__codelineno-14-152">152</a></span>
<span class="normal"><a href="#__codelineno-14-153">153</a></span>
<span class="normal"><a href="#__codelineno-14-154">154</a></span>
<span class="normal"><a href="#__codelineno-14-155">155</a></span>
<span class="normal"><a href="#__codelineno-14-156">156</a></span>
<span class="normal"><a href="#__codelineno-14-157">157</a></span>
<span class="normal"><a href="#__codelineno-14-158">158</a></span>
<span class="normal"><a href="#__codelineno-14-159">159</a></span>
<span class="normal"><a href="#__codelineno-14-160">160</a></span>
<span class="normal"><a href="#__codelineno-14-161">161</a></span>
<span class="normal"><a href="#__codelineno-14-162">162</a></span>
<span class="normal"><a href="#__codelineno-14-163">163</a></span>
<span class="normal"><a href="#__codelineno-14-164">164</a></span>
<span class="normal"><a href="#__codelineno-14-165">165</a></span>
<span class="normal"><a href="#__codelineno-14-166">166</a></span>
<span class="normal"><a href="#__codelineno-14-167">167</a></span>
<span class="normal"><a href="#__codelineno-14-168">168</a></span>
<span class="normal"><a href="#__codelineno-14-169">169</a></span>
<span class="normal"><a href="#__codelineno-14-170">170</a></span>
<span class="normal"><a href="#__codelineno-14-171">171</a></span>
<span class="normal"><a href="#__codelineno-14-172">172</a></span>
<span class="normal"><a href="#__codelineno-14-173">173</a></span>
<span class="normal"><a href="#__codelineno-14-174">174</a></span>
<span class="normal"><a href="#__codelineno-14-175">175</a></span>
<span class="normal"><a href="#__codelineno-14-176">176</a></span>
<span class="normal"><a href="#__codelineno-14-177">177</a></span>
<span class="normal"><a href="#__codelineno-14-178">178</a></span>
<span class="normal"><a href="#__codelineno-14-179">179</a></span>
<span class="normal"><a href="#__codelineno-14-180">180</a></span>
<span class="normal"><a href="#__codelineno-14-181">181</a></span>
<span class="normal"><a href="#__codelineno-14-182">182</a></span>
<span class="normal"><a href="#__codelineno-14-183">183</a></span>
<span class="normal"><a href="#__codelineno-14-184">184</a></span>
<span class="normal"><a href="#__codelineno-14-185">185</a></span>
<span class="normal"><a href="#__codelineno-14-186">186</a></span>
<span class="normal"><a href="#__codelineno-14-187">187</a></span>
<span class="normal"><a href="#__codelineno-14-188">188</a></span>
<span class="normal"><a href="#__codelineno-14-189">189</a></span>
<span class="normal"><a href="#__codelineno-14-190">190</a></span>
<span class="normal"><a href="#__codelineno-14-191">191</a></span>
<span class="normal"><a href="#__codelineno-14-192">192</a></span>
<span class="normal"><a href="#__codelineno-14-193">193</a></span>
<span class="normal"><a href="#__codelineno-14-194">194</a></span>
<span class="normal"><a href="#__codelineno-14-195">195</a></span>
<span class="normal"><a href="#__codelineno-14-196">196</a></span>
<span class="normal"><a href="#__codelineno-14-197">197</a></span>
<span class="normal"><a href="#__codelineno-14-198">198</a></span>
<span class="normal"><a href="#__codelineno-14-199">199</a></span>
<span class="normal"><a href="#__codelineno-14-200">200</a></span>
<span class="normal"><a href="#__codelineno-14-201">201</a></span>
<span class="normal"><a href="#__codelineno-14-202">202</a></span>
<span class="normal"><a href="#__codelineno-14-203">203</a></span>
<span class="normal"><a href="#__codelineno-14-204">204</a></span>
<span class="normal"><a href="#__codelineno-14-205">205</a></span>
<span class="normal"><a href="#__codelineno-14-206">206</a></span>
<span class="normal"><a href="#__codelineno-14-207">207</a></span>
<span class="normal"><a href="#__codelineno-14-208">208</a></span>
<span class="normal"><a href="#__codelineno-14-209">209</a></span>
<span class="normal"><a href="#__codelineno-14-210">210</a></span>
<span class="normal"><a href="#__codelineno-14-211">211</a></span>
<span class="normal"><a href="#__codelineno-14-212">212</a></span>
<span class="normal"><a href="#__codelineno-14-213">213</a></span>
<span class="normal"><a href="#__codelineno-14-214">214</a></span>
<span class="normal"><a href="#__codelineno-14-215">215</a></span>
<span class="normal"><a href="#__codelineno-14-216">216</a></span>
<span class="normal"><a href="#__codelineno-14-217">217</a></span>
<span class="normal"><a href="#__codelineno-14-218">218</a></span>
<span class="normal"><a href="#__codelineno-14-219">219</a></span>
<span class="normal"><a href="#__codelineno-14-220">220</a></span>
<span class="normal"><a href="#__codelineno-14-221">221</a></span>
<span class="normal"><a href="#__codelineno-14-222">222</a></span>
<span class="normal"><a href="#__codelineno-14-223">223</a></span>
<span class="normal"><a href="#__codelineno-14-224">224</a></span>
<span class="normal"><a href="#__codelineno-14-225">225</a></span>
<span class="normal"><a href="#__codelineno-14-226">226</a></span>
<span class="normal"><a href="#__codelineno-14-227">227</a></span>
<span class="normal"><a href="#__codelineno-14-228">228</a></span>
<span class="normal"><a href="#__codelineno-14-229">229</a></span>
<span class="normal"><a href="#__codelineno-14-230">230</a></span>
<span class="normal"><a href="#__codelineno-14-231">231</a></span>
<span class="normal"><a href="#__codelineno-14-232">232</a></span>
<span class="normal"><a href="#__codelineno-14-233">233</a></span>
<span class="normal"><a href="#__codelineno-14-234">234</a></span>
<span class="normal"><a href="#__codelineno-14-235">235</a></span>
<span class="normal"><a href="#__codelineno-14-236">236</a></span>
<span class="normal"><a href="#__codelineno-14-237">237</a></span>
<span class="normal"><a href="#__codelineno-14-238">238</a></span>
<span class="normal"><a href="#__codelineno-14-239">239</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.itheima.demo3stream</span><span class="p">;</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.ArrayList</span><span class="p">;</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.stream.Collectors</span><span class="p">;</span>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">StreamDemo1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="w">        </span><span class="c1">// 目标：认识Stream流，掌握其基本使用步骤。体会它的优势和特点。</span>
<a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<a id="__codelineno-14-11" name="__codelineno-14-11"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;张无忌&quot;</span><span class="p">);</span>
<a id="__codelineno-14-12" name="__codelineno-14-12"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;周芷若&quot;</span><span class="p">);</span>
<a id="__codelineno-14-13" name="__codelineno-14-13"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;赵敏&quot;</span><span class="p">);</span>
<a id="__codelineno-14-14" name="__codelineno-14-14"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;张强&quot;</span><span class="p">);</span>
<a id="__codelineno-14-15" name="__codelineno-14-15"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;张三丰&quot;</span><span class="p">);</span>
<a id="__codelineno-14-16" name="__codelineno-14-16"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;张翠山&quot;</span><span class="p">);</span>
<a id="__codelineno-14-17" name="__codelineno-14-17"></a>
<a id="__codelineno-14-18" name="__codelineno-14-18"></a><span class="w">        </span><span class="c1">// 1、先用传统方案：找出姓张的人，名字为3个字的，存入到一个新集合中去。</span>
<a id="__codelineno-14-19" name="__codelineno-14-19"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">newList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<a id="__codelineno-14-20" name="__codelineno-14-20"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">list</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-21" name="__codelineno-14-21"></a><span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">name</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;张&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">name</span><span class="p">.</span><span class="na">length</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="p">){</span>
<a id="__codelineno-14-22" name="__codelineno-14-22"></a><span class="w">                </span><span class="n">newList</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
<a id="__codelineno-14-23" name="__codelineno-14-23"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-14-24" name="__codelineno-14-24"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-14-25" name="__codelineno-14-25"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">newList</span><span class="p">);</span>
<a id="__codelineno-14-26" name="__codelineno-14-26"></a>
<a id="__codelineno-14-27" name="__codelineno-14-27"></a><span class="w">        </span><span class="c1">// 2、使用Stream流解决</span>
<a id="__codelineno-14-28" name="__codelineno-14-28"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">newList2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">filter</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;张&quot;</span><span class="p">)).</span><span class="na">filter</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">length</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="p">).</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">());</span>
<a id="__codelineno-14-29" name="__codelineno-14-29"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">newList2</span><span class="p">);</span>
<a id="__codelineno-14-30" name="__codelineno-14-30"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-14-31" name="__codelineno-14-31"></a><span class="p">}</span>
<a id="__codelineno-14-32" name="__codelineno-14-32"></a>
<a id="__codelineno-14-33" name="__codelineno-14-33"></a>
<a id="__codelineno-14-34" name="__codelineno-14-34"></a><span class="o">=======================================================</span>
<a id="__codelineno-14-35" name="__codelineno-14-35"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.itheima.demo3stream</span><span class="p">;</span>
<a id="__codelineno-14-36" name="__codelineno-14-36"></a>
<a id="__codelineno-14-37" name="__codelineno-14-37"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.*</span><span class="p">;</span>
<a id="__codelineno-14-38" name="__codelineno-14-38"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.stream.Stream</span><span class="p">;</span>
<a id="__codelineno-14-39" name="__codelineno-14-39"></a>
<a id="__codelineno-14-40" name="__codelineno-14-40"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">StreamDemo2</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-41" name="__codelineno-14-41"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-42" name="__codelineno-14-42"></a><span class="w">        </span><span class="c1">// 目标：获取Stream流的方式。</span>
<a id="__codelineno-14-43" name="__codelineno-14-43"></a><span class="w">        </span><span class="c1">// 1、获取集合的Stream流：调用集合提供的stream()方法</span>
<a id="__codelineno-14-44" name="__codelineno-14-44"></a><span class="w">        </span><span class="n">Collection</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<a id="__codelineno-14-45" name="__codelineno-14-45"></a><span class="w">        </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="na">stream</span><span class="p">();</span>
<a id="__codelineno-14-46" name="__codelineno-14-46"></a>
<a id="__codelineno-14-47" name="__codelineno-14-47"></a><span class="w">        </span><span class="c1">// 2、Map集合，怎么拿Stream流。</span>
<a id="__codelineno-14-48" name="__codelineno-14-48"></a><span class="w">        </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">HashMap</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<a id="__codelineno-14-49" name="__codelineno-14-49"></a><span class="w">        </span><span class="c1">// 获取键流</span>
<a id="__codelineno-14-50" name="__codelineno-14-50"></a><span class="w">        </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">map</span><span class="p">.</span><span class="na">keySet</span><span class="p">().</span><span class="na">stream</span><span class="p">();</span>
<a id="__codelineno-14-51" name="__codelineno-14-51"></a><span class="w">        </span><span class="c1">// 获取值流</span>
<a id="__codelineno-14-52" name="__codelineno-14-52"></a><span class="w">        </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">map</span><span class="p">.</span><span class="na">values</span><span class="p">().</span><span class="na">stream</span><span class="p">();</span>
<a id="__codelineno-14-53" name="__codelineno-14-53"></a><span class="w">        </span><span class="c1">// 获取键值对流</span>
<a id="__codelineno-14-54" name="__codelineno-14-54"></a><span class="w">        </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">Map</span><span class="p">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Integer</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">s4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">map</span><span class="p">.</span><span class="na">entrySet</span><span class="p">().</span><span class="na">stream</span><span class="p">();</span>
<a id="__codelineno-14-55" name="__codelineno-14-55"></a>
<a id="__codelineno-14-56" name="__codelineno-14-56"></a><span class="w">        </span><span class="c1">// 3、获取数组的流。</span>
<a id="__codelineno-14-57" name="__codelineno-14-57"></a><span class="w">        </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;张三丰&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;张无忌&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;张翠山&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;张良&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;张学友&quot;</span><span class="p">};</span>
<a id="__codelineno-14-58" name="__codelineno-14-58"></a><span class="w">        </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">stream</span><span class="p">(</span><span class="n">names</span><span class="p">);</span>
<a id="__codelineno-14-59" name="__codelineno-14-59"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">s5</span><span class="p">.</span><span class="na">count</span><span class="p">());</span><span class="w"> </span><span class="c1">// 5</span>
<a id="__codelineno-14-60" name="__codelineno-14-60"></a><span class="w">        </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Stream</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">names</span><span class="p">);</span>
<a id="__codelineno-14-61" name="__codelineno-14-61"></a><span class="w">        </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s7</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Stream</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;张三丰&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;张无忌&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;张翠山&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;张良&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;张学友&quot;</span><span class="p">);</span>
<a id="__codelineno-14-62" name="__codelineno-14-62"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-14-63" name="__codelineno-14-63"></a><span class="p">}</span>
<a id="__codelineno-14-64" name="__codelineno-14-64"></a>
<a id="__codelineno-14-65" name="__codelineno-14-65"></a><span class="o">=================================================================</span>
<a id="__codelineno-14-66" name="__codelineno-14-66"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.itheima.demo3stream</span><span class="p">;</span>
<a id="__codelineno-14-67" name="__codelineno-14-67"></a>
<a id="__codelineno-14-68" name="__codelineno-14-68"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.ArrayList</span><span class="p">;</span>
<a id="__codelineno-14-69" name="__codelineno-14-69"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.List</span><span class="p">;</span>
<a id="__codelineno-14-70" name="__codelineno-14-70"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.stream.Stream</span><span class="p">;</span>
<a id="__codelineno-14-71" name="__codelineno-14-71"></a>
<a id="__codelineno-14-72" name="__codelineno-14-72"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">StreamDemo3</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-73" name="__codelineno-14-73"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-74" name="__codelineno-14-74"></a><span class="w">        </span><span class="c1">// 目标：掌握Stream提供的常用的中间方法，对流上的数据进行处理（返回新流：支持链式编程）</span>
<a id="__codelineno-14-75" name="__codelineno-14-75"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<a id="__codelineno-14-76" name="__codelineno-14-76"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;张无忌&quot;</span><span class="p">);</span>
<a id="__codelineno-14-77" name="__codelineno-14-77"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;周芷若&quot;</span><span class="p">);</span>
<a id="__codelineno-14-78" name="__codelineno-14-78"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;赵敏&quot;</span><span class="p">);</span>
<a id="__codelineno-14-79" name="__codelineno-14-79"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;张强&quot;</span><span class="p">);</span>
<a id="__codelineno-14-80" name="__codelineno-14-80"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;张三丰&quot;</span><span class="p">);</span>
<a id="__codelineno-14-81" name="__codelineno-14-81"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;张翠山&quot;</span><span class="p">);</span>
<a id="__codelineno-14-82" name="__codelineno-14-82"></a>
<a id="__codelineno-14-83" name="__codelineno-14-83"></a><span class="w">        </span><span class="c1">// 1、过滤方法</span>
<a id="__codelineno-14-84" name="__codelineno-14-84"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">filter</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;张&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w">  </span><span class="n">s</span><span class="p">.</span><span class="na">length</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">3</span><span class="p">).</span><span class="na">forEach</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span>
<a id="__codelineno-14-85" name="__codelineno-14-85"></a>
<a id="__codelineno-14-86" name="__codelineno-14-86"></a><span class="w">        </span><span class="c1">// 2、排序方法。</span>
<a id="__codelineno-14-87" name="__codelineno-14-87"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">scores</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<a id="__codelineno-14-88" name="__codelineno-14-88"></a><span class="w">        </span><span class="n">scores</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="mf">88.6</span><span class="p">);</span>
<a id="__codelineno-14-89" name="__codelineno-14-89"></a><span class="w">        </span><span class="n">scores</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="mf">66.6</span><span class="p">);</span>
<a id="__codelineno-14-90" name="__codelineno-14-90"></a><span class="w">        </span><span class="n">scores</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="mf">66.6</span><span class="p">);</span>
<a id="__codelineno-14-91" name="__codelineno-14-91"></a><span class="w">        </span><span class="n">scores</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="mf">77.6</span><span class="p">);</span>
<a id="__codelineno-14-92" name="__codelineno-14-92"></a><span class="w">        </span><span class="n">scores</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="mf">77.6</span><span class="p">);</span>
<a id="__codelineno-14-93" name="__codelineno-14-93"></a><span class="w">        </span><span class="n">scores</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="mf">99.6</span><span class="p">);</span>
<a id="__codelineno-14-94" name="__codelineno-14-94"></a><span class="w">        </span><span class="n">scores</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">sorted</span><span class="p">().</span><span class="na">forEach</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span><span class="w"> </span><span class="c1">// 默认是升序。</span>
<a id="__codelineno-14-95" name="__codelineno-14-95"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;--------------------------------------------------&quot;</span><span class="p">);</span>
<a id="__codelineno-14-96" name="__codelineno-14-96"></a>
<a id="__codelineno-14-97" name="__codelineno-14-97"></a><span class="w">        </span><span class="n">scores</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">sorted</span><span class="p">((</span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="n">s2</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Double</span><span class="p">.</span><span class="na">compare</span><span class="p">(</span><span class="n">s2</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p">)).</span><span class="na">forEach</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span><span class="w"> </span><span class="c1">// 降序</span>
<a id="__codelineno-14-98" name="__codelineno-14-98"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;--------------------------------------------------&quot;</span><span class="p">);</span>
<a id="__codelineno-14-99" name="__codelineno-14-99"></a>
<a id="__codelineno-14-100" name="__codelineno-14-100"></a><span class="w">        </span><span class="n">scores</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">sorted</span><span class="p">((</span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="n">s2</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Double</span><span class="p">.</span><span class="na">compare</span><span class="p">(</span><span class="n">s2</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p">)).</span><span class="na">limit</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="na">forEach</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span><span class="w"> </span><span class="c1">// 只要前2名</span>
<a id="__codelineno-14-101" name="__codelineno-14-101"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;--------------------------------------------------&quot;</span><span class="p">);</span>
<a id="__codelineno-14-102" name="__codelineno-14-102"></a>
<a id="__codelineno-14-103" name="__codelineno-14-103"></a><span class="w">        </span><span class="n">scores</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">sorted</span><span class="p">((</span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="n">s2</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Double</span><span class="p">.</span><span class="na">compare</span><span class="p">(</span><span class="n">s2</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p">)).</span><span class="na">skip</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="na">forEach</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span><span class="w"> </span><span class="c1">// 跳过前2名</span>
<a id="__codelineno-14-104" name="__codelineno-14-104"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;--------------------------------------------------&quot;</span><span class="p">);</span>
<a id="__codelineno-14-105" name="__codelineno-14-105"></a>
<a id="__codelineno-14-106" name="__codelineno-14-106"></a><span class="w">        </span><span class="c1">// 如果希望自定义对象能够去重复，重写对象的hashCode和equals方法，才可以去重复！</span>
<a id="__codelineno-14-107" name="__codelineno-14-107"></a><span class="w">        </span><span class="n">scores</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">sorted</span><span class="p">((</span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="n">s2</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Double</span><span class="p">.</span><span class="na">compare</span><span class="p">(</span><span class="n">s2</span><span class="p">,</span><span class="w"> </span><span class="n">s1</span><span class="p">)).</span><span class="na">distinct</span><span class="p">().</span><span class="na">forEach</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span><span class="w"> </span><span class="c1">// 去重复</span>
<a id="__codelineno-14-108" name="__codelineno-14-108"></a>
<a id="__codelineno-14-109" name="__codelineno-14-109"></a><span class="w">        </span><span class="c1">// 映射/加工方法： 把流上原来的数据拿出来变成新数据又放到流上去。</span>
<a id="__codelineno-14-110" name="__codelineno-14-110"></a><span class="w">        </span><span class="n">scores</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">map</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;加10分后：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">10</span><span class="p">)).</span><span class="na">forEach</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span>
<a id="__codelineno-14-111" name="__codelineno-14-111"></a>
<a id="__codelineno-14-112" name="__codelineno-14-112"></a><span class="w">        </span><span class="c1">// 合并流：</span>
<a id="__codelineno-14-113" name="__codelineno-14-113"></a><span class="w">        </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Stream</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;张三丰&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;张无忌&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;张翠山&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;张良&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;张学友&quot;</span><span class="p">);</span>
<a id="__codelineno-14-114" name="__codelineno-14-114"></a><span class="w">        </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Stream</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w"> </span><span class="mi">33</span><span class="p">,</span><span class="w"> </span><span class="mi">44</span><span class="p">);</span>
<a id="__codelineno-14-115" name="__codelineno-14-115"></a><span class="w">        </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s3</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">Stream</span><span class="p">.</span><span class="na">concat</span><span class="p">(</span><span class="n">s1</span><span class="p">,</span><span class="w"> </span><span class="n">s2</span><span class="p">);</span>
<a id="__codelineno-14-116" name="__codelineno-14-116"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">s3</span><span class="p">.</span><span class="na">count</span><span class="p">());</span>
<a id="__codelineno-14-117" name="__codelineno-14-117"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-14-118" name="__codelineno-14-118"></a><span class="p">}</span>
<a id="__codelineno-14-119" name="__codelineno-14-119"></a>
<a id="__codelineno-14-120" name="__codelineno-14-120"></a><span class="o">================================================================</span>
<a id="__codelineno-14-121" name="__codelineno-14-121"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.itheima.demo3stream</span><span class="p">;</span>
<a id="__codelineno-14-122" name="__codelineno-14-122"></a>
<a id="__codelineno-14-123" name="__codelineno-14-123"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.*</span><span class="p">;</span>
<a id="__codelineno-14-124" name="__codelineno-14-124"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.function.Function</span><span class="p">;</span>
<a id="__codelineno-14-125" name="__codelineno-14-125"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.stream.Collectors</span><span class="p">;</span>
<a id="__codelineno-14-126" name="__codelineno-14-126"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.util.stream.Stream</span><span class="p">;</span>
<a id="__codelineno-14-127" name="__codelineno-14-127"></a>
<a id="__codelineno-14-128" name="__codelineno-14-128"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">StreamDemo4</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-129" name="__codelineno-14-129"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-130" name="__codelineno-14-130"></a><span class="w">        </span><span class="c1">// 目标：掌握Stream流的统计，收集操作（终结方法）</span>
<a id="__codelineno-14-131" name="__codelineno-14-131"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Teacher</span><span class="o">&gt;</span><span class="w"> </span><span class="n">teachers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<a id="__codelineno-14-132" name="__codelineno-14-132"></a><span class="w">        </span><span class="n">teachers</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Teacher</span><span class="p">(</span><span class="s">&quot;张三&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w"> </span><span class="mi">5000</span><span class="p">));</span>
<a id="__codelineno-14-133" name="__codelineno-14-133"></a><span class="w">        </span><span class="n">teachers</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Teacher</span><span class="p">(</span><span class="s">&quot;金毛狮王&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">54</span><span class="p">,</span><span class="w"> </span><span class="mi">16000</span><span class="p">));</span>
<a id="__codelineno-14-134" name="__codelineno-14-134"></a><span class="w">        </span><span class="n">teachers</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Teacher</span><span class="p">(</span><span class="s">&quot;李四&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w"> </span><span class="mi">6000</span><span class="p">));</span>
<a id="__codelineno-14-135" name="__codelineno-14-135"></a><span class="w">        </span><span class="n">teachers</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Teacher</span><span class="p">(</span><span class="s">&quot;王五&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w"> </span><span class="mi">7000</span><span class="p">));</span>
<a id="__codelineno-14-136" name="__codelineno-14-136"></a><span class="w">        </span><span class="n">teachers</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Teacher</span><span class="p">(</span><span class="s">&quot;白眉鹰王&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">66</span><span class="p">,</span><span class="w"> </span><span class="mi">108000</span><span class="p">));</span>
<a id="__codelineno-14-137" name="__codelineno-14-137"></a><span class="w">        </span><span class="n">teachers</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Teacher</span><span class="p">(</span><span class="s">&quot;陈昆&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w"> </span><span class="mi">48000</span><span class="p">));</span>
<a id="__codelineno-14-138" name="__codelineno-14-138"></a>
<a id="__codelineno-14-139" name="__codelineno-14-139"></a><span class="w">        </span><span class="n">teachers</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">filter</span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="na">getSalary</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">15000</span><span class="p">).</span><span class="na">forEach</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">::</span><span class="n">println</span><span class="p">);</span>
<a id="__codelineno-14-140" name="__codelineno-14-140"></a>
<a id="__codelineno-14-141" name="__codelineno-14-141"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;--------------------------------------------------&quot;</span><span class="p">);</span>
<a id="__codelineno-14-142" name="__codelineno-14-142"></a>
<a id="__codelineno-14-143" name="__codelineno-14-143"></a><span class="w">        </span><span class="kt">long</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">teachers</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">filter</span><span class="p">(</span><span class="n">t</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">t</span><span class="p">.</span><span class="na">getSalary</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">15000</span><span class="p">).</span><span class="na">count</span><span class="p">();</span>
<a id="__codelineno-14-144" name="__codelineno-14-144"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">count</span><span class="p">);</span>
<a id="__codelineno-14-145" name="__codelineno-14-145"></a>
<a id="__codelineno-14-146" name="__codelineno-14-146"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;--------------------------------------------------&quot;</span><span class="p">);</span>
<a id="__codelineno-14-147" name="__codelineno-14-147"></a>
<a id="__codelineno-14-148" name="__codelineno-14-148"></a><span class="w">        </span><span class="c1">// 获取薪水最高的老师对象</span>
<a id="__codelineno-14-149" name="__codelineno-14-149"></a><span class="w">        </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Teacher</span><span class="o">&gt;</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">teachers</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">max</span><span class="p">((</span><span class="n">t1</span><span class="p">,</span><span class="w"> </span><span class="n">t2</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Double</span><span class="p">.</span><span class="na">compare</span><span class="p">(</span><span class="n">t1</span><span class="p">.</span><span class="na">getSalary</span><span class="p">(),</span><span class="w"> </span><span class="n">t2</span><span class="p">.</span><span class="na">getSalary</span><span class="p">()));</span>
<a id="__codelineno-14-150" name="__codelineno-14-150"></a><span class="w">        </span><span class="n">Teacher</span><span class="w"> </span><span class="n">maxTeacher</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">max</span><span class="p">.</span><span class="na">get</span><span class="p">();</span><span class="w"> </span><span class="c1">// 获取Optional对象中的元素</span>
<a id="__codelineno-14-151" name="__codelineno-14-151"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">maxTeacher</span><span class="p">);</span>
<a id="__codelineno-14-152" name="__codelineno-14-152"></a>
<a id="__codelineno-14-153" name="__codelineno-14-153"></a><span class="w">        </span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">Teacher</span><span class="o">&gt;</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">teachers</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">min</span><span class="p">((</span><span class="n">t1</span><span class="p">,</span><span class="w"> </span><span class="n">t2</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">Double</span><span class="p">.</span><span class="na">compare</span><span class="p">(</span><span class="n">t1</span><span class="p">.</span><span class="na">getSalary</span><span class="p">(),</span><span class="w"> </span><span class="n">t2</span><span class="p">.</span><span class="na">getSalary</span><span class="p">()));</span>
<a id="__codelineno-14-154" name="__codelineno-14-154"></a><span class="w">        </span><span class="n">Teacher</span><span class="w"> </span><span class="n">minTeacher</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">min</span><span class="p">.</span><span class="na">get</span><span class="p">();</span><span class="w"> </span><span class="c1">// 获取Optional对象中的元素</span>
<a id="__codelineno-14-155" name="__codelineno-14-155"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">minTeacher</span><span class="p">);</span>
<a id="__codelineno-14-156" name="__codelineno-14-156"></a>
<a id="__codelineno-14-157" name="__codelineno-14-157"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;---------------------------------------------------------&quot;</span><span class="p">);</span>
<a id="__codelineno-14-158" name="__codelineno-14-158"></a>
<a id="__codelineno-14-159" name="__codelineno-14-159"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<a id="__codelineno-14-160" name="__codelineno-14-160"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;张无忌&quot;</span><span class="p">);</span>
<a id="__codelineno-14-161" name="__codelineno-14-161"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;周芷若&quot;</span><span class="p">);</span>
<a id="__codelineno-14-162" name="__codelineno-14-162"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;赵敏&quot;</span><span class="p">);</span>
<a id="__codelineno-14-163" name="__codelineno-14-163"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;张强&quot;</span><span class="p">);</span>
<a id="__codelineno-14-164" name="__codelineno-14-164"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;张三丰&quot;</span><span class="p">);</span>
<a id="__codelineno-14-165" name="__codelineno-14-165"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;张三丰&quot;</span><span class="p">);</span>
<a id="__codelineno-14-166" name="__codelineno-14-166"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;张翠山&quot;</span><span class="p">);</span>
<a id="__codelineno-14-167" name="__codelineno-14-167"></a>
<a id="__codelineno-14-168" name="__codelineno-14-168"></a><span class="w">        </span><span class="c1">// 流只能收集一次</span>
<a id="__codelineno-14-169" name="__codelineno-14-169"></a>
<a id="__codelineno-14-170" name="__codelineno-14-170"></a><span class="w">        </span><span class="c1">// 收集到集合或者数组中去。</span>
<a id="__codelineno-14-171" name="__codelineno-14-171"></a><span class="w">        </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">filter</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;张&quot;</span><span class="p">));</span>
<a id="__codelineno-14-172" name="__codelineno-14-172"></a><span class="w">        </span><span class="c1">// 收集到List集合</span>
<a id="__codelineno-14-173" name="__codelineno-14-173"></a><span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s1</span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">());</span>
<a id="__codelineno-14-174" name="__codelineno-14-174"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">list1</span><span class="p">);</span>
<a id="__codelineno-14-175" name="__codelineno-14-175"></a>
<a id="__codelineno-14-176" name="__codelineno-14-176"></a><span class="c1">//        Set&lt;String&gt; set2 = new HashSet&lt;&gt;();</span>
<a id="__codelineno-14-177" name="__codelineno-14-177"></a><span class="c1">//        set2.addAll(list1);</span>
<a id="__codelineno-14-178" name="__codelineno-14-178"></a>
<a id="__codelineno-14-179" name="__codelineno-14-179"></a><span class="w">        </span><span class="c1">// 收集到Set集合</span>
<a id="__codelineno-14-180" name="__codelineno-14-180"></a><span class="w">        </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">filter</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;张&quot;</span><span class="p">));</span>
<a id="__codelineno-14-181" name="__codelineno-14-181"></a><span class="w">        </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s2</span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toSet</span><span class="p">());</span>
<a id="__codelineno-14-182" name="__codelineno-14-182"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">set</span><span class="p">);</span>
<a id="__codelineno-14-183" name="__codelineno-14-183"></a>
<a id="__codelineno-14-184" name="__codelineno-14-184"></a><span class="w">        </span><span class="c1">// 收集到数组中去</span>
<a id="__codelineno-14-185" name="__codelineno-14-185"></a><span class="w">        </span><span class="n">Stream</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">s3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">filter</span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;张&quot;</span><span class="p">));</span>
<a id="__codelineno-14-186" name="__codelineno-14-186"></a><span class="w">        </span><span class="n">Object</span><span class="o">[]</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s3</span><span class="p">.</span><span class="na">toArray</span><span class="p">();</span>
<a id="__codelineno-14-187" name="__codelineno-14-187"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;数组：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">toString</span><span class="p">(</span><span class="n">array</span><span class="p">));</span>
<a id="__codelineno-14-188" name="__codelineno-14-188"></a>
<a id="__codelineno-14-189" name="__codelineno-14-189"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;------------------收集到Map集合---------------------------&quot;</span><span class="p">);</span>
<a id="__codelineno-14-190" name="__codelineno-14-190"></a>
<a id="__codelineno-14-191" name="__codelineno-14-191"></a><span class="w">        </span><span class="c1">// 收集到Map集合：键是老师名称，值是老师薪水</span>
<a id="__codelineno-14-192" name="__codelineno-14-192"></a><span class="w">        </span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span><span class="w"> </span><span class="n">Double</span><span class="o">&gt;</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">teachers</span><span class="p">.</span><span class="na">stream</span><span class="p">().</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toMap</span><span class="p">(</span><span class="n">Teacher</span><span class="p">::</span><span class="n">getName</span><span class="p">,</span><span class="w"> </span><span class="n">Teacher</span><span class="p">::</span><span class="n">getSalary</span><span class="p">));</span>
<a id="__codelineno-14-193" name="__codelineno-14-193"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">map</span><span class="p">);</span>
<a id="__codelineno-14-194" name="__codelineno-14-194"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-14-195" name="__codelineno-14-195"></a><span class="p">}</span>
<a id="__codelineno-14-196" name="__codelineno-14-196"></a>
<a id="__codelineno-14-197" name="__codelineno-14-197"></a>
<a id="__codelineno-14-198" name="__codelineno-14-198"></a>
<a id="__codelineno-14-199" name="__codelineno-14-199"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.itheima.demo3stream</span><span class="p">;</span>
<a id="__codelineno-14-200" name="__codelineno-14-200"></a>
<a id="__codelineno-14-201" name="__codelineno-14-201"></a><span class="kn">import</span><span class="w"> </span><span class="nn">lombok.AllArgsConstructor</span><span class="p">;</span>
<a id="__codelineno-14-202" name="__codelineno-14-202"></a><span class="kn">import</span><span class="w"> </span><span class="nn">lombok.Data</span><span class="p">;</span>
<a id="__codelineno-14-203" name="__codelineno-14-203"></a><span class="kn">import</span><span class="w"> </span><span class="nn">lombok.NoArgsConstructor</span><span class="p">;</span>
<a id="__codelineno-14-204" name="__codelineno-14-204"></a>
<a id="__codelineno-14-205" name="__codelineno-14-205"></a><span class="c1">// 1、对象类实现一个Comparable比较接口，重写compareTo方法，指定大小比较规则</span>
<a id="__codelineno-14-206" name="__codelineno-14-206"></a><span class="nd">@Data</span>
<a id="__codelineno-14-207" name="__codelineno-14-207"></a><span class="nd">@NoArgsConstructor</span>
<a id="__codelineno-14-208" name="__codelineno-14-208"></a><span class="nd">@AllArgsConstructor</span>
<a id="__codelineno-14-209" name="__codelineno-14-209"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Teacher</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Comparable</span><span class="o">&lt;</span><span class="n">Teacher</span><span class="o">&gt;</span><span class="p">{</span>
<a id="__codelineno-14-210" name="__codelineno-14-210"></a><span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<a id="__codelineno-14-211" name="__codelineno-14-211"></a><span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<a id="__codelineno-14-212" name="__codelineno-14-212"></a><span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">salary</span><span class="p">;</span>
<a id="__codelineno-14-213" name="__codelineno-14-213"></a>
<a id="__codelineno-14-214" name="__codelineno-14-214"></a><span class="w">   </span><span class="nd">@Override</span>
<a id="__codelineno-14-215" name="__codelineno-14-215"></a><span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">toString</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-216" name="__codelineno-14-216"></a><span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Teacher{&quot;</span><span class="w"> </span><span class="o">+</span>
<a id="__codelineno-14-217" name="__codelineno-14-217"></a><span class="w">               </span><span class="s">&quot;name=&#39;&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="sc">&#39;\&#39;&#39;</span><span class="w"> </span><span class="o">+</span>
<a id="__codelineno-14-218" name="__codelineno-14-218"></a><span class="w">               </span><span class="s">&quot;, age=&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="o">+</span>
<a id="__codelineno-14-219" name="__codelineno-14-219"></a><span class="w">               </span><span class="s">&quot;, salary=&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">salary</span><span class="w"> </span><span class="o">+</span>
<a id="__codelineno-14-220" name="__codelineno-14-220"></a><span class="w">               </span><span class="sc">&#39;}&#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;\n&quot;</span><span class="p">;</span>
<a id="__codelineno-14-221" name="__codelineno-14-221"></a><span class="w">   </span><span class="p">}</span>
<a id="__codelineno-14-222" name="__codelineno-14-222"></a>
<a id="__codelineno-14-223" name="__codelineno-14-223"></a><span class="w">    </span><span class="c1">// t2.compareTo(t1)</span>
<a id="__codelineno-14-224" name="__codelineno-14-224"></a><span class="w">    </span><span class="c1">// t2 == this 比较者</span>
<a id="__codelineno-14-225" name="__codelineno-14-225"></a><span class="w">    </span><span class="c1">// t1 == o  被比较者</span>
<a id="__codelineno-14-226" name="__codelineno-14-226"></a><span class="w">    </span><span class="c1">// 规定1：如果你认为左边大于右边 请返回正整数</span>
<a id="__codelineno-14-227" name="__codelineno-14-227"></a><span class="w">    </span><span class="c1">// 规定2：如果你认为左边小于右边 请返回负整数</span>
<a id="__codelineno-14-228" name="__codelineno-14-228"></a><span class="w">    </span><span class="c1">// 规定3：如果你认为左边等于右边 请返回0</span>
<a id="__codelineno-14-229" name="__codelineno-14-229"></a><span class="w">    </span><span class="c1">// 默认就会升序。</span>
<a id="__codelineno-14-230" name="__codelineno-14-230"></a><span class="w">   </span><span class="nd">@Override</span>
<a id="__codelineno-14-231" name="__codelineno-14-231"></a><span class="w">   </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">compareTo</span><span class="p">(</span><span class="n">Teacher</span><span class="w"> </span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-232" name="__codelineno-14-232"></a><span class="w">       </span><span class="c1">// 按照年龄升序</span>
<a id="__codelineno-14-233" name="__codelineno-14-233"></a><span class="c1">//        if(this.getAge() &gt; o.getAge()) return 1;</span>
<a id="__codelineno-14-234" name="__codelineno-14-234"></a><span class="c1">//        if(this.getAge() &lt; o.getAge()) return -1;</span>
<a id="__codelineno-14-235" name="__codelineno-14-235"></a><span class="c1">//        return 0;</span>
<a id="__codelineno-14-236" name="__codelineno-14-236"></a><span class="w">       </span><span class="k">return</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">getAge</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="na">getAge</span><span class="p">();</span><span class="w"> </span><span class="c1">// 升序</span>
<a id="__codelineno-14-237" name="__codelineno-14-237"></a><span class="c1">//        return o.getAge() - this.getAge(); // 降序</span>
<a id="__codelineno-14-238" name="__codelineno-14-238"></a><span class="w">   </span><span class="p">}</span>
<a id="__codelineno-14-239" name="__codelineno-14-239"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="file">File 读写<a class="headerlink" href="#file" title="Permanent link">&para;</a></h3>
<p>File 是 java.io 包下的类，File 类的对象，用于代表当前操作系统的文件（文件或者文件夹）；</p>
<blockquote>
<p>File 类只能对文件本身进行操作，<strong>不能读写文件里存储的数据</strong></p>
</blockquote>
<p>IO 流</p>
<ul>
<li>用于读写数据的（可以读写文件、或者网络中的数据）；</li>
<li>通过 IO 流实现内存和外存（磁盘、硬盘）的交互；</li>
</ul>
<p><span style="color:#CC00CC;">File对象代表具体的文件，操作的对象是文件本身；IO流是读写、更改文件里存储的数据；</span></p>
<h4 id="file_1">创建 FIle 类的对象<a class="headerlink" href="#file_1" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th><strong>构造器</strong></th>
<th style="text-align: left;"><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>public File(String pathname)</td>
<td style="text-align: left;">根据文件路径创建文件对象</td>
</tr>
<tr>
<td>public File(String parent, String child)</td>
<td style="text-align: left;">根据父路径和子路径名字创建文件对象</td>
</tr>
<tr>
<td>public File(File parent, String child)</td>
<td style="text-align: left;">根据父路径对应文件对象和子路径名字创建文件对象</td>
</tr>
</tbody>
</table>
<p>注意：</p>
<ul>
<li>File 对象既可以代表文件，也可以代表文件夹</li>
<li>File 封装的对象仅仅是一个路径名，这个路径可以是存在的，也可以是不存在的；</li>
</ul>
<p>示例代码：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-15-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-15-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-15-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-15-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-15-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-15-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-15-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-15-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-15-10">10</a></span>
<span class="normal"><a href="#__codelineno-15-11">11</a></span>
<span class="normal"><a href="#__codelineno-15-12">12</a></span>
<span class="normal"><a href="#__codelineno-15-13">13</a></span>
<span class="normal"><a href="#__codelineno-15-14">14</a></span>
<span class="normal"><a href="#__codelineno-15-15">15</a></span>
<span class="normal"><a href="#__codelineno-15-16">16</a></span>
<span class="normal"><a href="#__codelineno-15-17">17</a></span>
<span class="normal"><a href="#__codelineno-15-18">18</a></span>
<span class="normal"><a href="#__codelineno-15-19">19</a></span>
<span class="normal"><a href="#__codelineno-15-20">20</a></span>
<span class="normal"><a href="#__codelineno-15-21">21</a></span>
<span class="normal"><a href="#__codelineno-15-22">22</a></span>
<span class="normal"><a href="#__codelineno-15-23">23</a></span>
<span class="normal"><a href="#__codelineno-15-24">24</a></span>
<span class="normal"><a href="#__codelineno-15-25">25</a></span>
<span class="normal"><a href="#__codelineno-15-26">26</a></span>
<span class="normal"><a href="#__codelineno-15-27">27</a></span>
<span class="normal"><a href="#__codelineno-15-28">28</a></span>
<span class="normal"><a href="#__codelineno-15-29">29</a></span>
<span class="normal"><a href="#__codelineno-15-30">30</a></span>
<span class="normal"><a href="#__codelineno-15-31">31</a></span>
<span class="normal"><a href="#__codelineno-15-32">32</a></span>
<span class="normal"><a href="#__codelineno-15-33">33</a></span>
<span class="normal"><a href="#__codelineno-15-34">34</a></span>
<span class="normal"><a href="#__codelineno-15-35">35</a></span>
<span class="normal"><a href="#__codelineno-15-36">36</a></span>
<span class="normal"><a href="#__codelineno-15-37">37</a></span>
<span class="normal"><a href="#__codelineno-15-38">38</a></span>
<span class="normal"><a href="#__codelineno-15-39">39</a></span>
<span class="normal"><a href="#__codelineno-15-40">40</a></span>
<span class="normal"><a href="#__codelineno-15-41">41</a></span>
<span class="normal"><a href="#__codelineno-15-42">42</a></span>
<span class="normal"><a href="#__codelineno-15-43">43</a></span>
<span class="normal"><a href="#__codelineno-15-44">44</a></span>
<span class="normal"><a href="#__codelineno-15-45">45</a></span>
<span class="normal"><a href="#__codelineno-15-46">46</a></span>
<span class="normal"><a href="#__codelineno-15-47">47</a></span>
<span class="normal"><a href="#__codelineno-15-48">48</a></span>
<span class="normal"><a href="#__codelineno-15-49">49</a></span>
<span class="normal"><a href="#__codelineno-15-50">50</a></span>
<span class="normal"><a href="#__codelineno-15-51">51</a></span>
<span class="normal"><a href="#__codelineno-15-52">52</a></span>
<span class="normal"><a href="#__codelineno-15-53">53</a></span>
<span class="normal"><a href="#__codelineno-15-54">54</a></span>
<span class="normal"><a href="#__codelineno-15-55">55</a></span>
<span class="normal"><a href="#__codelineno-15-56">56</a></span>
<span class="normal"><a href="#__codelineno-15-57">57</a></span>
<span class="normal"><a href="#__codelineno-15-58">58</a></span>
<span class="normal"><a href="#__codelineno-15-59">59</a></span>
<span class="normal"><a href="#__codelineno-15-60">60</a></span>
<span class="normal"><a href="#__codelineno-15-61">61</a></span>
<span class="normal"><a href="#__codelineno-15-62">62</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FileDemo1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="w">        </span><span class="c1">// 目标：创建File创建对象代表文件（文件/目录），搞清楚其提供的对文件进行操作的方法。</span>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="w">        </span><span class="c1">// 1、创建File对象，去获取某个文件的信息</span>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="w">        </span><span class="c1">// 如果路径终点的文件不存在，那么创建的时候就会失败，但是如果throws了而且没有try...catch，就不会报错，后续判断是否是文件和文件夹都是false</span>
<a id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="w">        </span><span class="n">File</span><span class="w"> </span><span class="n">f1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="p">(</span><span class="s">&quot;day03-FIle、字符集、IO流/代码/day03-file-io/src/csb.txt&quot;</span><span class="p">);</span>
<a id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f1</span><span class="p">.</span><span class="na">length</span><span class="p">());</span><span class="w"> </span><span class="c1">// 字节个数</span>
<a id="__codelineno-15-8" name="__codelineno-15-8"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f1</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w"> </span><span class="c1">// 文件名称</span>
<a id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f1</span><span class="p">.</span><span class="na">isFile</span><span class="p">());</span><span class="w"> </span><span class="c1">// true 判断是否是一个文件</span>
<a id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f1</span><span class="p">.</span><span class="na">isDirectory</span><span class="p">());</span><span class="w"> </span><span class="c1">// false 判断是否是一个文件夹</span>
<a id="__codelineno-15-11" name="__codelineno-15-11"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;=========================================================&quot;</span><span class="p">);</span>
<a id="__codelineno-15-12" name="__codelineno-15-12"></a>
<a id="__codelineno-15-13" name="__codelineno-15-13"></a><span class="w">        </span><span class="c1">// 2、可以使用相对路径定位文件对象</span>
<a id="__codelineno-15-14" name="__codelineno-15-14"></a><span class="w">        </span><span class="c1">// 只要带盘符的都称之为：绝对路径 E:/resource/dlei.jpg</span>
<a id="__codelineno-15-15" name="__codelineno-15-15"></a><span class="w">        </span><span class="c1">// 相对路径：不带盘符，默认是到你的idea工程下直接寻找文件的。一般用来找工程下的项目文件的。从项目模块开始，不然idea找不到</span>
<a id="__codelineno-15-16" name="__codelineno-15-16"></a><span class="w">        </span><span class="n">File</span><span class="w"> </span><span class="n">f2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="p">(</span><span class="s">&quot;day03-FIle、字符集、IO流/代码/day03-file-io\\src\\dlei01.txt&quot;</span><span class="p">);</span>
<a id="__codelineno-15-17" name="__codelineno-15-17"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f2</span><span class="p">.</span><span class="na">length</span><span class="p">());</span>
<a id="__codelineno-15-18" name="__codelineno-15-18"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f2</span><span class="p">.</span><span class="na">getAbsoluteFile</span><span class="p">());</span><span class="w"> </span><span class="c1">// 获取绝对路径</span>
<a id="__codelineno-15-19" name="__codelineno-15-19"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;=========================================================&quot;</span><span class="p">);</span>
<a id="__codelineno-15-20" name="__codelineno-15-20"></a>
<a id="__codelineno-15-21" name="__codelineno-15-21"></a><span class="w">        </span><span class="c1">// 3、创建对象代表不存在的文件路径。</span>
<a id="__codelineno-15-22" name="__codelineno-15-22"></a><span class="w">        </span><span class="n">File</span><span class="w"> </span><span class="n">f3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="p">(</span><span class="s">&quot;F:\\learn_source\\java\\java_strength_6\\day03-FIle、字符集、IO流\\代码\\day03-file-io\\src\\com\\itheima\\dlei01.txt&quot;</span><span class="p">);</span>
<a id="__codelineno-15-23" name="__codelineno-15-23"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f3</span><span class="p">.</span><span class="na">exists</span><span class="p">());</span><span class="w"> </span><span class="c1">// 判断是否存在</span>
<a id="__codelineno-15-24" name="__codelineno-15-24"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f3</span><span class="p">.</span><span class="na">createNewFile</span><span class="p">());</span><span class="w"> </span><span class="c1">// 把这个文件创建出来，如果文件已经存在，返回false</span>
<a id="__codelineno-15-25" name="__codelineno-15-25"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;=========================================================&quot;</span><span class="p">);</span>
<a id="__codelineno-15-26" name="__codelineno-15-26"></a>
<a id="__codelineno-15-27" name="__codelineno-15-27"></a><span class="w">        </span><span class="c1">// 4、创建对象代表不存在的文件夹路径。</span>
<a id="__codelineno-15-28" name="__codelineno-15-28"></a><span class="w">        </span><span class="n">File</span><span class="w"> </span><span class="n">f4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="p">(</span><span class="s">&quot;F:\\learn_source\\java\\java_strength_6\\day03-FIle、字符集、IO流\\代码\\day03-file-io\\src\\resource\\aaa&quot;</span><span class="p">);</span>
<a id="__codelineno-15-29" name="__codelineno-15-29"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f4</span><span class="p">.</span><span class="na">mkdir</span><span class="p">());</span><span class="w"> </span><span class="c1">// mkdir只能创建一级文件夹</span>
<a id="__codelineno-15-30" name="__codelineno-15-30"></a>
<a id="__codelineno-15-31" name="__codelineno-15-31"></a><span class="w">        </span><span class="n">File</span><span class="w"> </span><span class="n">f5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="p">(</span><span class="s">&quot;F:\\learn_source\\java\\java_strength_6\\day03-FIle、字符集、IO流\\代码\\day03-file-io\\src\\resource\\kkk\\jjj\\mmm&quot;</span><span class="p">);</span>
<a id="__codelineno-15-32" name="__codelineno-15-32"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f5</span><span class="p">.</span><span class="na">mkdirs</span><span class="p">());</span><span class="w"> </span><span class="c1">// mkdir可以创建多级文件夹，很重要！</span>
<a id="__codelineno-15-33" name="__codelineno-15-33"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;=========================================================&quot;</span><span class="p">);</span>
<a id="__codelineno-15-34" name="__codelineno-15-34"></a>
<a id="__codelineno-15-35" name="__codelineno-15-35"></a><span class="w">        </span><span class="c1">// 5、创建File对象代表存在的文件，然后删除它</span>
<a id="__codelineno-15-36" name="__codelineno-15-36"></a><span class="w">        </span><span class="n">File</span><span class="w"> </span><span class="n">f6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="p">(</span><span class="s">&quot;F:\\learn_source\\java\\java_strength_6\\day03-FIle、字符集、IO流\\代码\\day03-file-io\\src\\resource\\dlei01.txt&quot;</span><span class="p">);</span>
<a id="__codelineno-15-37" name="__codelineno-15-37"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f6</span><span class="p">.</span><span class="na">delete</span><span class="p">());</span><span class="w"> </span><span class="c1">// 删除文件</span>
<a id="__codelineno-15-38" name="__codelineno-15-38"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;=========================================================&quot;</span><span class="p">);</span>
<a id="__codelineno-15-39" name="__codelineno-15-39"></a>
<a id="__codelineno-15-40" name="__codelineno-15-40"></a><span class="w">        </span><span class="c1">// 6、创建File对象代表存在的文件夹，然后删除它</span>
<a id="__codelineno-15-41" name="__codelineno-15-41"></a><span class="w">        </span><span class="n">File</span><span class="w"> </span><span class="n">f7</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="p">(</span><span class="s">&quot;F:\\learn_source\\java\\java_strength_6\\day03-FIle、字符集、IO流\\代码\\day03-file-io\\src\\resource\\aaa&quot;</span><span class="p">);</span>
<a id="__codelineno-15-42" name="__codelineno-15-42"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f7</span><span class="p">.</span><span class="na">delete</span><span class="p">());</span><span class="w">  </span><span class="c1">// 只能删除空文件，不能删除非空文件夹</span>
<a id="__codelineno-15-43" name="__codelineno-15-43"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;=========================================================&quot;</span><span class="p">);</span>
<a id="__codelineno-15-44" name="__codelineno-15-44"></a>
<a id="__codelineno-15-45" name="__codelineno-15-45"></a><span class="w">        </span><span class="c1">// 7、</span>
<a id="__codelineno-15-46" name="__codelineno-15-46"></a><span class="w">        </span><span class="n">File</span><span class="w"> </span><span class="n">f8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="p">(</span><span class="s">&quot;F:\\learn_source\\java\\java_strength_6\\day03-FIle、字符集、IO流\\代码\\day03-file-io\\src\\resource&quot;</span><span class="p">);</span>
<a id="__codelineno-15-47" name="__codelineno-15-47"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f8</span><span class="p">.</span><span class="na">delete</span><span class="p">());</span><span class="w">  </span><span class="c1">// 只能删除空文件，不能删除非空文件夹</span>
<a id="__codelineno-15-48" name="__codelineno-15-48"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;=========================================================&quot;</span><span class="p">);</span>
<a id="__codelineno-15-49" name="__codelineno-15-49"></a>
<a id="__codelineno-15-50" name="__codelineno-15-50"></a><span class="w">        </span><span class="c1">// 8、可以获取某个目录下的全部一级文件名称</span>
<a id="__codelineno-15-51" name="__codelineno-15-51"></a><span class="w">        </span><span class="n">File</span><span class="w"> </span><span class="n">f9</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">File</span><span class="p">(</span><span class="s">&quot;F:\\learn_source\\java\\java_strength_6\\day03-FIle、字符集、IO流\\代码\\day03-file-io\\src\\&quot;</span><span class="p">);</span>
<a id="__codelineno-15-52" name="__codelineno-15-52"></a><span class="w">        </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f9</span><span class="p">.</span><span class="na">list</span><span class="p">();</span>
<a id="__codelineno-15-53" name="__codelineno-15-53"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">names</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-54" name="__codelineno-15-54"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
<a id="__codelineno-15-55" name="__codelineno-15-55"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-15-56" name="__codelineno-15-56"></a><span class="w">        </span><span class="n">File</span><span class="o">[]</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f9</span><span class="p">.</span><span class="na">listFiles</span><span class="p">();</span>
<a id="__codelineno-15-57" name="__codelineno-15-57"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">File</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">files</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-15-58" name="__codelineno-15-58"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="na">getAbsoluteFile</span><span class="p">());</span><span class="w"> </span><span class="c1">// 获取绝对路径</span>
<a id="__codelineno-15-59" name="__codelineno-15-59"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-15-60" name="__codelineno-15-60"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;=========================================================&quot;</span><span class="p">);</span>
<a id="__codelineno-15-61" name="__codelineno-15-61"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-15-62" name="__codelineno-15-62"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>File 方法总结：</p>
<table>
<thead>
<tr>
<th>方法名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public boolean exists()</td>
<td>判断当前文件对象，对应的文件路径是否存在，存在返回 true</td>
</tr>
<tr>
<td>public boolean isFile()</td>
<td>判断当前文件对象指代的是否是文件，是文件返回 true，反之。</td>
</tr>
<tr>
<td>public boolean isDirectory()</td>
<td>判断当前文件对象指代的是否是文件夹，是文件夹返回 true，反之。</td>
</tr>
<tr>
<td>public String getName()</td>
<td>获取文件的名称（包含后缀）</td>
</tr>
<tr>
<td>public long length()</td>
<td>获取文件的大小，返回字节个数</td>
</tr>
<tr>
<td>public long lastModified()</td>
<td>获取文件的最后修改时间。</td>
</tr>
<tr>
<td>public String getPath()</td>
<td>获取创建文件对象时，使用的路径</td>
</tr>
<tr>
<td>public String getAbsolutePath()</td>
<td>获取绝对路径</td>
</tr>
</tbody>
</table>
<p>File 类创建文件的功能</p>
<table>
<thead>
<tr>
<th>方法名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public boolean createNewFile()</td>
<td>创建一个新的空的文件</td>
</tr>
<tr>
<td>public boolean mkdir()</td>
<td>只能创建一级文件夹</td>
</tr>
<tr>
<td>public boolean mkdirs()</td>
<td>可以创建多级文件夹</td>
</tr>
</tbody>
</table>
<p>File 类删除文件的功能</p>
<table>
<thead>
<tr>
<th>方法名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public  boolean delete()</td>
<td>删除文件、空文件夹 （默认不能删除空文件夹）</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>注意：delete 方法默认只能删除文件和空文件夹，删除后的文件不会进入回收站</strong></p>
</blockquote>
<p>File 类提供的遍历文件夹的功能</p>
<table>
<thead>
<tr>
<th>方法名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public String [] list()</td>
<td>获取当前目录下所有的 <strong>"一级文件名称"</strong> 到一个 <strong>字符串数组</strong> 中去返回。</td>
</tr>
<tr>
<td>public File [] listFiles()</td>
<td>获取当前目录下所有的 <strong>"一级文件对象"</strong> 到一个 <strong>文件对象数组</strong> 中去返回（重点）</td>
</tr>
</tbody>
</table>
<p>使用 listFiles 方法时的注意事项：</p>
<ul>
<li>当主调是文件，或者路径不存在时，返回 null</li>
<li>当主调是空文件夹时，返回一个长度为 0 的数组</li>
<li>当主调是一个有内容的文件夹时，将里面所有一级文件和文件夹的文件对象放在 File 数组里返回</li>
<li>当主调是一个文件夹，且里面有隐藏文件时，将里面所有文件和文件夹的文件对象放在 File 数组中返回，包含隐藏文件</li>
<li>当主调是一个文件夹，但是没有权限访问该文件夹时，返回 null</li>
</ul>
<h3 id="_14">常见字符集<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<p>字符集，就是二进制码和现实字母、数字、文字的一个映射表，计算机中存储的本质上是它们的二进制码，显示的时候通过字符集编码规则映射成对应的字母、数字、文字；</p>
<h4 id="ascii">标准 ASCII 字符集<a class="headerlink" href="#ascii" title="Permanent link">&para;</a></h4>
<p>包括英文字母（大小写）、数字、标点符号、特殊字符；</p>
<ul>
<li>一个字母、数字、标点符号、特殊字符用一个字节（8 个二进制位）存储；首位全部是 0，因此最多可以表示 128 个字符；</li>
</ul>
<h4 id="gbk">GBK（汉字内码扩展规范，国标）<a class="headerlink" href="#gbk" title="Permanent link">&para;</a></h4>
<ul>
<li>汉字编码字符集，包含了 2 万多个汉字等字符，<span style="background:#6fe7dd; border-radius:5px; display:inline-block;">GBK中一个中文字符编码成<strong>两个字节</strong>的形式存储；</span></li>
<li>注意：GBK 兼容了 ASCII 字符集；</li>
<li>GBK 规定：<span style="color:#d59bf6;">汉字的第一个字节的第一位必须是0；</span></li>
</ul>
<h4 id="unicode">Unicode 字符集（统一码，也叫万国码）<a class="headerlink" href="#unicode" title="Permanent link">&para;</a></h4>
<ul>
<li>国际组织制定，可以容纳世界上所有文字、符号的字符集；</li>
<li>最初采用 32 个二进制位也就是 4 个字节来表示一个字符，缺点是占存储空间大，通信效率变低；</li>
</ul>
<p>UTF-8 字符集</p>
<ul>
<li>是 Unicode 字符集的一种编码方案，采取可变长编码方案，共分四个长度区：1 个字节，2 个字节，3 个字节，4 个字节</li>
<li><strong>英文字符、数字等只占 1 个字节（兼容标准 ASCII 编码），汉字字符占用 3 个字节。</strong></li>
</ul>
<blockquote>
<p><span style="color:#d59bf6;">注意：</span></p>
<ul>
<li><span style="color:#d59bf6;">字符编码时使用的字符集，和解码时使用的字符集必须一致，否则会出现乱码</span></li>
<li><span style="color:#d59bf6;">英文，数字一般不会乱码，因为很多字符集都兼容了ASCII编码</span></li>
</ul>
</blockquote>
<h4 id="_15">使用程序对字符进行编码和解码操作<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h4>
<p>对字符的编码</p>
<table>
<thead>
<tr>
<th>String 提供了如下方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>byte [] getBytes()</td>
<td>使用平台的默认字符集将该 String <strong>编码</strong> 为一系列字节，将结果存储到新的字节数组中</td>
</tr>
<tr>
<td>byte [] getBytes(String charsetName)</td>
<td>使用指定的字符集将该 String <strong>编码</strong> 为一系列字节，将结果存储到新的字节数组中</td>
</tr>
</tbody>
</table>
<p>对字符的解码</p>
<table>
<thead>
<tr>
<th>String 提供了如下方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>String(byte [] bytes)</td>
<td>通过使用平台的默认字符集 <strong>解码</strong> 指定的字节数组来构造新的  String</td>
</tr>
<tr>
<td>String(byte [] bytes, String charsetName)</td>
<td>通过指定的字符集 <strong>解码</strong> 指定的字节数组来构造新的 String</td>
</tr>
</tbody>
</table>
<h3 id="io">IO 流<a class="headerlink" href="#io" title="Permanent link">&para;</a></h3>
<p>就是内存和硬盘的交互，将内存中的东西写入到硬盘是输入 Input，将硬盘中的东西写出到内存是输出 Output</p>
<p><img alt="认识 IO 流" src="https://cdn.jsdelivr.net/gh/Gongzihang6/Pictures@main/Medias/medias%2F2025%2F07%2Fimage-20250613232112065.png" /></p>
<h4 id="io_1">IO 流的体系<a class="headerlink" href="#io_1" title="Permanent link">&para;</a></h4>
<p>分为字节流、字符流，字节流又分为字节输入流、字节输出流；字符流又分为字符输入流、字符输出流；</p>
<p>字节流，顾名思义，传输通道中以一个一个的字节为基本单位；字符流，则是以一个一个的字符为基本单位，如一个字母、一个数字、一个汉字等；</p>
<p><img alt="IO 流体系" src="https://cdn.jsdelivr.net/gh/Gongzihang6/Pictures@main/Medias/medias%2F2025%2F07%2Fimage-20250613232408069.png" /></p>
<h5 id="fileinputstream">FileInputStream（文件字节输入流）<a class="headerlink" href="#fileinputstream" title="Permanent link">&para;</a></h5>
<p>作用：以内存为基准，可以将磁盘文件中的数据以字节形式读入到内存中；</p>
<table>
<thead>
<tr>
<th>构造器</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public <strong>FileInputStream</strong>(File file)</td>
<td>创建字节输入流管道与源文件接通</td>
</tr>
<tr>
<td>public <strong>FileInputStream</strong>(String pathname)</td>
<td>创建字节输入流管道与源文件接通</td>
</tr>
<tr>
<td>public int <strong>read</strong>()</td>
<td>每次读取一个字节返回，如果发现没有数据可读会返回-1</td>
</tr>
<tr>
<td>public int <strong>read</strong>(byte []  buffer)</td>
<td>每次用一个字节数组去读取数据，返回字节数组读取了多少个字节，如果发现没有数据可读会返回-1.</td>
</tr>
<tr>
<td>public byte [] <strong>readAllBytes</strong>() throws IOException</td>
<td>直接将当前字节输入流对应的文件对象的 <strong>所有字节数据</strong> 装到一个字节数组返回</td>
</tr>
</tbody>
</table>
<p>注意事项：</p>
<ul>
<li>使用 FileInputStream 每次读取一个字节，读取性能较差，并且读取汉字输出会乱码（因为 UTF-8 字符集中一个汉字占 3 个字节）；</li>
<li>使用 FileInputStream 每次读取多个字节，读取性能得到了提升，但读取汉字输出还是会乱码；</li>
<li>直接把文件数据全部读取到一个字节数组可以避免乱码，但是 <strong>如果文件过大，创建的字节数组也会过大，可能引起内存溢出</strong></li>
<li><span style="color:#d59bf6;">读取文本适合用字符流；字节流适合做数据的转移，比如：文件复制</span></li>
</ul>
<blockquote>
<p>想要使用字节流读取中文，如何保证输出不乱码？</p>
<ul>
<li>定义一个 <strong>与文件一样大的字节数组，一次性读取完文件的全部字节</strong></li>
</ul>
</blockquote>
<p>示例代码：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span>
<span class="normal"><a href="#__codelineno-16-12">12</a></span>
<span class="normal"><a href="#__codelineno-16-13">13</a></span>
<span class="normal"><a href="#__codelineno-16-14">14</a></span>
<span class="normal"><a href="#__codelineno-16-15">15</a></span>
<span class="normal"><a href="#__codelineno-16-16">16</a></span>
<span class="normal"><a href="#__codelineno-16-17">17</a></span>
<span class="normal"><a href="#__codelineno-16-18">18</a></span>
<span class="normal"><a href="#__codelineno-16-19">19</a></span>
<span class="normal"><a href="#__codelineno-16-20">20</a></span>
<span class="normal"><a href="#__codelineno-16-21">21</a></span>
<span class="normal"><a href="#__codelineno-16-22">22</a></span>
<span class="normal"><a href="#__codelineno-16-23">23</a></span>
<span class="normal"><a href="#__codelineno-16-24">24</a></span>
<span class="normal"><a href="#__codelineno-16-25">25</a></span>
<span class="normal"><a href="#__codelineno-16-26">26</a></span>
<span class="normal"><a href="#__codelineno-16-27">27</a></span>
<span class="normal"><a href="#__codelineno-16-28">28</a></span>
<span class="normal"><a href="#__codelineno-16-29">29</a></span>
<span class="normal"><a href="#__codelineno-16-30">30</a></span>
<span class="normal"><a href="#__codelineno-16-31">31</a></span>
<span class="normal"><a href="#__codelineno-16-32">32</a></span>
<span class="normal"><a href="#__codelineno-16-33">33</a></span>
<span class="normal"><a href="#__codelineno-16-34">34</a></span>
<span class="normal"><a href="#__codelineno-16-35">35</a></span>
<span class="normal"><a href="#__codelineno-16-36">36</a></span>
<span class="normal"><a href="#__codelineno-16-37">37</a></span>
<span class="normal"><a href="#__codelineno-16-38">38</a></span>
<span class="normal"><a href="#__codelineno-16-39">39</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FileInputStreamDemo2</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">        </span><span class="c1">// 目标：掌握文件字节输入流读取文件中的字节数组到内存中来。</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">        </span><span class="c1">// 1、创建文件字节输入流管道于源文件接通</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">        </span><span class="n">InputStream</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="s">&quot;day03-FIle、字符集、IO流\\代码\\day03-file-io\\src\\dlei03.txt&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// 简化写法</span>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">        </span><span class="c1">// 2、开始读取文件中的字节并输出： 每次读取多个字节</span>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="w">        </span><span class="c1">// 定义一个字节数组用于每次读取字节</span>
<a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="w">        </span><span class="kt">byte</span><span class="o">[]</span><span class="w"> </span><span class="n">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">byte</span><span class="o">[</span><span class="mi">3</span><span class="o">]</span><span class="p">;</span>
<a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="w">        </span><span class="c1">// 定义一个变量记住每次读取了多少个字节。</span>
<a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">len</span><span class="p">;</span>
<a id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">is</span><span class="p">.</span><span class="na">read</span><span class="p">(</span><span class="n">buffer</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="w">            </span><span class="c1">// 3、把读取到的字节数组转换成字符串输出,读取多少倒出多少</span>
<a id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="p">);</span>
<a id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>
<a id="__codelineno-16-16" name="__codelineno-16-16"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="w">        </span><span class="n">is</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-16-18" name="__codelineno-16-18"></a>
<a id="__codelineno-16-19" name="__codelineno-16-19"></a><span class="w">        </span><span class="c1">// 拓展：每次读取多个字节，性能得到提升，因为每次读取多个字节，可以“减少硬盘和内存的交互次数，从而提升性能”。</span>
<a id="__codelineno-16-20" name="__codelineno-16-20"></a><span class="w">        </span><span class="c1">// 依然无法避免读取汉字输出乱码的问题：存在“截断汉字字节”的可能性！</span>
<a id="__codelineno-16-21" name="__codelineno-16-21"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-16-22" name="__codelineno-16-22"></a><span class="p">}</span>
<a id="__codelineno-16-23" name="__codelineno-16-23"></a>
<a id="__codelineno-16-24" name="__codelineno-16-24"></a>
<a id="__codelineno-16-25" name="__codelineno-16-25"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FileInputStreamDemo3</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-26" name="__codelineno-16-26"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-27" name="__codelineno-16-27"></a><span class="w">        </span><span class="c1">// 目标：掌握文件字节输入流读取文件中的字节数组到内存中来。</span>
<a id="__codelineno-16-28" name="__codelineno-16-28"></a><span class="w">        </span><span class="c1">// 1、创建文件字节输入流管道于源文件接通</span>
<a id="__codelineno-16-29" name="__codelineno-16-29"></a><span class="w">        </span><span class="n">InputStream</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="s">&quot;day03-FIle、字符集、IO流\\代码\\day03-file-io\\src\\dlei04.txt&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// 简化写法</span>
<a id="__codelineno-16-30" name="__codelineno-16-30"></a>
<a id="__codelineno-16-31" name="__codelineno-16-31"></a><span class="w">        </span><span class="c1">// 2、一次性读完文件的全部字节:可以避免读取汉字输出乱码的问题。</span>
<a id="__codelineno-16-32" name="__codelineno-16-32"></a><span class="w">        </span><span class="kt">byte</span><span class="o">[]</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">is</span><span class="p">.</span><span class="na">readAllBytes</span><span class="p">();</span>
<a id="__codelineno-16-33" name="__codelineno-16-33"></a>
<a id="__codelineno-16-34" name="__codelineno-16-34"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">rs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="n">bytes</span><span class="p">);</span>
<a id="__codelineno-16-35" name="__codelineno-16-35"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">rs</span><span class="p">);</span>
<a id="__codelineno-16-36" name="__codelineno-16-36"></a>
<a id="__codelineno-16-37" name="__codelineno-16-37"></a><span class="w">        </span><span class="n">is</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-16-38" name="__codelineno-16-38"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-16-39" name="__codelineno-16-39"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h5 id="fileoutputstream">FileOutputStream（文件字节输出流）<a class="headerlink" href="#fileoutputstream" title="Permanent link">&para;</a></h5>
<p>以内存为基准，把内存中的数据以字节的形式写出到文件中去；</p>
<p>基本构造：</p>
<table>
<thead>
<tr>
<th><strong>构造器</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>public FileOutputStream(File file)</td>
<td>创建字节输出流管道与 <strong>源文件对象</strong> 接通</td>
</tr>
<tr>
<td>public FileOutputStream(String filepath)</td>
<td>创建字节输出流管道与 <strong>源文件路径</strong> 接通</td>
</tr>
<tr>
<td>public FileOutputStream(File file，boolean append)</td>
<td>创建字节输出流管道与 <strong>源文件对象</strong> 接通，可 <strong>追加</strong> 数据</td>
</tr>
<tr>
<td>public FileOutputStream(String filepath，boolean append)</td>
<td>创建字节输出流管道与 <strong>源文件路径</strong> 接通，可 <strong>追加</strong> 数据</td>
</tr>
</tbody>
</table>
<p>常用方法：</p>
<table>
<thead>
<tr>
<th><strong>方法名称</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>public void <strong>write</strong>(int a)</td>
<td>写一个 <strong>字节</strong> 出去</td>
</tr>
<tr>
<td>public void write(byte [] buffer)</td>
<td>写一个 <strong>字节数组</strong> 出去</td>
</tr>
<tr>
<td>public void write(byte [] buffer , int pos , int len)</td>
<td>写一个 <strong>字节数组的一部分</strong> 出去。</td>
</tr>
<tr>
<td>public void <strong>close</strong>() throws IOException</td>
<td>关闭流。</td>
</tr>
</tbody>
</table>
<p>用文件字节输入流（FileInputStream）读取一个文件的字节流，再用文件字节输出流（FileOutputStream）将这个字节流写出到另一个文件，实现文件复制</p>
<p>同时了解 try..catch..finally 的用法，try-with-resources 的语法</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-17-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-17-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-17-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-17-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-17-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-17-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-17-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-17-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-17-10">10</a></span>
<span class="normal"><a href="#__codelineno-17-11">11</a></span>
<span class="normal"><a href="#__codelineno-17-12">12</a></span>
<span class="normal"><a href="#__codelineno-17-13">13</a></span>
<span class="normal"><a href="#__codelineno-17-14">14</a></span>
<span class="normal"><a href="#__codelineno-17-15">15</a></span>
<span class="normal"><a href="#__codelineno-17-16">16</a></span>
<span class="normal"><a href="#__codelineno-17-17">17</a></span>
<span class="normal"><a href="#__codelineno-17-18">18</a></span>
<span class="normal"><a href="#__codelineno-17-19">19</a></span>
<span class="normal"><a href="#__codelineno-17-20">20</a></span>
<span class="normal"><a href="#__codelineno-17-21">21</a></span>
<span class="normal"><a href="#__codelineno-17-22">22</a></span>
<span class="normal"><a href="#__codelineno-17-23">23</a></span>
<span class="normal"><a href="#__codelineno-17-24">24</a></span>
<span class="normal"><a href="#__codelineno-17-25">25</a></span>
<span class="normal"><a href="#__codelineno-17-26">26</a></span>
<span class="normal"><a href="#__codelineno-17-27">27</a></span>
<span class="normal"><a href="#__codelineno-17-28">28</a></span>
<span class="normal"><a href="#__codelineno-17-29">29</a></span>
<span class="normal"><a href="#__codelineno-17-30">30</a></span>
<span class="normal"><a href="#__codelineno-17-31">31</a></span>
<span class="normal"><a href="#__codelineno-17-32">32</a></span>
<span class="normal"><a href="#__codelineno-17-33">33</a></span>
<span class="normal"><a href="#__codelineno-17-34">34</a></span>
<span class="normal"><a href="#__codelineno-17-35">35</a></span>
<span class="normal"><a href="#__codelineno-17-36">36</a></span>
<span class="normal"><a href="#__codelineno-17-37">37</a></span>
<span class="normal"><a href="#__codelineno-17-38">38</a></span>
<span class="normal"><a href="#__codelineno-17-39">39</a></span>
<span class="normal"><a href="#__codelineno-17-40">40</a></span>
<span class="normal"><a href="#__codelineno-17-41">41</a></span>
<span class="normal"><a href="#__codelineno-17-42">42</a></span>
<span class="normal"><a href="#__codelineno-17-43">43</a></span>
<span class="normal"><a href="#__codelineno-17-44">44</a></span>
<span class="normal"><a href="#__codelineno-17-45">45</a></span>
<span class="normal"><a href="#__codelineno-17-46">46</a></span>
<span class="normal"><a href="#__codelineno-17-47">47</a></span>
<span class="normal"><a href="#__codelineno-17-48">48</a></span>
<span class="normal"><a href="#__codelineno-17-49">49</a></span>
<span class="normal"><a href="#__codelineno-17-50">50</a></span>
<span class="normal"><a href="#__codelineno-17-51">51</a></span>
<span class="normal"><a href="#__codelineno-17-52">52</a></span>
<span class="normal"><a href="#__codelineno-17-53">53</a></span>
<span class="normal"><a href="#__codelineno-17-54">54</a></span>
<span class="normal"><a href="#__codelineno-17-55">55</a></span>
<span class="normal"><a href="#__codelineno-17-56">56</a></span>
<span class="normal"><a href="#__codelineno-17-57">57</a></span>
<span class="normal"><a href="#__codelineno-17-58">58</a></span>
<span class="normal"><a href="#__codelineno-17-59">59</a></span>
<span class="normal"><a href="#__codelineno-17-60">60</a></span>
<span class="normal"><a href="#__codelineno-17-61">61</a></span>
<span class="normal"><a href="#__codelineno-17-62">62</a></span>
<span class="normal"><a href="#__codelineno-17-63">63</a></span>
<span class="normal"><a href="#__codelineno-17-64">64</a></span>
<span class="normal"><a href="#__codelineno-17-65">65</a></span>
<span class="normal"><a href="#__codelineno-17-66">66</a></span>
<span class="normal"><a href="#__codelineno-17-67">67</a></span>
<span class="normal"><a href="#__codelineno-17-68">68</a></span>
<span class="normal"><a href="#__codelineno-17-69">69</a></span>
<span class="normal"><a href="#__codelineno-17-70">70</a></span>
<span class="normal"><a href="#__codelineno-17-71">71</a></span>
<span class="normal"><a href="#__codelineno-17-72">72</a></span>
<span class="normal"><a href="#__codelineno-17-73">73</a></span>
<span class="normal"><a href="#__codelineno-17-74">74</a></span>
<span class="normal"><a href="#__codelineno-17-75">75</a></span>
<span class="normal"><a href="#__codelineno-17-76">76</a></span>
<span class="normal"><a href="#__codelineno-17-77">77</a></span>
<span class="normal"><a href="#__codelineno-17-78">78</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CopyDemo1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">        </span><span class="c1">// 目标：使用字节流完成文件的复制操作。</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">        </span><span class="c1">// 源文件：E:\resource\jt.jpg</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="w">        </span><span class="c1">// 目标文件：D:\jt_new.jpg （复制过去的时候必须带文件名的，无法自动生成文件名。）</span>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">        </span><span class="n">copyFile</span><span class="p">(</span><span class="s">&quot;E:\\resource\\jt.jpg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;D:\\jt_new.jpg&quot;</span><span class="p">);</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a>
<a id="__codelineno-17-9" name="__codelineno-17-9"></a><span class="w">    </span><span class="c1">// 复制文件</span>
<a id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">copyFile</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">srcPath</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">destPath</span><span class="p">)</span><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-17-11" name="__codelineno-17-11"></a><span class="w">        </span><span class="c1">// 1、创建一个文件字节输入流管道与源文件接通</span>
<a id="__codelineno-17-12" name="__codelineno-17-12"></a><span class="w">        </span><span class="n">InputStream</span><span class="w"> </span><span class="n">fis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<a id="__codelineno-17-13" name="__codelineno-17-13"></a><span class="w">        </span><span class="n">OutputStream</span><span class="w"> </span><span class="n">fos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<a id="__codelineno-17-14" name="__codelineno-17-14"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-15" name="__codelineno-17-15"></a><span class="w">            </span><span class="n">fis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="n">srcPath</span><span class="p">);</span>
<a id="__codelineno-17-16" name="__codelineno-17-16"></a><span class="w">            </span><span class="n">fos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="n">destPath</span><span class="p">);</span>
<a id="__codelineno-17-17" name="__codelineno-17-17"></a><span class="w">            </span><span class="c1">// 2、读取一个字节数组，写入一个字节数组  1024 + 1024 + 3</span>
<a id="__codelineno-17-18" name="__codelineno-17-18"></a><span class="w">            </span><span class="kt">byte</span><span class="o">[]</span><span class="w"> </span><span class="n">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">byte</span><span class="o">[</span><span class="mi">1024</span><span class="o">]</span><span class="p">;</span>
<a id="__codelineno-17-19" name="__codelineno-17-19"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">len</span><span class="p">;</span>
<a id="__codelineno-17-20" name="__codelineno-17-20"></a><span class="w">            </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fis</span><span class="p">.</span><span class="na">read</span><span class="p">(</span><span class="n">buffer</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-21" name="__codelineno-17-21"></a><span class="w">                </span><span class="n">fos</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="p">);</span><span class="w"> </span><span class="c1">// 读取多少个字节，就写入多少个字节</span>
<a id="__codelineno-17-22" name="__codelineno-17-22"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-17-23" name="__codelineno-17-23"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;复制成功！&quot;</span><span class="p">);</span>
<a id="__codelineno-17-24" name="__codelineno-17-24"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-25" name="__codelineno-17-25"></a><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-17-26" name="__codelineno-17-26"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">finally</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-27" name="__codelineno-17-27"></a><span class="w">            </span><span class="c1">// 最后一定会执行一次：即便程序出现异常！</span>
<a id="__codelineno-17-28" name="__codelineno-17-28"></a><span class="w">            </span><span class="c1">// 3、释放资源</span>
<a id="__codelineno-17-29" name="__codelineno-17-29"></a><span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-30" name="__codelineno-17-30"></a><span class="w">                </span><span class="k">if</span><span class="p">(</span><span class="n">fos</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="n">fos</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-17-31" name="__codelineno-17-31"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-32" name="__codelineno-17-32"></a><span class="w">                </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-17-33" name="__codelineno-17-33"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-17-34" name="__codelineno-17-34"></a><span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-35" name="__codelineno-17-35"></a><span class="w">                </span><span class="k">if</span><span class="p">(</span><span class="n">fis</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"> </span><span class="n">fis</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-17-36" name="__codelineno-17-36"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-37" name="__codelineno-17-37"></a><span class="w">                </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-17-38" name="__codelineno-17-38"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-17-39" name="__codelineno-17-39"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-17-40" name="__codelineno-17-40"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-41" name="__codelineno-17-41"></a><span class="p">}</span>
<a id="__codelineno-17-42" name="__codelineno-17-42"></a>
<a id="__codelineno-17-43" name="__codelineno-17-43"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CopyDemo2</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-44" name="__codelineno-17-44"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-45" name="__codelineno-17-45"></a><span class="w">        </span><span class="c1">// 目标：掌握资源的新方式：try-with-resource</span>
<a id="__codelineno-17-46" name="__codelineno-17-46"></a><span class="w">        </span><span class="c1">// 源文件：E:\resource\jt.jpg</span>
<a id="__codelineno-17-47" name="__codelineno-17-47"></a><span class="w">        </span><span class="c1">// 目标文件：D:\jt_new.jpg （复制过去的时候必须带文件名的，无法自动生成文件名。）</span>
<a id="__codelineno-17-48" name="__codelineno-17-48"></a><span class="w">        </span><span class="n">copyFile</span><span class="p">(</span><span class="s">&quot;E:\\resource\\jt.jpg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;D:\\jt_new.jpg&quot;</span><span class="p">);</span>
<a id="__codelineno-17-49" name="__codelineno-17-49"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-50" name="__codelineno-17-50"></a>
<a id="__codelineno-17-51" name="__codelineno-17-51"></a><span class="w">    </span><span class="c1">// 复制文件</span>
<a id="__codelineno-17-52" name="__codelineno-17-52"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">copyFile</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">srcPath</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">destPath</span><span class="p">)</span><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-17-53" name="__codelineno-17-53"></a><span class="w">        </span><span class="c1">// 1、创建一个文件字节输入流管道与源文件接通</span>
<a id="__codelineno-17-54" name="__codelineno-17-54"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-17-55" name="__codelineno-17-55"></a><span class="w">             </span><span class="c1">// 这里只能放置资源对象，用完后，最终会自动调用其close方法关闭！！</span>
<a id="__codelineno-17-56" name="__codelineno-17-56"></a><span class="w">             </span><span class="n">InputStream</span><span class="w"> </span><span class="n">fis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="n">srcPath</span><span class="p">);</span>
<a id="__codelineno-17-57" name="__codelineno-17-57"></a><span class="w">             </span><span class="n">OutputStream</span><span class="w"> </span><span class="n">fos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="n">destPath</span><span class="p">);</span>
<a id="__codelineno-17-58" name="__codelineno-17-58"></a><span class="w">             </span><span class="n">MyConn</span><span class="w"> </span><span class="n">conn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyConn</span><span class="p">();</span><span class="w"> </span><span class="c1">// 自定义的资源对象 最终会自动调用其close方法关闭！！</span>
<a id="__codelineno-17-59" name="__codelineno-17-59"></a><span class="w">            </span><span class="p">){</span>
<a id="__codelineno-17-60" name="__codelineno-17-60"></a><span class="w">            </span><span class="c1">// 2、读取一个字节数组，写入一个字节数组  1024 + 1024 + 3</span>
<a id="__codelineno-17-61" name="__codelineno-17-61"></a><span class="w">            </span><span class="kt">byte</span><span class="o">[]</span><span class="w"> </span><span class="n">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">byte</span><span class="o">[</span><span class="mi">1024</span><span class="o">]</span><span class="p">;</span>
<a id="__codelineno-17-62" name="__codelineno-17-62"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">len</span><span class="p">;</span>
<a id="__codelineno-17-63" name="__codelineno-17-63"></a><span class="w">            </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fis</span><span class="p">.</span><span class="na">read</span><span class="p">(</span><span class="n">buffer</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-64" name="__codelineno-17-64"></a><span class="w">                </span><span class="n">fos</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="p">);</span><span class="w"> </span><span class="c1">// 读取多少个字节，就写入多少个字节</span>
<a id="__codelineno-17-65" name="__codelineno-17-65"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-17-66" name="__codelineno-17-66"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;复制成功！&quot;</span><span class="p">);</span>
<a id="__codelineno-17-67" name="__codelineno-17-67"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-68" name="__codelineno-17-68"></a><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-17-69" name="__codelineno-17-69"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-17-70" name="__codelineno-17-70"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-71" name="__codelineno-17-71"></a><span class="p">}</span>
<a id="__codelineno-17-72" name="__codelineno-17-72"></a>
<a id="__codelineno-17-73" name="__codelineno-17-73"></a><span class="kd">class</span> <span class="nc">MyConn</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Closeable</span><span class="p">{</span>
<a id="__codelineno-17-74" name="__codelineno-17-74"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-17-75" name="__codelineno-17-75"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">close</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">IOException</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-76" name="__codelineno-17-76"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;dlei的资源关闭了！&quot;</span><span class="p">);</span>
<a id="__codelineno-17-77" name="__codelineno-17-77"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-78" name="__codelineno-17-78"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<ul>
<li>finally 代码区的特点：无论 try 中的程序是正常执行了，还是出现了异常，最后都一定会执行 finally 区，除非 JVM 终止。作用：一般用于在程序执行完成后进行资源的释放操作（专业级做法）</li>
</ul>
<h5 id="filereader">FIleReader（文件字符输入流）<a class="headerlink" href="#filereader" title="Permanent link">&para;</a></h5>
<p>以内存为基准，可以把文件中的数据以字符的形式读入到内存中去；</p>
<table>
<thead>
<tr>
<th><strong>构造器</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>public <strong>FileReader</strong>(File file)</td>
<td>创建字符输入流管道与源文件接通</td>
</tr>
<tr>
<td>public <strong>FileReader</strong>(String pathname)</td>
<td>创建字符输入流管道与源文件接通</td>
</tr>
</tbody>
</table>
<p>读取字符流的方法：</p>
<table>
<thead>
<tr>
<th><strong>方法名称</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>public int read()</td>
<td>每次读取一个字符返回，如果发现没有数据可读会返回-1.</td>
</tr>
<tr>
<td>public int read(<strong>char []  buffer</strong>)</td>
<td>每次用一个字符数组去读取数据，返回字符数组读取了多少个字符，如果发现没有数据可读会返回-1.</td>
</tr>
</tbody>
</table>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-18-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-18-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-18-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-18-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-18-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-18-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-18-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-18-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-18-10">10</a></span>
<span class="normal"><a href="#__codelineno-18-11">11</a></span>
<span class="normal"><a href="#__codelineno-18-12">12</a></span>
<span class="normal"><a href="#__codelineno-18-13">13</a></span>
<span class="normal"><a href="#__codelineno-18-14">14</a></span>
<span class="normal"><a href="#__codelineno-18-15">15</a></span>
<span class="normal"><a href="#__codelineno-18-16">16</a></span>
<span class="normal"><a href="#__codelineno-18-17">17</a></span>
<span class="normal"><a href="#__codelineno-18-18">18</a></span>
<span class="normal"><a href="#__codelineno-18-19">19</a></span>
<span class="normal"><a href="#__codelineno-18-20">20</a></span>
<span class="normal"><a href="#__codelineno-18-21">21</a></span>
<span class="normal"><a href="#__codelineno-18-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FileReaderDemo1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="w">        </span><span class="c1">// 目标：掌握文件字符输入流读取字符内容到程序中来。</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="w">                </span><span class="c1">// 1、创建文件字符输入流与源文件接通</span>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="w">            </span><span class="n">Reader</span><span class="w"> </span><span class="n">fr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileReader</span><span class="p">(</span><span class="s">&quot;day03-FIle、字符集、IO流/代码/day03-file-io\\src\\dlei06.txt&quot;</span><span class="p">);</span>
<a id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="w">        </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="w">            </span><span class="c1">// 2、定义一个字符数组，每次读多个字符</span>
<a id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="w">            </span><span class="kt">char</span><span class="o">[]</span><span class="w"> </span><span class="n">chs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">char</span><span class="o">[</span><span class="mi">3</span><span class="o">]</span><span class="p">;</span>
<a id="__codelineno-18-10" name="__codelineno-18-10"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">len</span><span class="p">;</span><span class="w"> </span><span class="c1">// 用于记录每次读取了多少个字符</span>
<a id="__codelineno-18-11" name="__codelineno-18-11"></a><span class="w">            </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fr</span><span class="p">.</span><span class="na">read</span><span class="p">(</span><span class="n">chs</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">){</span>
<a id="__codelineno-18-12" name="__codelineno-18-12"></a><span class="w">                </span><span class="c1">// 3、每次读取多个字符，并把字符数组转换成字符串输出</span>
<a id="__codelineno-18-13" name="__codelineno-18-13"></a><span class="w">                </span><span class="n">String</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="n">chs</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">len</span><span class="p">);</span>
<a id="__codelineno-18-14" name="__codelineno-18-14"></a><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">str</span><span class="p">);</span>
<a id="__codelineno-18-15" name="__codelineno-18-15"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-18-16" name="__codelineno-18-16"></a><span class="w">            </span><span class="c1">// 拓展：文件字符输入流每次读取多个字符，性能较好，而且读取中文</span>
<a id="__codelineno-18-17" name="__codelineno-18-17"></a><span class="w">            </span><span class="c1">// 是按照字符读取，不会出现乱码！这是一种读取中文很好的方案。</span>
<a id="__codelineno-18-18" name="__codelineno-18-18"></a><span class="w">        </span><span class="p">}</span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">){</span>
<a id="__codelineno-18-19" name="__codelineno-18-19"></a><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-18-20" name="__codelineno-18-20"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-18-21" name="__codelineno-18-21"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-18-22" name="__codelineno-18-22"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h5 id="filewriter">FileWriter（文件字符输出流）<a class="headerlink" href="#filewriter" title="Permanent link">&para;</a></h5>
<p>以内存为基准，把内存中的数据以字符的形式写出到文件中；</p>
<table>
<thead>
<tr>
<th><strong>构造器</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>public FileWriter(File file)</td>
<td>创建字节输出流管道与源文件对象接通</td>
</tr>
<tr>
<td>public FileWriter(String filepath)</td>
<td>创建字节输出流管道与源文件路径接通</td>
</tr>
<tr>
<td>public FileWriter(File file，boolean append)</td>
<td>创建字节输出流管道与源文件对象接通，可追加数据</td>
</tr>
<tr>
<td>public FileWriter(String filepath，boolean append)</td>
<td>创建字节输出流管道与源文件路径接通，可追加数据</td>
</tr>
</tbody>
</table>
<p>常用方法</p>
<table>
<thead>
<tr>
<th><strong>方法名称</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>void  write(int c)</td>
<td>写一个字符</td>
</tr>
<tr>
<td>void  write(String str)</td>
<td>写一个字符串</td>
</tr>
<tr>
<td>void  write(String str, int off, int len)</td>
<td>写一个字符串的一部分</td>
</tr>
<tr>
<td>void  write(char [] cbuf)</td>
<td>写入一个字符数组</td>
</tr>
<tr>
<td>void  write(char [] cbuf, int off, int len)</td>
<td>写入字符数组的一部分</td>
</tr>
</tbody>
</table>
<p><span style="background:#6fe7dd; border-radius:5px; display:inline-block;">字符输出流写出数据后，必须刷新流，或者关闭流，写出去的数据才能生效</span></p>
<table>
<thead>
<tr>
<th>方法名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public  void flush() throws IOException</td>
<td>刷新流，就是将内存中缓存的数据立即写到文件中去生效！</td>
</tr>
<tr>
<td>public  void close() throws IOException</td>
<td>关闭流的操作，包含了刷新！</td>
</tr>
</tbody>
</table>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-19-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-19-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-19-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-19-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-19-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-19-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-19-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-19-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-19-10">10</a></span>
<span class="normal"><a href="#__codelineno-19-11">11</a></span>
<span class="normal"><a href="#__codelineno-19-12">12</a></span>
<span class="normal"><a href="#__codelineno-19-13">13</a></span>
<span class="normal"><a href="#__codelineno-19-14">14</a></span>
<span class="normal"><a href="#__codelineno-19-15">15</a></span>
<span class="normal"><a href="#__codelineno-19-16">16</a></span>
<span class="normal"><a href="#__codelineno-19-17">17</a></span>
<span class="normal"><a href="#__codelineno-19-18">18</a></span>
<span class="normal"><a href="#__codelineno-19-19">19</a></span>
<span class="normal"><a href="#__codelineno-19-20">20</a></span>
<span class="normal"><a href="#__codelineno-19-21">21</a></span>
<span class="normal"><a href="#__codelineno-19-22">22</a></span>
<span class="normal"><a href="#__codelineno-19-23">23</a></span>
<span class="normal"><a href="#__codelineno-19-24">24</a></span>
<span class="normal"><a href="#__codelineno-19-25">25</a></span>
<span class="normal"><a href="#__codelineno-19-26">26</a></span>
<span class="normal"><a href="#__codelineno-19-27">27</a></span>
<span class="normal"><a href="#__codelineno-19-28">28</a></span>
<span class="normal"><a href="#__codelineno-19-29">29</a></span>
<span class="normal"><a href="#__codelineno-19-30">30</a></span>
<span class="normal"><a href="#__codelineno-19-31">31</a></span>
<span class="normal"><a href="#__codelineno-19-32">32</a></span>
<span class="normal"><a href="#__codelineno-19-33">33</a></span>
<span class="normal"><a href="#__codelineno-19-34">34</a></span>
<span class="normal"><a href="#__codelineno-19-35">35</a></span>
<span class="normal"><a href="#__codelineno-19-36">36</a></span>
<span class="normal"><a href="#__codelineno-19-37">37</a></span>
<span class="normal"><a href="#__codelineno-19-38">38</a></span>
<span class="normal"><a href="#__codelineno-19-39">39</a></span>
<span class="normal"><a href="#__codelineno-19-40">40</a></span>
<span class="normal"><a href="#__codelineno-19-41">41</a></span>
<span class="normal"><a href="#__codelineno-19-42">42</a></span>
<span class="normal"><a href="#__codelineno-19-43">43</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">FileWriterDemo1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="w">        </span><span class="c1">// 目标：搞清楚文件字符输出流的使用：写字符出去的流。</span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-19-6" name="__codelineno-19-6"></a><span class="w">            </span><span class="c1">// 1. 创建一个字符输出流对象，指定写出的目的地。</span>
<a id="__codelineno-19-7" name="__codelineno-19-7"></a><span class="w">            </span><span class="c1">// Writer fw = new FileWriter(&quot;day03-file-io/src/dlei07-out.txt&quot;); // 覆盖管道</span>
<a id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="w">            </span><span class="n">Writer</span><span class="w"> </span><span class="n">fw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileWriter</span><span class="p">(</span><span class="s">&quot;day03-FIle、字符集、IO流\\代码\\day03-file-io/src/dlei07-out.txt&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span><span class="w"> </span><span class="c1">// 追加数据</span>
<a id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="w">            </span><span class="p">){</span>
<a id="__codelineno-19-10" name="__codelineno-19-10"></a>
<a id="__codelineno-19-11" name="__codelineno-19-11"></a><span class="w">            </span><span class="c1">// 2. 写一个字符出去：  public void write(int c)</span>
<a id="__codelineno-19-12" name="__codelineno-19-12"></a><span class="w">            </span><span class="n">fw</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="sc">&#39;a&#39;</span><span class="p">);</span>
<a id="__codelineno-19-13" name="__codelineno-19-13"></a><span class="w">            </span><span class="n">fw</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="mi">98</span><span class="p">);</span>
<a id="__codelineno-19-14" name="__codelineno-19-14"></a><span class="w">            </span><span class="n">fw</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="sc">&#39;磊&#39;</span><span class="p">);</span>
<a id="__codelineno-19-15" name="__codelineno-19-15"></a><span class="w">            </span><span class="n">fw</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="s">&quot;\r\n&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// 换行</span>
<a id="__codelineno-19-16" name="__codelineno-19-16"></a>
<a id="__codelineno-19-17" name="__codelineno-19-17"></a><span class="w">            </span><span class="c1">// 3、写一个字符串出去：  public void write(String str)</span>
<a id="__codelineno-19-18" name="__codelineno-19-18"></a><span class="w">            </span><span class="n">fw</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="s">&quot;java&quot;</span><span class="p">);</span>
<a id="__codelineno-19-19" name="__codelineno-19-19"></a><span class="w">            </span><span class="n">fw</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="s">&quot;我爱Java，虽然Java不是最好的编程之一,但是可以挣钱&quot;</span><span class="p">);</span>
<a id="__codelineno-19-20" name="__codelineno-19-20"></a><span class="w">            </span><span class="n">fw</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="s">&quot;\r\n&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// 换行</span>
<a id="__codelineno-19-21" name="__codelineno-19-21"></a>
<a id="__codelineno-19-22" name="__codelineno-19-22"></a><span class="w">            </span><span class="c1">// 4、写字符串的一部分出去：  public void write(String str, int off, int len)</span>
<a id="__codelineno-19-23" name="__codelineno-19-23"></a><span class="w">            </span><span class="n">fw</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="s">&quot;java&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-19-24" name="__codelineno-19-24"></a><span class="w">            </span><span class="n">fw</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="s">&quot;\r\n&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// 换行</span>
<a id="__codelineno-19-25" name="__codelineno-19-25"></a>
<a id="__codelineno-19-26" name="__codelineno-19-26"></a><span class="w">            </span><span class="c1">// 5、写一个字符数组出去：  public void write(char[] cbuf)</span>
<a id="__codelineno-19-27" name="__codelineno-19-27"></a><span class="w">            </span><span class="kt">char</span><span class="o">[]</span><span class="w"> </span><span class="n">chars</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;java&quot;</span><span class="p">.</span><span class="na">toCharArray</span><span class="p">();</span>
<a id="__codelineno-19-28" name="__codelineno-19-28"></a><span class="w">            </span><span class="n">fw</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="n">chars</span><span class="p">);</span>
<a id="__codelineno-19-29" name="__codelineno-19-29"></a><span class="w">            </span><span class="n">fw</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="s">&quot;\r\n&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// 换行</span>
<a id="__codelineno-19-30" name="__codelineno-19-30"></a>
<a id="__codelineno-19-31" name="__codelineno-19-31"></a><span class="w">            </span><span class="c1">// 6、写字符数组的一部分出去：  public void write(char[] cbuf, int off, int len)</span>
<a id="__codelineno-19-32" name="__codelineno-19-32"></a><span class="w">            </span><span class="n">fw</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="n">chars</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<a id="__codelineno-19-33" name="__codelineno-19-33"></a><span class="w">            </span><span class="n">fw</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="s">&quot;\r\n&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// 换行</span>
<a id="__codelineno-19-34" name="__codelineno-19-34"></a>
<a id="__codelineno-19-35" name="__codelineno-19-35"></a><span class="w">            </span><span class="c1">// fw.flush(); // 刷新缓冲区，将缓冲区中的数据全部写出去。</span>
<a id="__codelineno-19-36" name="__codelineno-19-36"></a><span class="w">            </span><span class="c1">// 刷新后，流可以继续使用。</span>
<a id="__codelineno-19-37" name="__codelineno-19-37"></a><span class="w">            </span><span class="c1">// fw.close(); // 关闭资源，关闭包含了刷新！关闭后流不能继续使用！</span>
<a id="__codelineno-19-38" name="__codelineno-19-38"></a><span class="w">                </span><span class="c1">// 因为使用了try-with-resource，资源会自动关闭，因此也就会自动flush</span>
<a id="__codelineno-19-39" name="__codelineno-19-39"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-40" name="__codelineno-19-40"></a><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-19-41" name="__codelineno-19-41"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-19-42" name="__codelineno-19-42"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-19-43" name="__codelineno-19-43"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="_16">缓冲流<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h4>
<p><img alt="字节、字符缓冲流" src="https://cdn.jsdelivr.net/gh/Gongzihang6/Pictures@main/Medias/medias%2F2025%2F07%2Fimage-20250615154929492.png" /></p>
<p>BufferedInputStream（缓冲字节输入流）</p>
<ul>
<li>作用：可以提高字节输入流读取数据的性能；</li>
<li>原理：缓冲字节输入流自带了 8KB 缓冲池；缓冲字节输出流也自带了 8KB 缓冲池；</li>
</ul>
<table>
<thead>
<tr>
<th>构造器</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public BufferedInputStream(InputStream is)</td>
<td>把低级的字节输入流包装成一个高级的缓冲字节输入流，从而提高读数据的性能</td>
</tr>
<tr>
<td>public BufferedOutputStream(OutputStream os)</td>
<td>把低级的字节输出流包装成一个高级的缓冲字节输出流，从而提高写数据的性能</td>
</tr>
<tr>
<td>public BufferedInputStream(InputStream in, int size)</td>
<td>把低级的字节输入流包装成一个高级的缓冲字节输入流，<code>size</code> 表示缓冲池大小，单位为字节；</td>
</tr>
</tbody>
</table>
<p>示例代码：用缓冲字节输入流、输出流提高文件复制效率；</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-20-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-20-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-20-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-20-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-20-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-20-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-20-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-20-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-20-10">10</a></span>
<span class="normal"><a href="#__codelineno-20-11">11</a></span>
<span class="normal"><a href="#__codelineno-20-12">12</a></span>
<span class="normal"><a href="#__codelineno-20-13">13</a></span>
<span class="normal"><a href="#__codelineno-20-14">14</a></span>
<span class="normal"><a href="#__codelineno-20-15">15</a></span>
<span class="normal"><a href="#__codelineno-20-16">16</a></span>
<span class="normal"><a href="#__codelineno-20-17">17</a></span>
<span class="normal"><a href="#__codelineno-20-18">18</a></span>
<span class="normal"><a href="#__codelineno-20-19">19</a></span>
<span class="normal"><a href="#__codelineno-20-20">20</a></span>
<span class="normal"><a href="#__codelineno-20-21">21</a></span>
<span class="normal"><a href="#__codelineno-20-22">22</a></span>
<span class="normal"><a href="#__codelineno-20-23">23</a></span>
<span class="normal"><a href="#__codelineno-20-24">24</a></span>
<span class="normal"><a href="#__codelineno-20-25">25</a></span>
<span class="normal"><a href="#__codelineno-20-26">26</a></span>
<span class="normal"><a href="#__codelineno-20-27">27</a></span>
<span class="normal"><a href="#__codelineno-20-28">28</a></span>
<span class="normal"><a href="#__codelineno-20-29">29</a></span>
<span class="normal"><a href="#__codelineno-20-30">30</a></span>
<span class="normal"><a href="#__codelineno-20-31">31</a></span>
<span class="normal"><a href="#__codelineno-20-32">32</a></span>
<span class="normal"><a href="#__codelineno-20-33">33</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CopyDemo1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="w">        </span><span class="c1">// 目标：掌握缓冲字节流的使用。</span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="w">        </span><span class="c1">// 源文件：E:\resource\jt.jpg</span>
<a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="w">        </span><span class="c1">// 目标文件：D:\jt_new.jpg （复制过去的时候必须带文件名的，无法自动生成文件名。）</span>
<a id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="w">        </span><span class="n">copyFile</span><span class="p">(</span><span class="s">&quot;E:\\resource\\jt.jpg&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;D:\\jt_new2.jpg&quot;</span><span class="p">);</span>
<a id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-8" name="__codelineno-20-8"></a>
<a id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="w">    </span><span class="c1">// 复制文件</span>
<a id="__codelineno-20-10" name="__codelineno-20-10"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">copyFile</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">srcPath</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">destPath</span><span class="p">)</span><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-20-11" name="__codelineno-20-11"></a><span class="w">        </span><span class="c1">// 1、创建一个文件字节输入流管道与源文件接通</span>
<a id="__codelineno-20-12" name="__codelineno-20-12"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-20-13" name="__codelineno-20-13"></a><span class="w">                </span><span class="c1">// 这里只能放置资源对象，用完后，最终会自动调用其close方法关闭！！</span>
<a id="__codelineno-20-14" name="__codelineno-20-14"></a><span class="w">                </span><span class="n">InputStream</span><span class="w"> </span><span class="n">fis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="n">srcPath</span><span class="p">);</span>
<a id="__codelineno-20-15" name="__codelineno-20-15"></a><span class="w">                </span><span class="c1">// 把低级的字节输入流包装成高级的缓冲字节输入流</span>
<a id="__codelineno-20-16" name="__codelineno-20-16"></a><span class="w">                </span><span class="n">InputStream</span><span class="w"> </span><span class="n">bis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BufferedInputStream</span><span class="p">(</span><span class="n">fis</span><span class="p">);</span>
<a id="__codelineno-20-17" name="__codelineno-20-17"></a>
<a id="__codelineno-20-18" name="__codelineno-20-18"></a><span class="w">                </span><span class="n">OutputStream</span><span class="w"> </span><span class="n">fos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="n">destPath</span><span class="p">);</span>
<a id="__codelineno-20-19" name="__codelineno-20-19"></a><span class="w">                </span><span class="c1">// 把低级的字节输出流包装成高级的缓冲字节输出流</span>
<a id="__codelineno-20-20" name="__codelineno-20-20"></a><span class="w">                </span><span class="n">OutputStream</span><span class="w"> </span><span class="n">bos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BufferedOutputStream</span><span class="p">(</span><span class="n">fos</span><span class="p">);</span>
<a id="__codelineno-20-21" name="__codelineno-20-21"></a><span class="w">                </span><span class="p">){</span>
<a id="__codelineno-20-22" name="__codelineno-20-22"></a><span class="w">            </span><span class="c1">// 2、读取一个字节数组，写入一个字节数组  1024 + 1024 + 3</span>
<a id="__codelineno-20-23" name="__codelineno-20-23"></a><span class="w">            </span><span class="kt">byte</span><span class="o">[]</span><span class="w"> </span><span class="n">buffer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">byte</span><span class="o">[</span><span class="mi">1024</span><span class="o">]</span><span class="p">;</span>
<a id="__codelineno-20-24" name="__codelineno-20-24"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">len</span><span class="p">;</span>
<a id="__codelineno-20-25" name="__codelineno-20-25"></a><span class="w">            </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bis</span><span class="p">.</span><span class="na">read</span><span class="p">(</span><span class="n">buffer</span><span class="p">))</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-26" name="__codelineno-20-26"></a><span class="w">                </span><span class="n">bos</span><span class="p">.</span><span class="na">write</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="p">);</span><span class="w"> </span><span class="c1">// 读取多少个字节，就写入多少个字节</span>
<a id="__codelineno-20-27" name="__codelineno-20-27"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-20-28" name="__codelineno-20-28"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;复制成功！&quot;</span><span class="p">);</span>
<a id="__codelineno-20-29" name="__codelineno-20-29"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-30" name="__codelineno-20-30"></a><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-20-31" name="__codelineno-20-31"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-20-32" name="__codelineno-20-32"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-33" name="__codelineno-20-33"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h5 id="bufferedreader">BufferedReader（缓冲字符输入流）<a class="headerlink" href="#bufferedreader" title="Permanent link">&para;</a></h5>
<p>作用：自带 8KB（8192 字节）的字符缓冲池，可以提高字符输入流读取字符数据的性能；本质上都是减少内存和硬盘的交互次数；</p>
<p><img alt="缓冲字符输入流" src="https://cdn.jsdelivr.net/gh/Gongzihang6/Pictures@main/Medias/medias%2F2025%2F07%2Fimage-20250615162615086.png" /></p>
<table>
<thead>
<tr>
<th>构造器</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public  BufferedReader(Reader r)</td>
<td>把低级的字符输入流包装成字符缓冲输入流管道，从而提高字符输入流读字符数据的性能</td>
</tr>
</tbody>
</table>
<p><strong>字符缓冲输入流新增的功能：按照行读取字符</strong></p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public  String readLine()</td>
<td>读取一行数据返回，如果没有数据可读了，会返回 null</td>
</tr>
</tbody>
</table>
<h5 id="bufferedwriter">BufferedWriter（缓冲字符输出流）<a class="headerlink" href="#bufferedwriter" title="Permanent link">&para;</a></h5>
<ul>
<li>作用：自带 8K 的字符缓冲池，可以提高字符输出流写字符数据的性能。</li>
</ul>
<table>
<thead>
<tr>
<th>构造器</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public  BufferedWriter(Writer r)</td>
<td>把低级的字符输出流包装成一个高级的缓冲字符输出流管道，从而提高字符输出流写数据的性能</td>
</tr>
</tbody>
</table>
<p><strong>字符缓冲输出流新增的功能：换行</strong></p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public  void newLine()</td>
<td>换行</td>
</tr>
</tbody>
</table>
<p><strong>推荐使用哪种方式提高字节流读写数据的性能？</strong></p>
<ul>
<li>建议使用字节缓冲输入流、字节缓冲输出流，结合字节数组的方式，目前来看是性能最优的组合。</li>
</ul>
<h4 id="_17">其他流<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h4>
<p><img alt="整个 IO 流体系" src="https://cdn.jsdelivr.net/gh/Gongzihang6/Pictures@main/Medias/medias%2F2025%2F07%2Fimage-20250615173105469.png" /></p>
<h5 id="inputstreamreader">InputStreamReader（字符输入转换流）<a class="headerlink" href="#inputstreamreader" title="Permanent link">&para;</a></h5>
<ul>
<li>
<p>解决不同编码时，字符流读取文本内容乱码的问题。</p>
</li>
<li>
<p>解决思路：<span style="color:#d59bf6;">先获取文件的原始字节流，再将其按真实的字符集编码转成字符输入流</span>，这样字符输入流中的字符就不乱码了</p>
</li>
</ul>
<table>
<thead>
<tr>
<th><strong>构造器</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>public InputStreamReader(InputStream is)</td>
<td>把原始的字节输入流，按照代码默认编码转成字符输入流（与直接用 FileReader 的效果一样）</td>
</tr>
<tr>
<td>public InputStreamReader(InputStream is ，String  charset)</td>
<td>把原始的字节输入流，按照指定字符集编码转成字符输入流(重点)</td>
</tr>
</tbody>
</table>
<p>示例代码：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-21-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-21-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-21-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-21-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-21-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-21-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-21-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-21-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-21-10">10</a></span>
<span class="normal"><a href="#__codelineno-21-11">11</a></span>
<span class="normal"><a href="#__codelineno-21-12">12</a></span>
<span class="normal"><a href="#__codelineno-21-13">13</a></span>
<span class="normal"><a href="#__codelineno-21-14">14</a></span>
<span class="normal"><a href="#__codelineno-21-15">15</a></span>
<span class="normal"><a href="#__codelineno-21-16">16</a></span>
<span class="normal"><a href="#__codelineno-21-17">17</a></span>
<span class="normal"><a href="#__codelineno-21-18">18</a></span>
<span class="normal"><a href="#__codelineno-21-19">19</a></span>
<span class="normal"><a href="#__codelineno-21-20">20</a></span>
<span class="normal"><a href="#__codelineno-21-21">21</a></span>
<span class="normal"><a href="#__codelineno-21-22">22</a></span>
<span class="normal"><a href="#__codelineno-21-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Demo2</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="w">        </span><span class="c1">// 目标：使用字符输入转换流InputStreamReader解决不同编码读取乱码的问题、</span>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="w">        </span><span class="c1">// 代码：UTF-8   文件 UTF-8  读取不乱码</span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="w">        </span><span class="c1">// 代码：UTF-8   文件 GBK  读取乱码</span>
<a id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="w">                </span><span class="c1">// 先提取文件的原始字节流</span>
<a id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="w">                </span><span class="n">InputStream</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="s">&quot;day03-FIle、字符集、IO流/代码/day03-file-io\\src\\dlei09.txt&quot;</span><span class="p">);</span>
<a id="__codelineno-21-9" name="__codelineno-21-9"></a><span class="w">                </span><span class="c1">// 指定字符集把原始字节流转换成字符输入流</span>
<a id="__codelineno-21-10" name="__codelineno-21-10"></a><span class="w">                </span><span class="n">Reader</span><span class="w"> </span><span class="n">isr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InputStreamReader</span><span class="p">(</span><span class="n">is</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;GBK&quot;</span><span class="p">);</span>
<a id="__codelineno-21-11" name="__codelineno-21-11"></a><span class="w">                </span><span class="c1">// 2、创建缓冲字符输入流包装低级的字符输入流</span>
<a id="__codelineno-21-12" name="__codelineno-21-12"></a><span class="w">                </span><span class="n">BufferedReader</span><span class="w"> </span><span class="n">br</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BufferedReader</span><span class="p">(</span><span class="n">isr</span><span class="p">);</span>
<a id="__codelineno-21-13" name="__codelineno-21-13"></a><span class="w">        </span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-14" name="__codelineno-21-14"></a><span class="w">            </span><span class="c1">// 定义一个字符串变量用于记住每次读取的一行数据</span>
<a id="__codelineno-21-15" name="__codelineno-21-15"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">line</span><span class="p">;</span>
<a id="__codelineno-21-16" name="__codelineno-21-16"></a><span class="w">            </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">br</span><span class="p">.</span><span class="na">readLine</span><span class="p">())</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="p">){</span>
<a id="__codelineno-21-17" name="__codelineno-21-17"></a><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">line</span><span class="p">);</span>
<a id="__codelineno-21-18" name="__codelineno-21-18"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-21-19" name="__codelineno-21-19"></a><span class="w">        </span><span class="p">}</span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">){</span>
<a id="__codelineno-21-20" name="__codelineno-21-20"></a><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-21-21" name="__codelineno-21-21"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-21-22" name="__codelineno-21-22"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-21-23" name="__codelineno-21-23"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h5 id="printstreamprintwriter">PrintStream/PrintWriter（打印流）<a class="headerlink" href="#printstreamprintwriter" title="Permanent link">&para;</a></h5>
<ul>
<li>作用：打印流可以实现更方便、更高效的打印数据出去（到硬盘），能实现打印啥出去就是啥出去。</li>
</ul>
<p><strong>PrintStream</strong> 提供的打印数据的方案：</p>
<table>
<thead>
<tr>
<th>构造器</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public  <strong>PrintStream</strong>(OutputStream/File/String)</td>
<td>打印流直接通向字节输出流/文件/文件路径</td>
</tr>
<tr>
<td>public PrintStream(String fileName, Charset charset)</td>
<td>可以指定写出去的字符编码</td>
</tr>
<tr>
<td>public PrintStream(OutputStream, boolean autoFlush)</td>
<td>可以指定实现自动刷新</td>
</tr>
<tr>
<td>public PrintStream(OutputStream, boolean autoFlush, String encoding)</td>
<td>可以指定实现自动刷新，并可指定字符的编码</td>
</tr>
</tbody>
</table>
<p>方法：</p>
<table>
<thead>
<tr>
<th><strong>方法</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>public  void <strong>println</strong>()</td>
<td>打印任意类型的数据出去</td>
</tr>
<tr>
<td>public  void <strong>write</strong>(int/byte []/byte [] 的一部分)</td>
<td>可以支持写 <strong>字节</strong> 数据出去</td>
</tr>
</tbody>
</table>
<p><strong>PrintWriter</strong> 提供的打印数据的方案：</p>
<table>
<thead>
<tr>
<th>构造器</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public  PrintWriter(OutputStream/Writer/FIle/String)</td>
<td>打印流直接通向字节输出流/文件/文件路径</td>
</tr>
<tr>
<td>public PrintWriter(String fileName, Charset charset)</td>
<td>可以指定写出去的字符编码</td>
</tr>
<tr>
<td>public PrintWriter(OutputStream out/writer, boolean autoFlush)</td>
<td>可以指定实现自动刷新</td>
</tr>
<tr>
<td>public PrintWriter(OutputStream out, boolean autoFlush, String encoding)</td>
<td>可以指定实现自动刷新，并可指定字符的编码</td>
</tr>
</tbody>
</table>
<p>方法：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public  void println(Xxx xx)</td>
<td>打印任意类型的数据出去</td>
</tr>
<tr>
<td>public  void write(int/String/char []/..)</td>
<td>可以支持写字符数据出去</td>
</tr>
</tbody>
</table>
<p>示例代码：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-22-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-22-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-22-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-22-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-22-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-22-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-22-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-22-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-22-10">10</a></span>
<span class="normal"><a href="#__codelineno-22-11">11</a></span>
<span class="normal"><a href="#__codelineno-22-12">12</a></span>
<span class="normal"><a href="#__codelineno-22-13">13</a></span>
<span class="normal"><a href="#__codelineno-22-14">14</a></span>
<span class="normal"><a href="#__codelineno-22-15">15</a></span>
<span class="normal"><a href="#__codelineno-22-16">16</a></span>
<span class="normal"><a href="#__codelineno-22-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PrintStreamDemo1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="w">        </span><span class="c1">// 目标：打印流的使用。</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="w">       </span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="w">    </span><span class="c1">// PrintStream ps = new PrintStream(&quot;day03-file-io/src/ps.txt&quot;);</span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="w">                </span><span class="n">PrintStream</span><span class="w"> </span><span class="n">ps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PrintStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="s">&quot;day03-FIle、字符集、IO流/代码/day03-file-io/src/ps.txt&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">));</span>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="w">                </span><span class="c1">// PrintWriter ps = new PrintWriter(&quot;day03-file-io/src/ps.txt&quot;);</span>
<a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="w">       </span><span class="p">){</span>
<a id="__codelineno-22-8" name="__codelineno-22-8"></a><span class="w">           </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="mi">97</span><span class="p">);</span>
<a id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="w">           </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="sc">&#39;a&#39;</span><span class="p">);</span>
<a id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="w">           </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;黑马&quot;</span><span class="p">);</span>
<a id="__codelineno-22-11" name="__codelineno-22-11"></a><span class="w">           </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<a id="__codelineno-22-12" name="__codelineno-22-12"></a><span class="w">           </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="mf">99.9</span><span class="p">);</span>
<a id="__codelineno-22-13" name="__codelineno-22-13"></a><span class="w">       </span><span class="p">}</span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">){</span>
<a id="__codelineno-22-14" name="__codelineno-22-14"></a><span class="w">           </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-22-15" name="__codelineno-22-15"></a><span class="w">       </span><span class="p">}</span>
<a id="__codelineno-22-16" name="__codelineno-22-16"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-22-17" name="__codelineno-22-17"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>PrintStream 和 PrintWriter 的区别：</p>
<ul>
<li>打印数据的功能是一样的：都是<span style="color:#d59bf6;">使用方便，性能高效（核心优势）</span>；</li>
<li>PrintStream 继承自字节输出流 OutputStream，因此支持写字节数据的方法；</li>
<li>PrintWriter 底层由缓冲字符输出流 BufferedWriter 实现，因此支持写字符数据出去；</li>
</ul>
<h4 id="_18">特殊数据流<a class="headerlink" href="#_18" title="Permanent link">&para;</a></h4>
<h5 id="dataoutputstream">DataOutputStream（数据输出流）<a class="headerlink" href="#dataoutputstream" title="Permanent link">&para;</a></h5>
<ul>
<li>允许把数据和其类型一并写出去；</li>
</ul>
<table>
<thead>
<tr>
<th>构造器</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public DataOutputStream(OutputStream out)</td>
<td>创建新数据输出流包装基础的字节输出流</td>
</tr>
</tbody>
</table>
<p>方法：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public  final void writeByte(int v)  throws IOException</td>
<td>将 byte 类型的数据写入基础的字节输出流</td>
</tr>
<tr>
<td>public  final void writeInt(int v) throws IOException</td>
<td>将 int 类型的数据写入基础的字节输出流</td>
</tr>
<tr>
<td>public  final void writeDouble(Double v) throws IOException</td>
<td>将 double 类型的数据写入基础的字节输出流</td>
</tr>
<tr>
<td>public  final void writeUTF(String str) throws IOException</td>
<td>将字符串数据以 UTF-8 编码成字节写入基础的字节输出流</td>
</tr>
<tr>
<td>public  void write(int/byte []/byte [] 一部分)</td>
<td>支持写字节数据出去</td>
</tr>
</tbody>
</table>
<h5 id="datainputstream">DataInputStream（数据输入流）<a class="headerlink" href="#datainputstream" title="Permanent link">&para;</a></h5>
<ul>
<li>用于读取数据输出流写出去的数据，和 DataOutputStream 配合使用</li>
</ul>
<p>构造器：</p>
<table>
<thead>
<tr>
<th>构造器</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public DataInputStream(InputStream is)</td>
<td>创建新数据输入流包装基础的字节输入流</td>
</tr>
</tbody>
</table>
<p>方法：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Public  final byte readByte()  throws IOException</td>
<td>读取字节数据返回</td>
</tr>
<tr>
<td>public  final int readInt() throws IOException</td>
<td>读取 int 类型的数据返回</td>
</tr>
<tr>
<td>public  final double readDouble() throws IOException</td>
<td>读取 double 类型的数据返回</td>
</tr>
<tr>
<td>public  final String readUTF() throws IOException</td>
<td>读取字符串数（UTF-8）据返回</td>
</tr>
<tr>
<td>public  int readInt()/read(byte [])</td>
<td>支持读字节数据进来</td>
</tr>
</tbody>
</table>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-23-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-23-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-23-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-23-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-23-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-23-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-23-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-23-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-23-10">10</a></span>
<span class="normal"><a href="#__codelineno-23-11">11</a></span>
<span class="normal"><a href="#__codelineno-23-12">12</a></span>
<span class="normal"><a href="#__codelineno-23-13">13</a></span>
<span class="normal"><a href="#__codelineno-23-14">14</a></span>
<span class="normal"><a href="#__codelineno-23-15">15</a></span>
<span class="normal"><a href="#__codelineno-23-16">16</a></span>
<span class="normal"><a href="#__codelineno-23-17">17</a></span>
<span class="normal"><a href="#__codelineno-23-18">18</a></span>
<span class="normal"><a href="#__codelineno-23-19">19</a></span>
<span class="normal"><a href="#__codelineno-23-20">20</a></span>
<span class="normal"><a href="#__codelineno-23-21">21</a></span>
<span class="normal"><a href="#__codelineno-23-22">22</a></span>
<span class="normal"><a href="#__codelineno-23-23">23</a></span>
<span class="normal"><a href="#__codelineno-23-24">24</a></span>
<span class="normal"><a href="#__codelineno-23-25">25</a></span>
<span class="normal"><a href="#__codelineno-23-26">26</a></span>
<span class="normal"><a href="#__codelineno-23-27">27</a></span>
<span class="normal"><a href="#__codelineno-23-28">28</a></span>
<span class="normal"><a href="#__codelineno-23-29">29</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DataStreamDemo2</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="w">        </span><span class="c1">// 目标：特殊数据流的使用。</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="w">       </span><span class="k">try</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="w">               </span><span class="n">DataOutputStream</span><span class="w"> </span><span class="n">dos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataOutputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="s">&quot;day03-FIle、字符集、IO流/代码/day03-file-io\\src\\data.txt&quot;</span><span class="p">));</span>
<a id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="w">               </span><span class="p">){</span>
<a id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="w">           </span><span class="n">dos</span><span class="p">.</span><span class="na">writeByte</span><span class="p">(</span><span class="mi">34</span><span class="p">);</span>
<a id="__codelineno-23-8" name="__codelineno-23-8"></a><span class="w">           </span><span class="n">dos</span><span class="p">.</span><span class="na">writeUTF</span><span class="p">(</span><span class="s">&quot;你好&quot;</span><span class="p">);</span>
<a id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="w">           </span><span class="n">dos</span><span class="p">.</span><span class="na">writeInt</span><span class="p">(</span><span class="mi">3665</span><span class="p">);</span>
<a id="__codelineno-23-10" name="__codelineno-23-10"></a><span class="w">           </span><span class="n">dos</span><span class="p">.</span><span class="na">writeDouble</span><span class="p">(</span><span class="mf">9.9</span><span class="p">);</span>
<a id="__codelineno-23-11" name="__codelineno-23-11"></a><span class="w">       </span><span class="p">}</span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">){</span>
<a id="__codelineno-23-12" name="__codelineno-23-12"></a><span class="w">           </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-23-13" name="__codelineno-23-13"></a><span class="w">       </span><span class="p">}</span>
<a id="__codelineno-23-14" name="__codelineno-23-14"></a>
<a id="__codelineno-23-15" name="__codelineno-23-15"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DataStreamDemo3</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-16" name="__codelineno-23-16"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-17" name="__codelineno-23-17"></a><span class="w">        </span><span class="c1">// 目标：特殊数据流的使用。</span>
<a id="__codelineno-23-18" name="__codelineno-23-18"></a><span class="w">       </span><span class="k">try</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-23-19" name="__codelineno-23-19"></a><span class="w">               </span><span class="n">DataInputStream</span><span class="w"> </span><span class="n">dis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DataInputStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileInputStream</span><span class="p">(</span><span class="s">&quot;day03-FIle、字符集、IO流/代码/day03-file-io\\src\\data.txt&quot;</span><span class="p">));</span>
<a id="__codelineno-23-20" name="__codelineno-23-20"></a><span class="w">               </span><span class="p">){</span>
<a id="__codelineno-23-21" name="__codelineno-23-21"></a><span class="w">           </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">dis</span><span class="p">.</span><span class="na">readByte</span><span class="p">());</span>
<a id="__codelineno-23-22" name="__codelineno-23-22"></a><span class="w">           </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">dis</span><span class="p">.</span><span class="na">readUTF</span><span class="p">());</span>
<a id="__codelineno-23-23" name="__codelineno-23-23"></a><span class="w">           </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">dis</span><span class="p">.</span><span class="na">readInt</span><span class="p">());</span>
<a id="__codelineno-23-24" name="__codelineno-23-24"></a><span class="w">           </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">dis</span><span class="p">.</span><span class="na">readDouble</span><span class="p">());</span>
<a id="__codelineno-23-25" name="__codelineno-23-25"></a><span class="w">       </span><span class="p">}</span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">){</span>
<a id="__codelineno-23-26" name="__codelineno-23-26"></a><span class="w">           </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-23-27" name="__codelineno-23-27"></a><span class="w">       </span><span class="p">}</span>
<a id="__codelineno-23-28" name="__codelineno-23-28"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-23-29" name="__codelineno-23-29"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="io_2">IO 框架<a class="headerlink" href="#io_2" title="Permanent link">&para;</a></h3>
<ul>
<li>框架（Framework）是一个预先写好的代码库或一组工具，旨在简化和加速开发过程</li>
<li>框架的形式：一般是把类、接口等编译成 class 形式，再压缩成一个.jar 结尾的文件发行出去</li>
</ul>
<p>IO 框架：封装了 Java 提供的对文件、数据进行操作的代码，对外提供了更简单的方式来对文件进行操作，对数据进行读写等</p>
<h4 id="commons-io">Commons-io 框架<a class="headerlink" href="#commons-io" title="Permanent link">&para;</a></h4>
<p>Commons-io 是 apache 开源基金组织提供的一组有关 IO 操作的小框架，目的是提高 IO 流的开发效率</p>
<table>
<thead>
<tr>
<th>FileUtils 类提供的部分方法展示</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public static void <strong>copyFile</strong>(File srcFile, File destFile)</td>
<td>复制文件。</td>
</tr>
<tr>
<td>public static void <strong>copyDirectory</strong>(File srcDir, File destDir)</td>
<td>复制文件夹</td>
</tr>
<tr>
<td>public static void <strong>deleteDirectory</strong>(File directory)</td>
<td>删除文件夹</td>
</tr>
<tr>
<td>public static String <strong>readFileToString</strong>(File file, String encoding)</td>
<td>读数据</td>
</tr>
<tr>
<td>public static void <strong>writeStringToFile</strong>(File file, String data, String charname, boolean append)</td>
<td>写数据</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>IOUtils 类提供的部分方法展示</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public static int <strong>copy</strong>(InputStream inputStream, OutputStream outputStream)</td>
<td>复制文件。</td>
</tr>
<tr>
<td>public static int <strong>copy</strong>(Reader reader, Writer writer)</td>
<td>复制文件。</td>
</tr>
<tr>
<td>public static void <strong>write</strong>(String data, OutputStream output, String charsetName)</td>
<td>写数据</td>
</tr>
</tbody>
</table>
<h2 id="_19">多线程<a class="headerlink" href="#_19" title="Permanent link">&para;</a></h2>
<p>基本概念：</p>
<ul>
<li>线程(Thread)是一个程序内部的一条执行流程；</li>
<li>程序中如果只有一条执行流程，那这个程序就是单线程的程序</li>
<li>多线程是指从软硬件上实现的多条执行流程的技术（多条线程由 CPU 负责调度执行）</li>
</ul>
<h3 id="_20">创建线程<a class="headerlink" href="#_20" title="Permanent link">&para;</a></h3>
<h4 id="thread">多线程的创建方式一：继承 Thread 类<a class="headerlink" href="#thread" title="Permanent link">&para;</a></h4>
<ol>
<li>定义一个子类 MyThread 继承线程类 <code>java.lang.Thread</code>，重写 <code>run()</code> 方法；</li>
<li>创建 MyThread 类的对象；</li>
<li>调用线程对象的 <code>start()</code> 方法启动线程（实际启动后还是执行 run 方法完成线程任务）</li>
</ol>
<h5 id="_21">方式一优缺点：<a class="headerlink" href="#_21" title="Permanent link">&para;</a></h5>
<ul>
<li>优点：写代码简单；</li>
<li>缺点：线程类已经继承 Thread，无法继承其他类，不利于功能的扩展；</li>
</ul>
<h5 id="_22">创建线程的注意事项<a class="headerlink" href="#_22" title="Permanent link">&para;</a></h5>
<ol>
<li>启动线程必须是调用 start 方法，不是调用 run 方法<ul>
<li>直接调用 run 方法会被当成普通方法执行，此时相当于还是单线程执行；</li>
<li>只有调用 start 方法才是启动一个新的线程执行；</li>
</ul>
</li>
<li>不要把主线程任务放在启动子线程之前<ul>
<li>这样主线程一直是先跑完的，相当于是一个单线程的效果了。</li>
</ul>
</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-24-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-24-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-24-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-24-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-24-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-24-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-24-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-24-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-24-10">10</a></span>
<span class="normal"><a href="#__codelineno-24-11">11</a></span>
<span class="normal"><a href="#__codelineno-24-12">12</a></span>
<span class="normal"><a href="#__codelineno-24-13">13</a></span>
<span class="normal"><a href="#__codelineno-24-14">14</a></span>
<span class="normal"><a href="#__codelineno-24-15">15</a></span>
<span class="normal"><a href="#__codelineno-24-16">16</a></span>
<span class="normal"><a href="#__codelineno-24-17">17</a></span>
<span class="normal"><a href="#__codelineno-24-18">18</a></span>
<span class="normal"><a href="#__codelineno-24-19">19</a></span>
<span class="normal"><a href="#__codelineno-24-20">20</a></span>
<span class="normal"><a href="#__codelineno-24-21">21</a></span>
<span class="normal"><a href="#__codelineno-24-22">22</a></span>
<span class="normal"><a href="#__codelineno-24-23">23</a></span>
<span class="normal"><a href="#__codelineno-24-24">24</a></span>
<span class="normal"><a href="#__codelineno-24-25">25</a></span>
<span class="normal"><a href="#__codelineno-24-26">26</a></span>
<span class="normal"><a href="#__codelineno-24-27">27</a></span>
<span class="normal"><a href="#__codelineno-24-28">28</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ThreadDemo1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="w">    </span><span class="c1">// main方法本身是由一条主线程负责推荐执行的。</span>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="w">        </span><span class="c1">// 目标：认识多线程，掌握创建线程的方式一：继承Thread类来实现</span>
<a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="w">        </span><span class="c1">// 4、创建线程类的对象：代表线程。</span>
<a id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="w">        </span><span class="n">Thread</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyThread</span><span class="p">();</span>
<a id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="w">        </span><span class="c1">// 5、调用start方法，启动线程。还是调用run方法执行的</span>
<a id="__codelineno-24-8" name="__codelineno-24-8"></a><span class="w">        </span><span class="n">t1</span><span class="p">.</span><span class="na">start</span><span class="p">();</span><span class="w"> </span><span class="c1">// 启动线程，让线程执行run方法</span>
<a id="__codelineno-24-9" name="__codelineno-24-9"></a><span class="w">        </span><span class="c1">// 子线程启动后，程序不需要在这里等待子线程执行完毕，而是主线程继续往下执行代码，出现子线程和主线程交替输出数字的效果</span>
<a id="__codelineno-24-10" name="__codelineno-24-10"></a>
<a id="__codelineno-24-11" name="__codelineno-24-11"></a><span class="w">        </span><span class="c1">// 主线程后启动，先启动子线程打印，再启动主线程打印</span>
<a id="__codelineno-24-12" name="__codelineno-24-12"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-13" name="__codelineno-24-13"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;主线程输出：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<a id="__codelineno-24-14" name="__codelineno-24-14"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-24-15" name="__codelineno-24-15"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-24-16" name="__codelineno-24-16"></a><span class="p">}</span>
<a id="__codelineno-24-17" name="__codelineno-24-17"></a>
<a id="__codelineno-24-18" name="__codelineno-24-18"></a><span class="c1">// 1、定义一个子类继承Thread类，成为一个线程类。</span>
<a id="__codelineno-24-19" name="__codelineno-24-19"></a><span class="kd">class</span> <span class="nc">MyThread</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Thread</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-20" name="__codelineno-24-20"></a><span class="w">    </span><span class="c1">// 2、重写Thread类的run方法</span>
<a id="__codelineno-24-21" name="__codelineno-24-21"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-24-22" name="__codelineno-24-22"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-23" name="__codelineno-24-23"></a><span class="w">        </span><span class="c1">// 3、在run方法中编写线程的任务代码（线程要干的活儿）</span>
<a id="__codelineno-24-24" name="__codelineno-24-24"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-25" name="__codelineno-24-25"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;子线程输出：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<a id="__codelineno-24-26" name="__codelineno-24-26"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-24-27" name="__codelineno-24-27"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-24-28" name="__codelineno-24-28"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="runnable">多线程的创建方式二：实现 Runnable 接口<a class="headerlink" href="#runnable" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p>定义一个线程任务类 MyRunnable 实现 Runnable 接口，重写 run()方法；</p>
</li>
<li>
<p>创建 MyRunnable 任务对象；</p>
</li>
<li>
<p>把 MyRunnable 任务对象交给 Thread 处理；</p>
<ul>
<li>
<table>
<thead>
<tr>
<th>Thread 类提供的构造器</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public Thread(Runnable target)</td>
<td>封装 Runnable 对象成为线程对象</td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>
<li>
<p>调用线程对象的 start()方法启动线程；</p>
</li>
</ol>
<h5 id="_23">方式二的优缺点：<a class="headerlink" href="#_23" title="Permanent link">&para;</a></h5>
<ul>
<li>优点：任务类只是实现接口，可以继续继承其他类、实现其他接口，扩展性强；</li>
<li>缺口：需要多一个 Runnable 对象；</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-25-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-25-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-25-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-25-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-25-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-25-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-25-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-25-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-25-10">10</a></span>
<span class="normal"><a href="#__codelineno-25-11">11</a></span>
<span class="normal"><a href="#__codelineno-25-12">12</a></span>
<span class="normal"><a href="#__codelineno-25-13">13</a></span>
<span class="normal"><a href="#__codelineno-25-14">14</a></span>
<span class="normal"><a href="#__codelineno-25-15">15</a></span>
<span class="normal"><a href="#__codelineno-25-16">16</a></span>
<span class="normal"><a href="#__codelineno-25-17">17</a></span>
<span class="normal"><a href="#__codelineno-25-18">18</a></span>
<span class="normal"><a href="#__codelineno-25-19">19</a></span>
<span class="normal"><a href="#__codelineno-25-20">20</a></span>
<span class="normal"><a href="#__codelineno-25-21">21</a></span>
<span class="normal"><a href="#__codelineno-25-22">22</a></span>
<span class="normal"><a href="#__codelineno-25-23">23</a></span>
<span class="normal"><a href="#__codelineno-25-24">24</a></span>
<span class="normal"><a href="#__codelineno-25-25">25</a></span>
<span class="normal"><a href="#__codelineno-25-26">26</a></span>
<span class="normal"><a href="#__codelineno-25-27">27</a></span>
<span class="normal"><a href="#__codelineno-25-28">28</a></span>
<span class="normal"><a href="#__codelineno-25-29">29</a></span>
<span class="normal"><a href="#__codelineno-25-30">30</a></span>
<span class="normal"><a href="#__codelineno-25-31">31</a></span>
<span class="normal"><a href="#__codelineno-25-32">32</a></span>
<span class="normal"><a href="#__codelineno-25-33">33</a></span>
<span class="normal"><a href="#__codelineno-25-34">34</a></span>
<span class="normal"><a href="#__codelineno-25-35">35</a></span>
<span class="normal"><a href="#__codelineno-25-36">36</a></span>
<span class="normal"><a href="#__codelineno-25-37">37</a></span>
<span class="normal"><a href="#__codelineno-25-38">38</a></span>
<span class="normal"><a href="#__codelineno-25-39">39</a></span>
<span class="normal"><a href="#__codelineno-25-40">40</a></span>
<span class="normal"><a href="#__codelineno-25-41">41</a></span>
<span class="normal"><a href="#__codelineno-25-42">42</a></span>
<span class="normal"><a href="#__codelineno-25-43">43</a></span>
<span class="normal"><a href="#__codelineno-25-44">44</a></span>
<span class="normal"><a href="#__codelineno-25-45">45</a></span>
<span class="normal"><a href="#__codelineno-25-46">46</a></span>
<span class="normal"><a href="#__codelineno-25-47">47</a></span>
<span class="normal"><a href="#__codelineno-25-48">48</a></span>
<span class="normal"><a href="#__codelineno-25-49">49</a></span>
<span class="normal"><a href="#__codelineno-25-50">50</a></span>
<span class="normal"><a href="#__codelineno-25-51">51</a></span>
<span class="normal"><a href="#__codelineno-25-52">52</a></span>
<span class="normal"><a href="#__codelineno-25-53">53</a></span>
<span class="normal"><a href="#__codelineno-25-54">54</a></span>
<span class="normal"><a href="#__codelineno-25-55">55</a></span>
<span class="normal"><a href="#__codelineno-25-56">56</a></span>
<span class="normal"><a href="#__codelineno-25-57">57</a></span>
<span class="normal"><a href="#__codelineno-25-58">58</a></span>
<span class="normal"><a href="#__codelineno-25-59">59</a></span>
<span class="normal"><a href="#__codelineno-25-60">60</a></span>
<span class="normal"><a href="#__codelineno-25-61">61</a></span>
<span class="normal"><a href="#__codelineno-25-62">62</a></span>
<span class="normal"><a href="#__codelineno-25-63">63</a></span>
<span class="normal"><a href="#__codelineno-25-64">64</a></span>
<span class="normal"><a href="#__codelineno-25-65">65</a></span>
<span class="normal"><a href="#__codelineno-25-66">66</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ThreadDemo2</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="w">        </span><span class="c1">// 目标：掌握多线程的创建方式二：实现Runnable接口来创建。</span>
<a id="__codelineno-25-4" name="__codelineno-25-4"></a><span class="w">        </span><span class="c1">// 3、创建线程任务类的对象代表一个线程任务。</span>
<a id="__codelineno-25-5" name="__codelineno-25-5"></a><span class="w">        </span><span class="n">Runnable</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyRunnable</span><span class="p">();</span>
<a id="__codelineno-25-6" name="__codelineno-25-6"></a><span class="w">        </span><span class="c1">// 4、把线程任务对象交给一个线程对象来处理</span>
<a id="__codelineno-25-7" name="__codelineno-25-7"></a><span class="w">        </span><span class="n">Thread</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Thread</span><span class="p">(</span><span class="n">r</span><span class="p">);</span><span class="w"> </span><span class="c1">// public Thread(Runnable r)</span>
<a id="__codelineno-25-8" name="__codelineno-25-8"></a><span class="w">        </span><span class="c1">// Thread t1 = new Thread(r, &quot;1号子线程&quot;); // public Thread(Runnable r,String name)</span>
<a id="__codelineno-25-9" name="__codelineno-25-9"></a><span class="w">        </span><span class="c1">// 5、启动线程</span>
<a id="__codelineno-25-10" name="__codelineno-25-10"></a><span class="w">        </span><span class="n">t1</span><span class="p">.</span><span class="na">start</span><span class="p">();</span>
<a id="__codelineno-25-11" name="__codelineno-25-11"></a>
<a id="__codelineno-25-12" name="__codelineno-25-12"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-13" name="__codelineno-25-13"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;主线程输出：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<a id="__codelineno-25-14" name="__codelineno-25-14"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-25-15" name="__codelineno-25-15"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-25-16" name="__codelineno-25-16"></a><span class="p">}</span>
<a id="__codelineno-25-17" name="__codelineno-25-17"></a>
<a id="__codelineno-25-18" name="__codelineno-25-18"></a><span class="c1">// 1、定义一个线程任务类实现Runnable接口</span>
<a id="__codelineno-25-19" name="__codelineno-25-19"></a><span class="kd">class</span> <span class="nc">MyRunnable</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Runnable</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-20" name="__codelineno-25-20"></a><span class="w">    </span><span class="c1">// 2、重写run方法，设置线程任务</span>
<a id="__codelineno-25-21" name="__codelineno-25-21"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-25-22" name="__codelineno-25-22"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-23" name="__codelineno-25-23"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-24" name="__codelineno-25-24"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;子线程输出：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<a id="__codelineno-25-25" name="__codelineno-25-25"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-25-26" name="__codelineno-25-26"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-25-27" name="__codelineno-25-27"></a><span class="p">}</span>
<a id="__codelineno-25-28" name="__codelineno-25-28"></a>
<a id="__codelineno-25-29" name="__codelineno-25-29"></a>
<a id="__codelineno-25-30" name="__codelineno-25-30"></a>
<a id="__codelineno-25-31" name="__codelineno-25-31"></a><span class="c1">// 用匿名内部类简化代码</span>
<a id="__codelineno-25-32" name="__codelineno-25-32"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ThreadDemo2_2</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-33" name="__codelineno-25-33"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-34" name="__codelineno-25-34"></a><span class="w">        </span><span class="c1">// 目标：掌握多线程的创建方式二：使用Runnable接口的匿名内部类来创建</span>
<a id="__codelineno-25-35" name="__codelineno-25-35"></a><span class="w">        </span><span class="c1">// Runnable是一个函数式接口，只有一个待实现方法Run，因此可以用匿名内部类来简化代码</span>
<a id="__codelineno-25-36" name="__codelineno-25-36"></a><span class="w">        </span><span class="n">Runnable</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Runnable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-37" name="__codelineno-25-37"></a><span class="w">            </span><span class="nd">@Override</span>
<a id="__codelineno-25-38" name="__codelineno-25-38"></a><span class="w">            </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-39" name="__codelineno-25-39"></a><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-40" name="__codelineno-25-40"></a><span class="w">                    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;子线程1输出：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<a id="__codelineno-25-41" name="__codelineno-25-41"></a><span class="w">                </span><span class="p">}</span>
<a id="__codelineno-25-42" name="__codelineno-25-42"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-25-43" name="__codelineno-25-43"></a><span class="w">        </span><span class="p">};</span>
<a id="__codelineno-25-44" name="__codelineno-25-44"></a><span class="w">        </span><span class="n">Thread</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Thread</span><span class="p">(</span><span class="n">r</span><span class="p">);</span><span class="w"> </span><span class="c1">// public Thread(Runnable r)</span>
<a id="__codelineno-25-45" name="__codelineno-25-45"></a><span class="w">        </span><span class="n">t1</span><span class="p">.</span><span class="na">start</span><span class="p">();</span>
<a id="__codelineno-25-46" name="__codelineno-25-46"></a>
<a id="__codelineno-25-47" name="__codelineno-25-47"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">Thread</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Runnable</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-48" name="__codelineno-25-48"></a><span class="w">            </span><span class="nd">@Override</span>
<a id="__codelineno-25-49" name="__codelineno-25-49"></a><span class="w">            </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-50" name="__codelineno-25-50"></a><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-51" name="__codelineno-25-51"></a><span class="w">                    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;子线程2输出：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<a id="__codelineno-25-52" name="__codelineno-25-52"></a><span class="w">                </span><span class="p">}</span>
<a id="__codelineno-25-53" name="__codelineno-25-53"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-25-54" name="__codelineno-25-54"></a><span class="w">        </span><span class="p">}).</span><span class="na">start</span><span class="p">();</span>
<a id="__codelineno-25-55" name="__codelineno-25-55"></a>
<a id="__codelineno-25-56" name="__codelineno-25-56"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">Thread</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-57" name="__codelineno-25-57"></a><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-58" name="__codelineno-25-58"></a><span class="w">                    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;子线程3输出：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<a id="__codelineno-25-59" name="__codelineno-25-59"></a><span class="w">                </span><span class="p">}</span>
<a id="__codelineno-25-60" name="__codelineno-25-60"></a><span class="w">        </span><span class="p">}).</span><span class="na">start</span><span class="p">();</span>
<a id="__codelineno-25-61" name="__codelineno-25-61"></a>
<a id="__codelineno-25-62" name="__codelineno-25-62"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-25-63" name="__codelineno-25-63"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;主线程输出：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<a id="__codelineno-25-64" name="__codelineno-25-64"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-25-65" name="__codelineno-25-65"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-25-66" name="__codelineno-25-66"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="callable">线程的创建方式三：实现 Callable 接口<a class="headerlink" href="#callable" title="Permanent link">&para;</a></h4>
<blockquote>
<p><span style="color:#d59bf6;">前两种线程创建方式都存在的一个问题：如果线程执行完毕后有一些数据需要返回，它们重写的run方法均不能直接返回结果</span></p>
</blockquote>
<p>解决方式：</p>
<ul>
<li>JDK5.0 提供了 Callable 接口和 FutureTask 类来实现（多线程的第三种创建方式）</li>
<li>
<p>这种方式最大的优点：可以返回线程执行完毕后的结果；</p>
</li>
<li>
<p>创建任务对象</p>
<ul>
<li>定义一个类实现 Callable 接口，重写 call 方法，封装该线程任务要做的事情，和要返回的数据；</li>
<li>把 Callable 类型的对象封装成 FutureTask（线程任务对象），<code>public FutureTask(Callable&lt;V&gt; callable)</code></li>
</ul>
</li>
<li>把线程任务交给 Thread 对象；</li>
<li>调用 Thread 对象的 start 方法启动线程；</li>
<li>线程执行完毕后，通过 FutureTask 对象的 get 方法去获取任务执行的结果；</li>
</ul>
<p>FutureTask 的 API</p>
<table>
<thead>
<tr>
<th>FutureTask 提供的构造器</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public <strong>FutureTask</strong> &lt;&gt;(Callable call)</td>
<td>把 Callable 对象封装成 FutureTask 对象。</td>
</tr>
<tr>
<td>public V <strong>get()</strong> throws Exception</td>
<td>获取线程执行 call 方法返回的结果。</td>
</tr>
</tbody>
</table>
<h5 id="_24">线程创建方式三的优缺点：<a class="headerlink" href="#_24" title="Permanent link">&para;</a></h5>
<ul>
<li>优点：线程任务类只是实现 Callable 接口，可以继续继承类和实现其他接口，扩展性强；<strong>可以在线程执行完毕后去获取线程执行的结果；</strong></li>
<li>缺点：编码复杂一点；</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-26-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-26-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-26-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-26-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-26-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-26-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-26-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-26-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-26-10">10</a></span>
<span class="normal"><a href="#__codelineno-26-11">11</a></span>
<span class="normal"><a href="#__codelineno-26-12">12</a></span>
<span class="normal"><a href="#__codelineno-26-13">13</a></span>
<span class="normal"><a href="#__codelineno-26-14">14</a></span>
<span class="normal"><a href="#__codelineno-26-15">15</a></span>
<span class="normal"><a href="#__codelineno-26-16">16</a></span>
<span class="normal"><a href="#__codelineno-26-17">17</a></span>
<span class="normal"><a href="#__codelineno-26-18">18</a></span>
<span class="normal"><a href="#__codelineno-26-19">19</a></span>
<span class="normal"><a href="#__codelineno-26-20">20</a></span>
<span class="normal"><a href="#__codelineno-26-21">21</a></span>
<span class="normal"><a href="#__codelineno-26-22">22</a></span>
<span class="normal"><a href="#__codelineno-26-23">23</a></span>
<span class="normal"><a href="#__codelineno-26-24">24</a></span>
<span class="normal"><a href="#__codelineno-26-25">25</a></span>
<span class="normal"><a href="#__codelineno-26-26">26</a></span>
<span class="normal"><a href="#__codelineno-26-27">27</a></span>
<span class="normal"><a href="#__codelineno-26-28">28</a></span>
<span class="normal"><a href="#__codelineno-26-29">29</a></span>
<span class="normal"><a href="#__codelineno-26-30">30</a></span>
<span class="normal"><a href="#__codelineno-26-31">31</a></span>
<span class="normal"><a href="#__codelineno-26-32">32</a></span>
<span class="normal"><a href="#__codelineno-26-33">33</a></span>
<span class="normal"><a href="#__codelineno-26-34">34</a></span>
<span class="normal"><a href="#__codelineno-26-35">35</a></span>
<span class="normal"><a href="#__codelineno-26-36">36</a></span>
<span class="normal"><a href="#__codelineno-26-37">37</a></span>
<span class="normal"><a href="#__codelineno-26-38">38</a></span>
<span class="normal"><a href="#__codelineno-26-39">39</a></span>
<span class="normal"><a href="#__codelineno-26-40">40</a></span>
<span class="normal"><a href="#__codelineno-26-41">41</a></span>
<span class="normal"><a href="#__codelineno-26-42">42</a></span>
<span class="normal"><a href="#__codelineno-26-43">43</a></span>
<span class="normal"><a href="#__codelineno-26-44">44</a></span>
<span class="normal"><a href="#__codelineno-26-45">45</a></span>
<span class="normal"><a href="#__codelineno-26-46">46</a></span>
<span class="normal"><a href="#__codelineno-26-47">47</a></span>
<span class="normal"><a href="#__codelineno-26-48">48</a></span>
<span class="normal"><a href="#__codelineno-26-49">49</a></span>
<span class="normal"><a href="#__codelineno-26-50">50</a></span>
<span class="normal"><a href="#__codelineno-26-51">51</a></span>
<span class="normal"><a href="#__codelineno-26-52">52</a></span>
<span class="normal"><a href="#__codelineno-26-53">53</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ThreadDemo3</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="w">        </span><span class="c1">// 目标：掌握多线程的创建方式三：实现Callable接口，方式三的优势：可以获取线程执行完毕后的结果的。</span>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="w">        </span><span class="c1">// 3、创建一个Callable接口的实现类对象。n=100是类的初始化参数，表示求1到100的和</span>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="w">        </span><span class="n">Callable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyCallable</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
<a id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="w">        </span><span class="c1">// 4、把Callable对象封装成一个真正的线程任务对象FutureTask对象。</span>
<a id="__codelineno-26-7" name="__codelineno-26-7"></a><span class="w">        </span><span class="cm">/**</span>
<a id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="cm">         * 未来任务对象的作用？</span>
<a id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="cm">         *    a、本质是一个Runnable线程任务对象，可以交给Thread线程对象处理。</span>
<a id="__codelineno-26-10" name="__codelineno-26-10"></a><span class="cm">         *    b、可以获取线程执行完毕后的结果。</span>
<a id="__codelineno-26-11" name="__codelineno-26-11"></a><span class="cm">         */</span>
<a id="__codelineno-26-12" name="__codelineno-26-12"></a><span class="w">        </span><span class="n">FutureTask</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">f1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FutureTask</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">c1</span><span class="p">);</span><span class="w"> </span><span class="c1">// public FutureTask(Callable&lt;V&gt; callable)</span>
<a id="__codelineno-26-13" name="__codelineno-26-13"></a><span class="w">        </span><span class="c1">// 5、把FutureTask对象作为参数传递给Thread线程对象。</span>
<a id="__codelineno-26-14" name="__codelineno-26-14"></a><span class="w">        </span><span class="n">Thread</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Thread</span><span class="p">(</span><span class="n">f1</span><span class="p">);</span>
<a id="__codelineno-26-15" name="__codelineno-26-15"></a><span class="w">        </span><span class="c1">// 6、启动线程。</span>
<a id="__codelineno-26-16" name="__codelineno-26-16"></a><span class="w">        </span><span class="n">t1</span><span class="p">.</span><span class="na">start</span><span class="p">();</span>
<a id="__codelineno-26-17" name="__codelineno-26-17"></a>
<a id="__codelineno-26-18" name="__codelineno-26-18"></a><span class="w">        </span><span class="n">Callable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">c2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyCallable</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span>
<a id="__codelineno-26-19" name="__codelineno-26-19"></a><span class="w">        </span><span class="n">FutureTask</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">f2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FutureTask</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">c2</span><span class="p">);</span><span class="w"> </span><span class="c1">// public FutureTask(Callable&lt;V&gt; callable)</span>
<a id="__codelineno-26-20" name="__codelineno-26-20"></a><span class="w">        </span><span class="n">Thread</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Thread</span><span class="p">(</span><span class="n">f2</span><span class="p">);</span>
<a id="__codelineno-26-21" name="__codelineno-26-21"></a><span class="w">        </span><span class="n">t2</span><span class="p">.</span><span class="na">start</span><span class="p">();</span>
<a id="__codelineno-26-22" name="__codelineno-26-22"></a>
<a id="__codelineno-26-23" name="__codelineno-26-23"></a><span class="w">        </span><span class="c1">// 获取线程执行完毕后返回的结果</span>
<a id="__codelineno-26-24" name="__codelineno-26-24"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-25" name="__codelineno-26-25"></a><span class="w">            </span><span class="c1">// 如果主线程发现第一个线程还没有执行完毕，会让出CPU，等第一个线程执行完毕后，才会往下执行！</span>
<a id="__codelineno-26-26" name="__codelineno-26-26"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f1</span><span class="p">.</span><span class="na">get</span><span class="p">());</span>
<a id="__codelineno-26-27" name="__codelineno-26-27"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-28" name="__codelineno-26-28"></a><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-26-29" name="__codelineno-26-29"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-26-30" name="__codelineno-26-30"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-31" name="__codelineno-26-31"></a><span class="w">            </span><span class="c1">// 如果主线程发现第二个线程还没有执行完毕，会让出CPU，等第一个线程执行完毕后，才会往下执行！</span>
<a id="__codelineno-26-32" name="__codelineno-26-32"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f2</span><span class="p">.</span><span class="na">get</span><span class="p">());</span>
<a id="__codelineno-26-33" name="__codelineno-26-33"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-34" name="__codelineno-26-34"></a><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-26-35" name="__codelineno-26-35"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-26-36" name="__codelineno-26-36"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-26-37" name="__codelineno-26-37"></a><span class="p">}</span>
<a id="__codelineno-26-38" name="__codelineno-26-38"></a>
<a id="__codelineno-26-39" name="__codelineno-26-39"></a><span class="c1">// 1、定义一个实现类实现Callable接口</span>
<a id="__codelineno-26-40" name="__codelineno-26-40"></a><span class="kd">class</span> <span class="nc">MyCallable</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Callable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-41" name="__codelineno-26-41"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">;</span>
<a id="__codelineno-26-42" name="__codelineno-26-42"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">MyCallable</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-43" name="__codelineno-26-43"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">n</span><span class="p">;</span>
<a id="__codelineno-26-44" name="__codelineno-26-44"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-26-45" name="__codelineno-26-45"></a><span class="w">    </span><span class="c1">// 2、实现call方法，定义线程执行体</span>
<a id="__codelineno-26-46" name="__codelineno-26-46"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">call</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-47" name="__codelineno-26-47"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-26-48" name="__codelineno-26-48"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-26-49" name="__codelineno-26-49"></a><span class="w">            </span><span class="n">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<a id="__codelineno-26-50" name="__codelineno-26-50"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-26-51" name="__codelineno-26-51"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;子线程计算1-&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;的和是：&quot;</span><span class="w">  </span><span class="o">+</span><span class="w"> </span><span class="n">sum</span><span class="p">;</span>
<a id="__codelineno-26-52" name="__codelineno-26-52"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-26-53" name="__codelineno-26-53"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="_25">总结三种线程创建方式的优缺点对比：<a class="headerlink" href="#_25" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>方式</th>
<th>优点</th>
<th>缺点</th>
</tr>
</thead>
<tbody>
<tr>
<td>继承 Thread 类</td>
<td>编程比较简单，可以直接使用 Thread 类中的方法</td>
<td>扩展性较差，不能再继承其他的类，不能返回线程执行的结果</td>
</tr>
<tr>
<td>实现 Runnable 接口</td>
<td>扩展性强，实现该接口的同时还可以继承其他的类。</td>
<td>编程相对复杂，不能返回线程执行的结果</td>
</tr>
<tr>
<td>实现 Callable 接口</td>
<td>扩展性强，实现该接口的同时还可以继承其他的类。可以得到线程执行的结果</td>
<td>编程相对复杂</td>
</tr>
</tbody>
</table>
<hr />
<p>Thread 的常用方法：</p>
<table>
<thead>
<tr>
<th>Thread 提供的常用方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public void <strong>run()</strong></td>
<td>线程的任务方法</td>
</tr>
<tr>
<td>public void <strong>start()</strong></td>
<td>启动线程</td>
</tr>
<tr>
<td>public String <strong>getName()</strong></td>
<td>获取当前线程的名称，线程名称默认是 Thread-索引</td>
</tr>
<tr>
<td>public void <strong>setName(String name)</strong></td>
<td>为线程设置名称</td>
</tr>
<tr>
<td>public static Thread <strong>currentThread()</strong></td>
<td>获取当前执行的线程对象</td>
</tr>
<tr>
<td>public static void <strong>sleep(long time)</strong></td>
<td>让当前执行的线程休眠多少毫秒后，再继续执行</td>
</tr>
<tr>
<td>public final void <strong>join()</strong></td>
<td>让调用当前这个方法的线程先执行完！</td>
</tr>
</tbody>
</table>
<p>示例代码：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-27-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-27-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-27-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-27-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-27-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-27-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-27-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-27-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-27-10">10</a></span>
<span class="normal"><a href="#__codelineno-27-11">11</a></span>
<span class="normal"><a href="#__codelineno-27-12">12</a></span>
<span class="normal"><a href="#__codelineno-27-13">13</a></span>
<span class="normal"><a href="#__codelineno-27-14">14</a></span>
<span class="normal"><a href="#__codelineno-27-15">15</a></span>
<span class="normal"><a href="#__codelineno-27-16">16</a></span>
<span class="normal"><a href="#__codelineno-27-17">17</a></span>
<span class="normal"><a href="#__codelineno-27-18">18</a></span>
<span class="normal"><a href="#__codelineno-27-19">19</a></span>
<span class="normal"><a href="#__codelineno-27-20">20</a></span>
<span class="normal"><a href="#__codelineno-27-21">21</a></span>
<span class="normal"><a href="#__codelineno-27-22">22</a></span>
<span class="normal"><a href="#__codelineno-27-23">23</a></span>
<span class="normal"><a href="#__codelineno-27-24">24</a></span>
<span class="normal"><a href="#__codelineno-27-25">25</a></span>
<span class="normal"><a href="#__codelineno-27-26">26</a></span>
<span class="normal"><a href="#__codelineno-27-27">27</a></span>
<span class="normal"><a href="#__codelineno-27-28">28</a></span>
<span class="normal"><a href="#__codelineno-27-29">29</a></span>
<span class="normal"><a href="#__codelineno-27-30">30</a></span>
<span class="normal"><a href="#__codelineno-27-31">31</a></span>
<span class="normal"><a href="#__codelineno-27-32">32</a></span>
<span class="normal"><a href="#__codelineno-27-33">33</a></span>
<span class="normal"><a href="#__codelineno-27-34">34</a></span>
<span class="normal"><a href="#__codelineno-27-35">35</a></span>
<span class="normal"><a href="#__codelineno-27-36">36</a></span>
<span class="normal"><a href="#__codelineno-27-37">37</a></span>
<span class="normal"><a href="#__codelineno-27-38">38</a></span>
<span class="normal"><a href="#__codelineno-27-39">39</a></span>
<span class="normal"><a href="#__codelineno-27-40">40</a></span>
<span class="normal"><a href="#__codelineno-27-41">41</a></span>
<span class="normal"><a href="#__codelineno-27-42">42</a></span>
<span class="normal"><a href="#__codelineno-27-43">43</a></span>
<span class="normal"><a href="#__codelineno-27-44">44</a></span>
<span class="normal"><a href="#__codelineno-27-45">45</a></span>
<span class="normal"><a href="#__codelineno-27-46">46</a></span>
<span class="normal"><a href="#__codelineno-27-47">47</a></span>
<span class="normal"><a href="#__codelineno-27-48">48</a></span>
<span class="normal"><a href="#__codelineno-27-49">49</a></span>
<span class="normal"><a href="#__codelineno-27-50">50</a></span>
<span class="normal"><a href="#__codelineno-27-51">51</a></span>
<span class="normal"><a href="#__codelineno-27-52">52</a></span>
<span class="normal"><a href="#__codelineno-27-53">53</a></span>
<span class="normal"><a href="#__codelineno-27-54">54</a></span>
<span class="normal"><a href="#__codelineno-27-55">55</a></span>
<span class="normal"><a href="#__codelineno-27-56">56</a></span>
<span class="normal"><a href="#__codelineno-27-57">57</a></span>
<span class="normal"><a href="#__codelineno-27-58">58</a></span>
<span class="normal"><a href="#__codelineno-27-59">59</a></span>
<span class="normal"><a href="#__codelineno-27-60">60</a></span>
<span class="normal"><a href="#__codelineno-27-61">61</a></span>
<span class="normal"><a href="#__codelineno-27-62">62</a></span>
<span class="normal"><a href="#__codelineno-27-63">63</a></span>
<span class="normal"><a href="#__codelineno-27-64">64</a></span>
<span class="normal"><a href="#__codelineno-27-65">65</a></span>
<span class="normal"><a href="#__codelineno-27-66">66</a></span>
<span class="normal"><a href="#__codelineno-27-67">67</a></span>
<span class="normal"><a href="#__codelineno-27-68">68</a></span>
<span class="normal"><a href="#__codelineno-27-69">69</a></span>
<span class="normal"><a href="#__codelineno-27-70">70</a></span>
<span class="normal"><a href="#__codelineno-27-71">71</a></span>
<span class="normal"><a href="#__codelineno-27-72">72</a></span>
<span class="normal"><a href="#__codelineno-27-73">73</a></span>
<span class="normal"><a href="#__codelineno-27-74">74</a></span>
<span class="normal"><a href="#__codelineno-27-75">75</a></span>
<span class="normal"><a href="#__codelineno-27-76">76</a></span>
<span class="normal"><a href="#__codelineno-27-77">77</a></span>
<span class="normal"><a href="#__codelineno-27-78">78</a></span>
<span class="normal"><a href="#__codelineno-27-79">79</a></span>
<span class="normal"><a href="#__codelineno-27-80">80</a></span>
<span class="normal"><a href="#__codelineno-27-81">81</a></span>
<span class="normal"><a href="#__codelineno-27-82">82</a></span>
<span class="normal"><a href="#__codelineno-27-83">83</a></span>
<span class="normal"><a href="#__codelineno-27-84">84</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="c1">// 演示设置和获取线程名称</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ThreadApiDemo1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-4" name="__codelineno-27-4"></a><span class="w">        </span><span class="c1">// 目标：搞清楚线程的常用方法。</span>
<a id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="w">        </span><span class="n">Thread</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyThread</span><span class="p">(</span><span class="s">&quot;1号线程&quot;</span><span class="p">);</span>
<a id="__codelineno-27-6" name="__codelineno-27-6"></a><span class="w">        </span><span class="c1">// t1.setName(&quot;1号线程&quot;);</span>
<a id="__codelineno-27-7" name="__codelineno-27-7"></a><span class="w">        </span><span class="n">t1</span><span class="p">.</span><span class="na">start</span><span class="p">();</span>
<a id="__codelineno-27-8" name="__codelineno-27-8"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">t1</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w"> </span><span class="c1">// 线程默认名称是：Thread-索引</span>
<a id="__codelineno-27-9" name="__codelineno-27-9"></a>
<a id="__codelineno-27-10" name="__codelineno-27-10"></a><span class="w">        </span><span class="n">Thread</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyThread</span><span class="p">(</span><span class="s">&quot;2号线程&quot;</span><span class="p">);</span>
<a id="__codelineno-27-11" name="__codelineno-27-11"></a><span class="w">        </span><span class="c1">// t2.setName(&quot;2号线程&quot;);</span>
<a id="__codelineno-27-12" name="__codelineno-27-12"></a><span class="w">        </span><span class="n">t2</span><span class="p">.</span><span class="na">start</span><span class="p">();</span>
<a id="__codelineno-27-13" name="__codelineno-27-13"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">t2</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w"> </span><span class="c1">// 线程默认名称是：Thread-索引</span>
<a id="__codelineno-27-14" name="__codelineno-27-14"></a>
<a id="__codelineno-27-15" name="__codelineno-27-15"></a><span class="w">        </span><span class="c1">// 哪个线程调用这个代码，这个代码就拿到哪个线程</span>
<a id="__codelineno-27-16" name="__codelineno-27-16"></a><span class="w">        </span><span class="n">Thread</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">();</span><span class="w"> </span><span class="c1">// 主线程</span>
<a id="__codelineno-27-17" name="__codelineno-27-17"></a><span class="w">        </span><span class="n">m</span><span class="p">.</span><span class="na">setName</span><span class="p">(</span><span class="s">&quot;主线程&quot;</span><span class="p">);</span>
<a id="__codelineno-27-18" name="__codelineno-27-18"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w"> </span><span class="c1">// main</span>
<a id="__codelineno-27-19" name="__codelineno-27-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-27-20" name="__codelineno-27-20"></a><span class="p">}</span>
<a id="__codelineno-27-21" name="__codelineno-27-21"></a>
<a id="__codelineno-27-22" name="__codelineno-27-22"></a><span class="c1">// 1、定义一个子类继承Thread类，成为一个线程类。</span>
<a id="__codelineno-27-23" name="__codelineno-27-23"></a><span class="kd">class</span> <span class="nc">MyThread</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Thread</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-24" name="__codelineno-27-24"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">MyThread</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-25" name="__codelineno-27-25"></a><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">name</span><span class="p">);</span><span class="w"> </span><span class="c1">// public Thread(String name)</span>
<a id="__codelineno-27-26" name="__codelineno-27-26"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-27-27" name="__codelineno-27-27"></a>
<a id="__codelineno-27-28" name="__codelineno-27-28"></a><span class="w">    </span><span class="c1">// 2、重写Thread类的run方法</span>
<a id="__codelineno-27-29" name="__codelineno-27-29"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-27-30" name="__codelineno-27-30"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-31" name="__codelineno-27-31"></a><span class="w">        </span><span class="c1">// 3、在run方法中编写线程的任务代码（线程要干的活儿）</span>
<a id="__codelineno-27-32" name="__codelineno-27-32"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-33" name="__codelineno-27-33"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="s">&quot;子线程输出：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<a id="__codelineno-27-34" name="__codelineno-27-34"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-27-35" name="__codelineno-27-35"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-27-36" name="__codelineno-27-36"></a><span class="p">}</span>
<a id="__codelineno-27-37" name="__codelineno-27-37"></a>
<a id="__codelineno-27-38" name="__codelineno-27-38"></a><span class="c1">// 演示线程的休眠方法</span>
<a id="__codelineno-27-39" name="__codelineno-27-39"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ThreadApiDemo2</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-40" name="__codelineno-27-40"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-41" name="__codelineno-27-41"></a><span class="w">        </span><span class="c1">// 目标：搞清楚Thread类的Sleep方法（线程休眠）</span>
<a id="__codelineno-27-42" name="__codelineno-27-42"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-43" name="__codelineno-27-43"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<a id="__codelineno-27-44" name="__codelineno-27-44"></a><span class="w">            </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-45" name="__codelineno-27-45"></a><span class="w">                </span><span class="c1">// 让当前执行的线程进入休眠状态，直到时间到了，才会继续执行。</span>
<a id="__codelineno-27-46" name="__codelineno-27-46"></a><span class="w">                </span><span class="c1">// 项目经理让我加上这行代码，如果用户交钱了，我就注释掉。</span>
<a id="__codelineno-27-47" name="__codelineno-27-47"></a><span class="w">                </span><span class="c1">// 默认是主线程</span>
<a id="__codelineno-27-48" name="__codelineno-27-48"></a><span class="w">                </span><span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span><span class="w"> </span><span class="c1">// 1000ms = 1s</span>
<a id="__codelineno-27-49" name="__codelineno-27-49"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-50" name="__codelineno-27-50"></a><span class="w">                </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-27-51" name="__codelineno-27-51"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-27-52" name="__codelineno-27-52"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-27-53" name="__codelineno-27-53"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-27-54" name="__codelineno-27-54"></a><span class="p">}</span>
<a id="__codelineno-27-55" name="__codelineno-27-55"></a>
<a id="__codelineno-27-56" name="__codelineno-27-56"></a><span class="c1">// 演示线程的插队方法join</span>
<a id="__codelineno-27-57" name="__codelineno-27-57"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ThreadApiDemo3</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-58" name="__codelineno-27-58"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-59" name="__codelineno-27-59"></a><span class="w">        </span><span class="c1">// 目标：搞清楚线程的join方法：线程插队：让调用这个方法线程先执行完毕。</span>
<a id="__codelineno-27-60" name="__codelineno-27-60"></a><span class="w">        </span><span class="n">MyThread2</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyThread2</span><span class="p">();</span>
<a id="__codelineno-27-61" name="__codelineno-27-61"></a><span class="w">        </span><span class="n">t1</span><span class="p">.</span><span class="na">start</span><span class="p">();</span>
<a id="__codelineno-27-62" name="__codelineno-27-62"></a>
<a id="__codelineno-27-63" name="__codelineno-27-63"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-64" name="__codelineno-27-64"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="s">&quot;线程输出：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<a id="__codelineno-27-65" name="__codelineno-27-65"></a><span class="w">            </span><span class="c1">// main线程只要执行到1，就会调用t1线程的join方法，插队，让t1线程先打印，然后继续执行主线程</span>
<a id="__codelineno-27-66" name="__codelineno-27-66"></a><span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">){</span>
<a id="__codelineno-27-67" name="__codelineno-27-67"></a><span class="w">                </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-68" name="__codelineno-27-68"></a><span class="w">                    </span><span class="n">t1</span><span class="p">.</span><span class="na">join</span><span class="p">();</span><span class="w"> </span><span class="c1">// 插队 让t1线程先执行完毕，然后继续执行主线程</span>
<a id="__codelineno-27-69" name="__codelineno-27-69"></a><span class="w">                </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-70" name="__codelineno-27-70"></a><span class="w">                    </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-27-71" name="__codelineno-27-71"></a><span class="w">                </span><span class="p">}</span>
<a id="__codelineno-27-72" name="__codelineno-27-72"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-27-73" name="__codelineno-27-73"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-27-74" name="__codelineno-27-74"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-27-75" name="__codelineno-27-75"></a><span class="p">}</span>
<a id="__codelineno-27-76" name="__codelineno-27-76"></a>
<a id="__codelineno-27-77" name="__codelineno-27-77"></a><span class="kd">class</span> <span class="nc">MyThread2</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Thread</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-78" name="__codelineno-27-78"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-27-79" name="__codelineno-27-79"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-80" name="__codelineno-27-80"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-27-81" name="__codelineno-27-81"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="s">&quot;子线程输出：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<a id="__codelineno-27-82" name="__codelineno-27-82"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-27-83" name="__codelineno-27-83"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-27-84" name="__codelineno-27-84"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>Thread 提供的常见的构造器：</p>
<table>
<thead>
<tr>
<th>Thread 提供的常见构造器</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public Thread(String name)</td>
<td>可以为当前线程指定名称</td>
</tr>
<tr>
<td>public Thread(Runnable target)</td>
<td>封装 Runnable 对象成为线程对象</td>
</tr>
<tr>
<td>public Thread(Runnable target, String name)</td>
<td>封装 Runnable 对象成为线程对象，并指定线程名称</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Thread 类还提供了诸如：yield、interrupt、守护线程、线程优先级等线程的控制方法，在开发中很少使用，这些方法会后续需要用到的时候再讲解。</p>
</blockquote>
<h3 id="_26">什么是线程安全问题？<a class="headerlink" href="#_26" title="Permanent link">&para;</a></h3>
<ul>
<li>多个线程，同时操作同一个共享资源的时候，可能会出现业务安全问题；</li>
</ul>
<p>举例：取钱的线程安全问题</p>
<ul>
<li>场景：小明和小红是一对夫妻，他们有一个共同的账户，余额是 10 万元，如果小明和小红同时来取钱，并且 2 人各自都在取钱 10 万元，可能会出现什么问题呢？</li>
</ul>
<p><img alt="取钱的线程安全问题" src="https://cdn.jsdelivr.net/gh/Gongzihang6/Pictures@main/Medias/medias%2F2025%2F07%2Fimage-20250617122519746.png" /></p>
<p>线程安全问题出现的原因？</p>
<ul>
<li>存在 <strong>多个线程</strong> 同时执行；</li>
<li>同时访问同一个 <strong>共享资源</strong>；</li>
<li>存在 <strong>修改</strong> 该共享资源；</li>
</ul>
<p><strong>模拟线程安全问题的场景：取钱</strong></p>
<p>示例代码：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-28-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-28-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-28-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-28-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-28-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-28-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-28-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-28-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-28-10">10</a></span>
<span class="normal"><a href="#__codelineno-28-11">11</a></span>
<span class="normal"><a href="#__codelineno-28-12">12</a></span>
<span class="normal"><a href="#__codelineno-28-13">13</a></span>
<span class="normal"><a href="#__codelineno-28-14">14</a></span>
<span class="normal"><a href="#__codelineno-28-15">15</a></span>
<span class="normal"><a href="#__codelineno-28-16">16</a></span>
<span class="normal"><a href="#__codelineno-28-17">17</a></span>
<span class="normal"><a href="#__codelineno-28-18">18</a></span>
<span class="normal"><a href="#__codelineno-28-19">19</a></span>
<span class="normal"><a href="#__codelineno-28-20">20</a></span>
<span class="normal"><a href="#__codelineno-28-21">21</a></span>
<span class="normal"><a href="#__codelineno-28-22">22</a></span>
<span class="normal"><a href="#__codelineno-28-23">23</a></span>
<span class="normal"><a href="#__codelineno-28-24">24</a></span>
<span class="normal"><a href="#__codelineno-28-25">25</a></span>
<span class="normal"><a href="#__codelineno-28-26">26</a></span>
<span class="normal"><a href="#__codelineno-28-27">27</a></span>
<span class="normal"><a href="#__codelineno-28-28">28</a></span>
<span class="normal"><a href="#__codelineno-28-29">29</a></span>
<span class="normal"><a href="#__codelineno-28-30">30</a></span>
<span class="normal"><a href="#__codelineno-28-31">31</a></span>
<span class="normal"><a href="#__codelineno-28-32">32</a></span>
<span class="normal"><a href="#__codelineno-28-33">33</a></span>
<span class="normal"><a href="#__codelineno-28-34">34</a></span>
<span class="normal"><a href="#__codelineno-28-35">35</a></span>
<span class="normal"><a href="#__codelineno-28-36">36</a></span>
<span class="normal"><a href="#__codelineno-28-37">37</a></span>
<span class="normal"><a href="#__codelineno-28-38">38</a></span>
<span class="normal"><a href="#__codelineno-28-39">39</a></span>
<span class="normal"><a href="#__codelineno-28-40">40</a></span>
<span class="normal"><a href="#__codelineno-28-41">41</a></span>
<span class="normal"><a href="#__codelineno-28-42">42</a></span>
<span class="normal"><a href="#__codelineno-28-43">43</a></span>
<span class="normal"><a href="#__codelineno-28-44">44</a></span>
<span class="normal"><a href="#__codelineno-28-45">45</a></span>
<span class="normal"><a href="#__codelineno-28-46">46</a></span>
<span class="normal"><a href="#__codelineno-28-47">47</a></span>
<span class="normal"><a href="#__codelineno-28-48">48</a></span>
<span class="normal"><a href="#__codelineno-28-49">49</a></span>
<span class="normal"><a href="#__codelineno-28-50">50</a></span>
<span class="normal"><a href="#__codelineno-28-51">51</a></span>
<span class="normal"><a href="#__codelineno-28-52">52</a></span>
<span class="normal"><a href="#__codelineno-28-53">53</a></span>
<span class="normal"><a href="#__codelineno-28-54">54</a></span>
<span class="normal"><a href="#__codelineno-28-55">55</a></span>
<span class="normal"><a href="#__codelineno-28-56">56</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="c1">// 主类</span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ThreadDemo1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="w">        </span><span class="c1">// 目标：模拟线程安全问题。</span>
<a id="__codelineno-28-5" name="__codelineno-28-5"></a><span class="w">        </span><span class="c1">// 1、设计一个账户类：用于创建小明和小红的共同账户对象，存入10万。</span>
<a id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="w">        </span><span class="n">Account</span><span class="w"> </span><span class="n">acc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Account</span><span class="p">(</span><span class="s">&quot;ICBC-110&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">100000</span><span class="p">);</span>
<a id="__codelineno-28-7" name="__codelineno-28-7"></a>
<a id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="w">        </span><span class="c1">// 2、设计线程类：创建小明和小红两个线程，模拟小明和小红同时去同一个账户取款10万。</span>
<a id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">DrawThread</span><span class="p">(</span><span class="s">&quot;小明&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">acc</span><span class="p">).</span><span class="na">start</span><span class="p">();</span>
<a id="__codelineno-28-10" name="__codelineno-28-10"></a><span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">DrawThread</span><span class="p">(</span><span class="s">&quot;小红&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">acc</span><span class="p">).</span><span class="na">start</span><span class="p">();</span>
<a id="__codelineno-28-11" name="__codelineno-28-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-28-12" name="__codelineno-28-12"></a><span class="p">}</span>
<a id="__codelineno-28-13" name="__codelineno-28-13"></a>
<a id="__codelineno-28-14" name="__codelineno-28-14"></a><span class="c1">// 模拟银行账户类</span>
<a id="__codelineno-28-15" name="__codelineno-28-15"></a><span class="nd">@Data</span>
<a id="__codelineno-28-16" name="__codelineno-28-16"></a><span class="nd">@AllArgsConstructor</span>
<a id="__codelineno-28-17" name="__codelineno-28-17"></a><span class="nd">@NoArgsConstructor</span>
<a id="__codelineno-28-18" name="__codelineno-28-18"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Account</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-19" name="__codelineno-28-19"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">cardId</span><span class="p">;</span><span class="w"> </span><span class="c1">// 卡号</span>
<a id="__codelineno-28-20" name="__codelineno-28-20"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">;</span><span class="w"> </span><span class="c1">// 余额</span>
<a id="__codelineno-28-21" name="__codelineno-28-21"></a>
<a id="__codelineno-28-22" name="__codelineno-28-22"></a><span class="w">    </span><span class="c1">// 小明和小红都到这里来了取钱</span>
<a id="__codelineno-28-23" name="__codelineno-28-23"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">drawMoney</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-24" name="__codelineno-28-24"></a><span class="w">        </span><span class="c1">// 拿到当前谁来取钱。</span>
<a id="__codelineno-28-25" name="__codelineno-28-25"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">();</span>
<a id="__codelineno-28-26" name="__codelineno-28-26"></a><span class="w">        </span><span class="c1">// 判断余额是否足够</span>
<a id="__codelineno-28-27" name="__codelineno-28-27"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">money</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-28" name="__codelineno-28-28"></a><span class="w">            </span><span class="c1">// 余额足够，取钱</span>
<a id="__codelineno-28-29" name="__codelineno-28-29"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;取钱成功，吐出了&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">money</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;元成功！&quot;</span><span class="p">);</span>
<a id="__codelineno-28-30" name="__codelineno-28-30"></a><span class="w">            </span><span class="c1">// 更新余额</span>
<a id="__codelineno-28-31" name="__codelineno-28-31"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">money</span><span class="p">;</span>
<a id="__codelineno-28-32" name="__codelineno-28-32"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;取钱成功，取钱后，余额剩余&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;元&quot;</span><span class="p">);</span>
<a id="__codelineno-28-33" name="__codelineno-28-33"></a>
<a id="__codelineno-28-34" name="__codelineno-28-34"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-35" name="__codelineno-28-35"></a><span class="w">            </span><span class="c1">// 余额不足</span>
<a id="__codelineno-28-36" name="__codelineno-28-36"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;取钱失败，余额不足&quot;</span><span class="p">);</span>
<a id="__codelineno-28-37" name="__codelineno-28-37"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-28-38" name="__codelineno-28-38"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-28-39" name="__codelineno-28-39"></a><span class="p">}</span>
<a id="__codelineno-28-40" name="__codelineno-28-40"></a>
<a id="__codelineno-28-41" name="__codelineno-28-41"></a>
<a id="__codelineno-28-42" name="__codelineno-28-42"></a><span class="c1">// 取钱线程类</span>
<a id="__codelineno-28-43" name="__codelineno-28-43"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">DrawThread</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Thread</span><span class="p">{</span>
<a id="__codelineno-28-44" name="__codelineno-28-44"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">Account</span><span class="w"> </span><span class="n">acc</span><span class="p">;</span><span class="w"> </span><span class="c1">// 记住线程对象要处理的账户对象。</span>
<a id="__codelineno-28-45" name="__codelineno-28-45"></a>
<a id="__codelineno-28-46" name="__codelineno-28-46"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">DrawThread</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">Account</span><span class="w"> </span><span class="n">acc</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-47" name="__codelineno-28-47"></a><span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
<a id="__codelineno-28-48" name="__codelineno-28-48"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">acc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">acc</span><span class="p">;</span>
<a id="__codelineno-28-49" name="__codelineno-28-49"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-28-50" name="__codelineno-28-50"></a>
<a id="__codelineno-28-51" name="__codelineno-28-51"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-28-52" name="__codelineno-28-52"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-28-53" name="__codelineno-28-53"></a><span class="w">        </span><span class="c1">// 小明 小红 取钱</span>
<a id="__codelineno-28-54" name="__codelineno-28-54"></a><span class="w">        </span><span class="n">acc</span><span class="p">.</span><span class="na">drawMoney</span><span class="p">(</span><span class="mi">100000</span><span class="p">);</span>
<a id="__codelineno-28-55" name="__codelineno-28-55"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-28-56" name="__codelineno-28-56"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="_27">线程同步<a class="headerlink" href="#_27" title="Permanent link">&para;</a></h4>
<ul>
<li>线程同步是线程安全问题的解决方案。</li>
</ul>
<p>核心思想：让多个线程先后依次访问共享资源，这样就可以避免出现线程安全问题；</p>
<p>实现方案：</p>
<ul>
<li>加锁：每次只允许一个线程加锁，加锁后才能进入访问，访问完毕后自动解锁，然后其他线程才能再加锁进来。</li>
</ul>
<h5 id="_28">方式一：同步代码块；<a class="headerlink" href="#_28" title="Permanent link">&para;</a></h5>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1">1</a></span>
<span class="normal"><a href="#__codelineno-29-2">2</a></span>
<span class="normal"><a href="#__codelineno-29-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="kd">synchronized</span><span class="p">(</span><span class="n">同步锁</span><span class="p">){</span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="w">    </span><span class="n">访问共享资源的核心代码</span>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p><span style="background:#6fe7dd; border-radius:5px; display:inline-block;">原理：每次只允许一个线程加锁进来，执行完毕后自动解锁，然后其他线程才可以进来执行；</span></p>
<blockquote>
<p><strong>注意事项：对于当前同步执行的线程来说，同步锁必须是同一把（同一个对象），否则一个线程抢到锁，不能阻止其他线程继续执行“访问共享资源的核心代码”；</strong></p>
</blockquote>
<ul>
<li>锁对象不要随便选择一个唯一的对象，这样不好，可能会影响到其他无关线程的执行；</li>
<li><strong>建议使用共享资源作为锁对象</strong>，对于实例方法建议用 <code>this</code> 作为锁对象；</li>
<li>对于静态方法建议使用字节码（类名.class）对象作为锁对象；</li>
</ul>
<h5 id="_29">方式二：同步方法；<a class="headerlink" href="#_29" title="Permanent link">&para;</a></h5>
<ul>
<li><span style="background:#6fe7dd; border-radius:5px; display:inline-block;">原理：把访问共享资源的核心方法给上锁，以此保证线程安全；</span></li>
<li>每次只能一个线程进入该方法，执行完毕以后自动解锁，其他线程才可以进来执行；</li>
</ul>
<p>底层原理：</p>
<ul>
<li>同步方法其实底层也是有隐式锁对象的，只是锁的范围是整个方法代码；</li>
<li>如果方法是实例方法：同步方法默认用 <code>this</code> 作为锁；</li>
<li>如果方法是静态方法：同步方法默认用 <code>类名.class</code> 作为锁；</li>
</ul>
<p>同步代码块和同步方法哪个好？</p>
<ul>
<li>范围上：同步代码块锁的范围更小，同步方法锁的范围更大；使用同步代码块理论上性能略高；</li>
<li>可读性：同步方法更好；</li>
</ul>
<h5 id="lock">方式三：lock 锁；<a class="headerlink" href="#lock" title="Permanent link">&para;</a></h5>
<ul>
<li>Lock 锁是 JDK5 开始提供的一个新的锁定操作，通过它可以创建出锁对象来进行加锁和解锁，更灵活、更方便、更强大。</li>
<li>Lock 是接口，不能直接实例化，可以采用它的实现类 <code>ReentrantLock</code> 来构建 Lock 锁对象；</li>
</ul>
<p>Lock 的常用方法：</p>
<table>
<thead>
<tr>
<th>方法名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>void lock()</td>
<td>获得锁</td>
</tr>
<tr>
<td>void unlock()</td>
<td>释放锁</td>
</tr>
</tbody>
</table>
<blockquote>
<p><strong>注意事项：</strong></p>
<ul>
<li><strong>建议给锁对象加上 final 修饰，放在被别人篡改；</strong></li>
<li><strong>建议将释放锁的操作放到 finally 代码块中，这样无论是否出现异常，都可以确保锁用完了一定会被释放</strong></li>
</ul>
</blockquote>
<p>核心实现代码：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-30-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-30-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-30-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-30-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-30-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-30-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-30-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-30-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-30-10">10</a></span>
<span class="normal"><a href="#__codelineno-30-11">11</a></span>
<span class="normal"><a href="#__codelineno-30-12">12</a></span>
<span class="normal"><a href="#__codelineno-30-13">13</a></span>
<span class="normal"><a href="#__codelineno-30-14">14</a></span>
<span class="normal"><a href="#__codelineno-30-15">15</a></span>
<span class="normal"><a href="#__codelineno-30-16">16</a></span>
<span class="normal"><a href="#__codelineno-30-17">17</a></span>
<span class="normal"><a href="#__codelineno-30-18">18</a></span>
<span class="normal"><a href="#__codelineno-30-19">19</a></span>
<span class="normal"><a href="#__codelineno-30-20">20</a></span>
<span class="normal"><a href="#__codelineno-30-21">21</a></span>
<span class="normal"><a href="#__codelineno-30-22">22</a></span>
<span class="normal"><a href="#__codelineno-30-23">23</a></span>
<span class="normal"><a href="#__codelineno-30-24">24</a></span>
<span class="normal"><a href="#__codelineno-30-25">25</a></span>
<span class="normal"><a href="#__codelineno-30-26">26</a></span>
<span class="normal"><a href="#__codelineno-30-27">27</a></span>
<span class="normal"><a href="#__codelineno-30-28">28</a></span>
<span class="normal"><a href="#__codelineno-30-29">29</a></span>
<span class="normal"><a href="#__codelineno-30-30">30</a></span>
<span class="normal"><a href="#__codelineno-30-31">31</a></span>
<span class="normal"><a href="#__codelineno-30-32">32</a></span>
<span class="normal"><a href="#__codelineno-30-33">33</a></span>
<span class="normal"><a href="#__codelineno-30-34">34</a></span>
<span class="normal"><a href="#__codelineno-30-35">35</a></span>
<span class="normal"><a href="#__codelineno-30-36">36</a></span>
<span class="normal"><a href="#__codelineno-30-37">37</a></span>
<span class="normal"><a href="#__codelineno-30-38">38</a></span>
<span class="normal"><a href="#__codelineno-30-39">39</a></span>
<span class="normal"><a href="#__codelineno-30-40">40</a></span>
<span class="normal"><a href="#__codelineno-30-41">41</a></span>
<span class="normal"><a href="#__codelineno-30-42">42</a></span>
<span class="normal"><a href="#__codelineno-30-43">43</a></span>
<span class="normal"><a href="#__codelineno-30-44">44</a></span>
<span class="normal"><a href="#__codelineno-30-45">45</a></span>
<span class="normal"><a href="#__codelineno-30-46">46</a></span>
<span class="normal"><a href="#__codelineno-30-47">47</a></span>
<span class="normal"><a href="#__codelineno-30-48">48</a></span>
<span class="normal"><a href="#__codelineno-30-49">49</a></span>
<span class="normal"><a href="#__codelineno-30-50">50</a></span>
<span class="normal"><a href="#__codelineno-30-51">51</a></span>
<span class="normal"><a href="#__codelineno-30-52">52</a></span>
<span class="normal"><a href="#__codelineno-30-53">53</a></span>
<span class="normal"><a href="#__codelineno-30-54">54</a></span>
<span class="normal"><a href="#__codelineno-30-55">55</a></span>
<span class="normal"><a href="#__codelineno-30-56">56</a></span>
<span class="normal"><a href="#__codelineno-30-57">57</a></span>
<span class="normal"><a href="#__codelineno-30-58">58</a></span>
<span class="normal"><a href="#__codelineno-30-59">59</a></span>
<span class="normal"><a href="#__codelineno-30-60">60</a></span>
<span class="normal"><a href="#__codelineno-30-61">61</a></span>
<span class="normal"><a href="#__codelineno-30-62">62</a></span>
<span class="normal"><a href="#__codelineno-30-63">63</a></span>
<span class="normal"><a href="#__codelineno-30-64">64</a></span>
<span class="normal"><a href="#__codelineno-30-65">65</a></span>
<span class="normal"><a href="#__codelineno-30-66">66</a></span>
<span class="normal"><a href="#__codelineno-30-67">67</a></span>
<span class="normal"><a href="#__codelineno-30-68">68</a></span>
<span class="normal"><a href="#__codelineno-30-69">69</a></span>
<span class="normal"><a href="#__codelineno-30-70">70</a></span>
<span class="normal"><a href="#__codelineno-30-71">71</a></span>
<span class="normal"><a href="#__codelineno-30-72">72</a></span>
<span class="normal"><a href="#__codelineno-30-73">73</a></span>
<span class="normal"><a href="#__codelineno-30-74">74</a></span>
<span class="normal"><a href="#__codelineno-30-75">75</a></span>
<span class="normal"><a href="#__codelineno-30-76">76</a></span>
<span class="normal"><a href="#__codelineno-30-77">77</a></span>
<span class="normal"><a href="#__codelineno-30-78">78</a></span>
<span class="normal"><a href="#__codelineno-30-79">79</a></span>
<span class="normal"><a href="#__codelineno-30-80">80</a></span>
<span class="normal"><a href="#__codelineno-30-81">81</a></span>
<span class="normal"><a href="#__codelineno-30-82">82</a></span>
<span class="normal"><a href="#__codelineno-30-83">83</a></span>
<span class="normal"><a href="#__codelineno-30-84">84</a></span>
<span class="normal"><a href="#__codelineno-30-85">85</a></span>
<span class="normal"><a href="#__codelineno-30-86">86</a></span>
<span class="normal"><a href="#__codelineno-30-87">87</a></span>
<span class="normal"><a href="#__codelineno-30-88">88</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="c1">// 方法一：同步代码块</span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="nd">@Data</span>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="nd">@AllArgsConstructor</span>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="nd">@NoArgsConstructor</span>
<a id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Account</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">cardId</span><span class="p">;</span><span class="w"> </span><span class="c1">// 卡号</span>
<a id="__codelineno-30-7" name="__codelineno-30-7"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">;</span><span class="w"> </span><span class="c1">// 余额</span>
<a id="__codelineno-30-8" name="__codelineno-30-8"></a>
<a id="__codelineno-30-9" name="__codelineno-30-9"></a><span class="w">    </span><span class="c1">// 小明和小红都到这里来了取钱</span>
<a id="__codelineno-30-10" name="__codelineno-30-10"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">drawMoney</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-11" name="__codelineno-30-11"></a><span class="w">        </span><span class="c1">// 拿到当前谁来取钱。</span>
<a id="__codelineno-30-12" name="__codelineno-30-12"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">();</span>
<a id="__codelineno-30-13" name="__codelineno-30-13"></a><span class="w">        </span><span class="c1">// 判断余额是否足够</span>
<a id="__codelineno-30-14" name="__codelineno-30-14"></a><span class="w">        </span><span class="kd">synchronized</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">   </span><span class="c1">// 上锁，先抢到锁的人，判断余额是否充足，取完钱，更新完余额再解锁</span>
<a id="__codelineno-30-15" name="__codelineno-30-15"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">money</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-16" name="__codelineno-30-16"></a><span class="w">                </span><span class="c1">// 余额足够，取钱</span>
<a id="__codelineno-30-17" name="__codelineno-30-17"></a><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;取钱成功，吐出了&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">money</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;元成功！&quot;</span><span class="p">);</span>
<a id="__codelineno-30-18" name="__codelineno-30-18"></a><span class="w">                </span><span class="c1">// 更新余额</span>
<a id="__codelineno-30-19" name="__codelineno-30-19"></a><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">money</span><span class="p">;</span>
<a id="__codelineno-30-20" name="__codelineno-30-20"></a><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;取钱成功，取钱后，余额剩余&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;元&quot;</span><span class="p">);</span>
<a id="__codelineno-30-21" name="__codelineno-30-21"></a>
<a id="__codelineno-30-22" name="__codelineno-30-22"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-23" name="__codelineno-30-23"></a><span class="w">                </span><span class="c1">// 余额不足</span>
<a id="__codelineno-30-24" name="__codelineno-30-24"></a><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;取钱失败，余额不足&quot;</span><span class="p">);</span>
<a id="__codelineno-30-25" name="__codelineno-30-25"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-30-26" name="__codelineno-30-26"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-30-27" name="__codelineno-30-27"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-30-28" name="__codelineno-30-28"></a><span class="p">}</span>
<a id="__codelineno-30-29" name="__codelineno-30-29"></a>
<a id="__codelineno-30-30" name="__codelineno-30-30"></a><span class="c1">// 方法二：同步方法</span>
<a id="__codelineno-30-31" name="__codelineno-30-31"></a><span class="nd">@Data</span>
<a id="__codelineno-30-32" name="__codelineno-30-32"></a><span class="nd">@AllArgsConstructor</span>
<a id="__codelineno-30-33" name="__codelineno-30-33"></a><span class="nd">@NoArgsConstructor</span>
<a id="__codelineno-30-34" name="__codelineno-30-34"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Account</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-35" name="__codelineno-30-35"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">cardId</span><span class="p">;</span><span class="w"> </span><span class="c1">// 卡号</span>
<a id="__codelineno-30-36" name="__codelineno-30-36"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">;</span><span class="w"> </span><span class="c1">// 余额</span>
<a id="__codelineno-30-37" name="__codelineno-30-37"></a>
<a id="__codelineno-30-38" name="__codelineno-30-38"></a><span class="w">    </span><span class="c1">// 小明和小红都到这里来了取钱，synchronized关键字修饰，给方法上锁；</span>
<a id="__codelineno-30-39" name="__codelineno-30-39"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">synchronized</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">drawMoney</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-40" name="__codelineno-30-40"></a><span class="w">        </span><span class="c1">// 拿到当前谁来取钱。</span>
<a id="__codelineno-30-41" name="__codelineno-30-41"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">();</span>
<a id="__codelineno-30-42" name="__codelineno-30-42"></a><span class="w">        </span><span class="c1">// 判断余额是否足够</span>
<a id="__codelineno-30-43" name="__codelineno-30-43"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">money</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-44" name="__codelineno-30-44"></a><span class="w">            </span><span class="c1">// 余额足够，取钱</span>
<a id="__codelineno-30-45" name="__codelineno-30-45"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;取钱成功，吐出了&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">money</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;元成功！&quot;</span><span class="p">);</span>
<a id="__codelineno-30-46" name="__codelineno-30-46"></a><span class="w">            </span><span class="c1">// 更新余额</span>
<a id="__codelineno-30-47" name="__codelineno-30-47"></a><span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">money</span><span class="p">;</span>
<a id="__codelineno-30-48" name="__codelineno-30-48"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;取钱成功，取钱后，余额剩余&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;元&quot;</span><span class="p">);</span>
<a id="__codelineno-30-49" name="__codelineno-30-49"></a>
<a id="__codelineno-30-50" name="__codelineno-30-50"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-51" name="__codelineno-30-51"></a><span class="w">            </span><span class="c1">// 余额不足</span>
<a id="__codelineno-30-52" name="__codelineno-30-52"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;取钱失败，余额不足&quot;</span><span class="p">);</span>
<a id="__codelineno-30-53" name="__codelineno-30-53"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-30-54" name="__codelineno-30-54"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-30-55" name="__codelineno-30-55"></a><span class="p">}</span>
<a id="__codelineno-30-56" name="__codelineno-30-56"></a>
<a id="__codelineno-30-57" name="__codelineno-30-57"></a><span class="c1">// 方法三：同步锁</span>
<a id="__codelineno-30-58" name="__codelineno-30-58"></a><span class="nd">@Data</span>
<a id="__codelineno-30-59" name="__codelineno-30-59"></a><span class="nd">@AllArgsConstructor</span>
<a id="__codelineno-30-60" name="__codelineno-30-60"></a><span class="nd">@NoArgsConstructor</span>
<a id="__codelineno-30-61" name="__codelineno-30-61"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Account</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-62" name="__codelineno-30-62"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">cardId</span><span class="p">;</span><span class="w"> </span><span class="c1">// 卡号</span>
<a id="__codelineno-30-63" name="__codelineno-30-63"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">;</span><span class="w"> </span><span class="c1">// 余额</span>
<a id="__codelineno-30-64" name="__codelineno-30-64"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Lock</span><span class="w"> </span><span class="n">lk</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ReentrantLock</span><span class="p">();</span><span class="w"> </span><span class="c1">// 使用final修饰，保护锁对象</span>
<a id="__codelineno-30-65" name="__codelineno-30-65"></a>
<a id="__codelineno-30-66" name="__codelineno-30-66"></a><span class="w">    </span><span class="c1">// 小明和小红都到这里来了取钱</span>
<a id="__codelineno-30-67" name="__codelineno-30-67"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">drawMoney</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">money</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-68" name="__codelineno-30-68"></a><span class="w">        </span><span class="c1">// 拿到当前谁来取钱。</span>
<a id="__codelineno-30-69" name="__codelineno-30-69"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">currentThread</span><span class="p">().</span><span class="na">getName</span><span class="p">();</span>
<a id="__codelineno-30-70" name="__codelineno-30-70"></a><span class="w">        </span><span class="n">lk</span><span class="p">.</span><span class="na">lock</span><span class="p">();</span><span class="w"> </span><span class="c1">// 上锁</span>
<a id="__codelineno-30-71" name="__codelineno-30-71"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-72" name="__codelineno-30-72"></a><span class="w">            </span><span class="c1">// 判断余额是否足够</span>
<a id="__codelineno-30-73" name="__codelineno-30-73"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">money</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-74" name="__codelineno-30-74"></a><span class="w">                </span><span class="c1">// 余额足够，取钱</span>
<a id="__codelineno-30-75" name="__codelineno-30-75"></a><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;取钱成功，吐出了&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">money</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;元成功！&quot;</span><span class="p">);</span>
<a id="__codelineno-30-76" name="__codelineno-30-76"></a><span class="w">                </span><span class="c1">// 更新余额</span>
<a id="__codelineno-30-77" name="__codelineno-30-77"></a><span class="w">                </span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="n">money</span><span class="p">;</span>
<a id="__codelineno-30-78" name="__codelineno-30-78"></a><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;取钱成功，取钱后，余额剩余&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="na">money</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;元&quot;</span><span class="p">);</span>
<a id="__codelineno-30-79" name="__codelineno-30-79"></a><span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-80" name="__codelineno-30-80"></a><span class="w">                </span><span class="c1">// 余额不足</span>
<a id="__codelineno-30-81" name="__codelineno-30-81"></a><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;取钱失败，余额不足&quot;</span><span class="p">);</span>
<a id="__codelineno-30-82" name="__codelineno-30-82"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-30-83" name="__codelineno-30-83"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">finally</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-84" name="__codelineno-30-84"></a><span class="w">            </span><span class="c1">// 建议将释放锁的操作放到finally代码块中，这样无论是否出现异常，都可以确保锁用完了一定会被释放</span>
<a id="__codelineno-30-85" name="__codelineno-30-85"></a><span class="w">            </span><span class="n">lk</span><span class="p">.</span><span class="na">unlock</span><span class="p">();</span><span class="w">    </span><span class="c1">// 解锁</span>
<a id="__codelineno-30-86" name="__codelineno-30-86"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-30-87" name="__codelineno-30-87"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-30-88" name="__codelineno-30-88"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="_30">线程池<a class="headerlink" href="#_30" title="Permanent link">&para;</a></h3>
<p>线程池就是一个可以复用线程的技术；</p>
<p><strong>如果不使用线程池，用户每发起一个请求，后台就需要创建一个新线程来处理，下次同样的任务来了又要创建新线程处理，创建新线程的开销很大，并且请求过多时，会产生大量的线程出来，会严重影响系统的性能。</strong></p>
<h4 id="_31">线程池的工作原理：<a class="headerlink" href="#_31" title="Permanent link">&para;</a></h4>
<p><img src="https://cdn.jsdelivr.net/gh/Gongzihang6/Pictures@main/Medias/medias%2F2025%2F07%2Fimage-20250617195255243.png" alt="线程池的工作原理" style="zoom:67%;" /></p>
<p>线程池中的线程就好比餐馆里的服务员，任务队列就好比来吃饭的顾客，一个服务员一次服务一位顾客，服务结束后，不会把服务员炒鱿鱼，因为如果炒掉下次再来顾客又要雇新的服务员；而是让他继续服务下一位顾客，也就是任务队列中源源不断地顾客；</p>
<h4 id="_32">创建线程池<a class="headerlink" href="#_32" title="Permanent link">&para;</a></h4>
<p>JDK5.0 提供了代表线程池的接口：<code>ExecutorService</code></p>
<p>如何创建线程池对象？</p>
<h5 id="executorservice-threadpoolexecutor">方式一：使用 ExecutorService 的实现类 ThreadPoolExecutor 来创建一个线程池对象；<a class="headerlink" href="#executorservice-threadpoolexecutor" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>ThreadPoolExecutor 类提供的构造器</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>public <strong>ThreadPoolExecutor</strong>(<code>int  corePoolSize</code>, <code>int  maximumPoolSize</code>,  <code>long  keepAliveTime</code>, <code>TimeUnit unit</code>, <code>BlockingQueue&lt;Runnable&gt;  workQueue</code>, <code>ThreadFactory threadFactory</code>,   <code>RejectedExecutionHandler handler</code>)</td>
<td>使用指定的初始化参数创建一个新的线程池对象</td>
</tr>
</tbody>
</table>
<p><strong>各个参数含义：</strong></p>
<ul>
<li>参数一：<code>corePoolSize</code> : 指定线程池的核心线程的数量</li>
<li>参数二：<code>maximumPoolSize</code>：指定线程池的最大线程数量</li>
<li>参数三：<code>keepAliveTime</code> ：指定临时线程的存活时间</li>
<li>参数四：<code>unit</code>：指定临时线程存活的时间单位(秒、分、时、天）</li>
<li>参数五：<code>workQueue</code>：指定线程池的任务队列</li>
<li>参数六：<code>threadFactory</code>：指定线程池的线程工厂</li>
<li>参数七：<code>handler</code>：指定线程池的 <strong>任务拒绝策略</strong>（线程都在忙，任务队列也满了的时候，新任务来了该怎么处理）</li>
</ul>
<p><strong>ExecutorService 的常用方法</strong></p>
<table>
<thead>
<tr>
<th>方法名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>void execute(Runnable command)</td>
<td>执行 <strong>Runnable</strong> 任务</td>
</tr>
<tr>
<td>Future <T>  submit(Callable <T> task)</td>
<td>执行 <strong>Callable</strong> 任务，返回未来任务对象，用于获取线程返回的结果</td>
</tr>
<tr>
<td>void  shutdown()</td>
<td>等全部任务执行完毕后，再关闭线程池！</td>
</tr>
<tr>
<td>List <Runnable> shutdownNow()</td>
<td>立刻关闭线程池，停止正在执行的任务，并返回队列中未执行的任务</td>
</tr>
</tbody>
</table>
<p><strong>线程池注意事项：</strong></p>
<ul>
<li>什么时候开始创建临时线程？新任务提交时发现核心线程都在忙，任务队列也满了，并且还可以创建临时线程，此时才会创建临时线程；</li>
<li>什么时候会拒绝新任务？核心线程和临时线程都在忙，任务队列也满了，新的任务过来的时候才会开始拒绝任务；</li>
</ul>
<p><strong>任务拒绝策略：</strong></p>
<table>
<thead>
<tr>
<th>策略</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>ThreadPoolExecutor.AbortPolicy()</td>
<td>丢弃任务并抛出 <code>RejectedExecutionException</code> 异常。是默认的策略</td>
</tr>
<tr>
<td>ThreadPoolExecutor.DiscardPolicy()</td>
<td>丢弃任务，但是不抛出异常，这是不推荐的做法</td>
</tr>
<tr>
<td>ThreadPoolExecutor.DiscardOldestPolicy()</td>
<td>抛弃队列中等待最久的任务  然后把当前任务加入队列中</td>
</tr>
<tr>
<td>ThreadPoolExecutor.CallerRunsPolicy()</td>
<td>由主线程负责调用任务的 run()方法从而绕过线程池直接执行</td>
</tr>
</tbody>
</table>
<p>示例代码：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-31-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-31-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-31-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-31-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-31-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-31-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-31-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-31-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-31-10">10</a></span>
<span class="normal"><a href="#__codelineno-31-11">11</a></span>
<span class="normal"><a href="#__codelineno-31-12">12</a></span>
<span class="normal"><a href="#__codelineno-31-13">13</a></span>
<span class="normal"><a href="#__codelineno-31-14">14</a></span>
<span class="normal"><a href="#__codelineno-31-15">15</a></span>
<span class="normal"><a href="#__codelineno-31-16">16</a></span>
<span class="normal"><a href="#__codelineno-31-17">17</a></span>
<span class="normal"><a href="#__codelineno-31-18">18</a></span>
<span class="normal"><a href="#__codelineno-31-19">19</a></span>
<span class="normal"><a href="#__codelineno-31-20">20</a></span>
<span class="normal"><a href="#__codelineno-31-21">21</a></span>
<span class="normal"><a href="#__codelineno-31-22">22</a></span>
<span class="normal"><a href="#__codelineno-31-23">23</a></span>
<span class="normal"><a href="#__codelineno-31-24">24</a></span>
<span class="normal"><a href="#__codelineno-31-25">25</a></span>
<span class="normal"><a href="#__codelineno-31-26">26</a></span>
<span class="normal"><a href="#__codelineno-31-27">27</a></span>
<span class="normal"><a href="#__codelineno-31-28">28</a></span>
<span class="normal"><a href="#__codelineno-31-29">29</a></span>
<span class="normal"><a href="#__codelineno-31-30">30</a></span>
<span class="normal"><a href="#__codelineno-31-31">31</a></span>
<span class="normal"><a href="#__codelineno-31-32">32</a></span>
<span class="normal"><a href="#__codelineno-31-33">33</a></span>
<span class="normal"><a href="#__codelineno-31-34">34</a></span>
<span class="normal"><a href="#__codelineno-31-35">35</a></span>
<span class="normal"><a href="#__codelineno-31-36">36</a></span>
<span class="normal"><a href="#__codelineno-31-37">37</a></span>
<span class="normal"><a href="#__codelineno-31-38">38</a></span>
<span class="normal"><a href="#__codelineno-31-39">39</a></span>
<span class="normal"><a href="#__codelineno-31-40">40</a></span>
<span class="normal"><a href="#__codelineno-31-41">41</a></span>
<span class="normal"><a href="#__codelineno-31-42">42</a></span>
<span class="normal"><a href="#__codelineno-31-43">43</a></span>
<span class="normal"><a href="#__codelineno-31-44">44</a></span>
<span class="normal"><a href="#__codelineno-31-45">45</a></span>
<span class="normal"><a href="#__codelineno-31-46">46</a></span>
<span class="normal"><a href="#__codelineno-31-47">47</a></span>
<span class="normal"><a href="#__codelineno-31-48">48</a></span>
<span class="normal"><a href="#__codelineno-31-49">49</a></span>
<span class="normal"><a href="#__codelineno-31-50">50</a></span>
<span class="normal"><a href="#__codelineno-31-51">51</a></span>
<span class="normal"><a href="#__codelineno-31-52">52</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ExecutorServiceDemo1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-3" name="__codelineno-31-3"></a><span class="w">        </span><span class="c1">// 目标：创建线程池对象来使用。</span>
<a id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="w">        </span><span class="c1">// 1、使用线程池的实现类ThreadPoolExecutor声明七个参数来创建线程池对象。</span>
<a id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="w">        </span><span class="n">ExecutorService</span><span class="w"> </span><span class="n">pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<a id="__codelineno-31-6" name="__codelineno-31-6"></a><span class="w">                </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">TimeUnit</span><span class="p">.</span><span class="na">SECONDS</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayBlockingQueue</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<a id="__codelineno-31-7" name="__codelineno-31-7"></a><span class="w">               </span><span class="n">Executors</span><span class="p">.</span><span class="na">defaultThreadFactory</span><span class="p">(),</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ThreadPoolExecutor</span><span class="p">.</span><span class="na">CallerRunsPolicy</span><span class="p">());</span>
<a id="__codelineno-31-8" name="__codelineno-31-8"></a>
<a id="__codelineno-31-9" name="__codelineno-31-9"></a><span class="w">        </span><span class="c1">// 2、使用线程池处理任务！看会不会复用线程？</span>
<a id="__codelineno-31-10" name="__codelineno-31-10"></a><span class="w">        </span><span class="n">Runnable</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyRunnable</span><span class="p">();</span>
<a id="__codelineno-31-11" name="__codelineno-31-11"></a><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">target</span><span class="p">);</span><span class="w"> </span><span class="c1">// 提交第1个任务 创建第1个线程 自动启动线程处理这个任务</span>
<a id="__codelineno-31-12" name="__codelineno-31-12"></a><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">target</span><span class="p">);</span><span class="w"> </span><span class="c1">// 提交第2个任务 创建第2个线程 自动启动线程处理这个任务</span>
<a id="__codelineno-31-13" name="__codelineno-31-13"></a><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">target</span><span class="p">);</span><span class="w"> </span><span class="c1">// 提交第2个任务 创建第3个线程 自动启动线程处理这个任务</span>
<a id="__codelineno-31-14" name="__codelineno-31-14"></a><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">target</span><span class="p">);</span>
<a id="__codelineno-31-15" name="__codelineno-31-15"></a><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">target</span><span class="p">);</span>
<a id="__codelineno-31-16" name="__codelineno-31-16"></a><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">target</span><span class="p">);</span>
<a id="__codelineno-31-17" name="__codelineno-31-17"></a><span class="w">        </span><span class="c1">// 只有当所有的核心线程都在忙，而且任务队列也排满了的时候，才会创建临时线程；</span>
<a id="__codelineno-31-18" name="__codelineno-31-18"></a><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">target</span><span class="p">);</span><span class="w"> </span><span class="c1">// 到了临时线程的创建时机了</span>
<a id="__codelineno-31-19" name="__codelineno-31-19"></a><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">target</span><span class="p">);</span><span class="w"> </span><span class="c1">// 到了临时线程的创建时机了</span>
<a id="__codelineno-31-20" name="__codelineno-31-20"></a><span class="w">        </span><span class="n">pool</span><span class="p">.</span><span class="na">execute</span><span class="p">(</span><span class="n">target</span><span class="p">);</span><span class="w"> </span><span class="c1">// 到了任务拒绝策略了，忙不过来</span>
<a id="__codelineno-31-21" name="__codelineno-31-21"></a>
<a id="__codelineno-31-22" name="__codelineno-31-22"></a><span class="w">        </span><span class="c1">// 3、关闭线程池 ：一般不关闭线程池。</span>
<a id="__codelineno-31-23" name="__codelineno-31-23"></a><span class="w">        </span><span class="c1">// pool.shutdown(); // 等所有任务执行完毕后再关闭线程池！</span>
<a id="__codelineno-31-24" name="__codelineno-31-24"></a><span class="w">        </span><span class="c1">// pool.shutdownNow(); // 立即关闭，不管任务是否执行完毕！</span>
<a id="__codelineno-31-25" name="__codelineno-31-25"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-31-26" name="__codelineno-31-26"></a><span class="p">}</span>
<a id="__codelineno-31-27" name="__codelineno-31-27"></a>
<a id="__codelineno-31-28" name="__codelineno-31-28"></a>
<a id="__codelineno-31-29" name="__codelineno-31-29"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ExecutorServiceDemo2</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-30" name="__codelineno-31-30"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-31" name="__codelineno-31-31"></a><span class="w">        </span><span class="c1">// 目标：创建线程池对象来使用。</span>
<a id="__codelineno-31-32" name="__codelineno-31-32"></a><span class="w">        </span><span class="c1">// 1、使用线程池的实现类ThreadPoolExecutor声明七个参数来创建线程池对象。</span>
<a id="__codelineno-31-33" name="__codelineno-31-33"></a><span class="w">        </span><span class="n">ExecutorService</span><span class="w"> </span><span class="n">pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<a id="__codelineno-31-34" name="__codelineno-31-34"></a><span class="w">                </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">TimeUnit</span><span class="p">.</span><span class="na">SECONDS</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayBlockingQueue</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span>
<a id="__codelineno-31-35" name="__codelineno-31-35"></a><span class="w">               </span><span class="n">Executors</span><span class="p">.</span><span class="na">defaultThreadFactory</span><span class="p">(),</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ThreadPoolExecutor</span><span class="p">.</span><span class="na">CallerRunsPolicy</span><span class="p">());</span>
<a id="__codelineno-31-36" name="__codelineno-31-36"></a>
<a id="__codelineno-31-37" name="__codelineno-31-37"></a><span class="w">        </span><span class="c1">// 2、使用线程池处理Callable任务！</span>
<a id="__codelineno-31-38" name="__codelineno-31-38"></a><span class="w">        </span><span class="n">Future</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">f1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pool</span><span class="p">.</span><span class="na">submit</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">MyCallable</span><span class="p">(</span><span class="mi">100</span><span class="p">));</span>
<a id="__codelineno-31-39" name="__codelineno-31-39"></a><span class="w">        </span><span class="n">Future</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">f2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pool</span><span class="p">.</span><span class="na">submit</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">MyCallable</span><span class="p">(</span><span class="mi">200</span><span class="p">));</span>
<a id="__codelineno-31-40" name="__codelineno-31-40"></a><span class="w">        </span><span class="n">Future</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">f3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pool</span><span class="p">.</span><span class="na">submit</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">MyCallable</span><span class="p">(</span><span class="mi">300</span><span class="p">));</span>
<a id="__codelineno-31-41" name="__codelineno-31-41"></a><span class="w">        </span><span class="n">Future</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">f4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pool</span><span class="p">.</span><span class="na">submit</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">MyCallable</span><span class="p">(</span><span class="mi">400</span><span class="p">));</span>
<a id="__codelineno-31-42" name="__codelineno-31-42"></a>
<a id="__codelineno-31-43" name="__codelineno-31-43"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-44" name="__codelineno-31-44"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f1</span><span class="p">.</span><span class="na">get</span><span class="p">());</span>
<a id="__codelineno-31-45" name="__codelineno-31-45"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f2</span><span class="p">.</span><span class="na">get</span><span class="p">());</span>
<a id="__codelineno-31-46" name="__codelineno-31-46"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f3</span><span class="p">.</span><span class="na">get</span><span class="p">());</span>
<a id="__codelineno-31-47" name="__codelineno-31-47"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">f4</span><span class="p">.</span><span class="na">get</span><span class="p">());</span>
<a id="__codelineno-31-48" name="__codelineno-31-48"></a><span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-49" name="__codelineno-31-49"></a><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-31-50" name="__codelineno-31-50"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-31-51" name="__codelineno-31-51"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-31-52" name="__codelineno-31-52"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h5 id="executors">方式二：使用 Executors（线程池的工具类）调用方法来返回不同特点的线程池对象；<a class="headerlink" href="#executors" title="Permanent link">&para;</a></h5>
<ul>
<li>Executors 是一个线程池工具类，提供了很多静态方法用于返回不同特点的线程池对象；</li>
</ul>
<table>
<thead>
<tr>
<th>方法名称</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public static newFixedThreadPool(int nThreads)</td>
<td>创建固定线程数量的线程池，如果某个线程因为执行异常而结束，那么线程池会补充一个新线程替代它。</td>
</tr>
<tr>
<td>public  static ExecutorService newSingleThreadExecutor()</td>
<td>创建只有一个线程的线程池对象，如果该线程出现异常而结束，那么线程池会补充一个新线程。</td>
</tr>
<tr>
<td>public  static ExecutorService newCachedThreadPool()</td>
<td>线程数量随着任务增加而增加，如果线程任务执行完毕且空闲了 60s 则会被回收掉。</td>
</tr>
<tr>
<td>public  static ScheduledExecutorService newScheduledThreadPool(int corePoolSize)</td>
<td>创建一个线程池，可以实现在给定的延迟后运行任务，或者定期执行任务。</td>
</tr>
</tbody>
</table>
<p><strong>注意 ：这些方法的底层，都是通过线程池的实现类 ThreadPoolExecutor 创建的线程池对象</strong></p>
<p>Executors 使用可能存在的陷阱</p>
<ul>
<li>大型并发系统环境中使用 Executors 如果不注意可能会出现系统风险</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Gongzihang6/Pictures@main/Medias/medias%2F2025%2F07%2Fimage-20250617202153455.png" alt="阿里巴巴Java开发手册" style="zoom: 80%;" /></p>
<h2 id="_33">网络编程<a class="headerlink" href="#_33" title="Permanent link">&para;</a></h2>
<p>指的是可以让设备中的程序与网络上其他设备中的程序进行数据交互的技术（实现网络通信）</p>
<p>基本的通信架构</p>
<ul>
<li>基本的通信架构有2种形式：CS架构（Client客户端/Server服务端）、BS架构（Browser浏览器/Server服务端）</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Gongzihang6/Pictures@main/Medias/medias%2F2025%2F07%2Fimage-20250620170554912.png" alt="客户端-服务端架构" style="zoom:60%;" /></p>
<p><img src="https://cdn.jsdelivr.net/gh/Gongzihang6/Pictures@main/Medias/medias%2F2025%2F07%2Fimage-20250620170718472.png" alt="浏览器-服务端架构" style="zoom:60%;" /></p>
<p>无论是CS架构、还是BS架构的软件都必须依赖网络编程！</p>
<h3 id="_34">网络编程三要素<a class="headerlink" href="#_34" title="Permanent link">&para;</a></h3>
<h4 id="ip">IP<a class="headerlink" href="#ip" title="Permanent link">&para;</a></h4>
<p>IP地址是设备在网络中的地址，是设备在网络中的唯一标识；</p>
<p><strong>IP地址版本:</strong></p>
<p>IPv4:是一个32位的地址，通常用“点分十进制”表示法书写，例如 <code>192.168.1.66</code></p>
<p>IPv6:是一个128位的地址，旨在为海量的网络设备提供地址。它通常使用“冒分十六进制”表示法，例如 <code>2001:0db8:0000:0023:0008:0800:200c:417a</code></p>
<p><strong>IP地址类型:</strong></p>
<ul>
<li>公网IP:可以直接连接到互联网的IP地址 </li>
<li>内网IP (局域网IP): 仅在组织机构内部使用的IP地址，例如以 <code>192.168.</code>开头的地址 ，范围为<code>192.168.0.0--192.168.255.255</code></li>
<li>本机IP:<code>127.0.0.1</code>或 <code>localhost</code>都代表当前设备自己的IP地址 </li>
</ul>
<p><strong>域名系统 (DNS):</strong> DNS是一个分布式命名系统，它负责将人类易于记忆的域名（如 <code>www.itheima.com</code>）转换为机器能够识别的IP地址 。</p>
<p><strong>Java中的 <code>InetAddress</code> 类:</strong> 这个类在Java中代表一个IP地址 。</p>
<p>核心方法:</p>
<ul>
<li><code>getLocalHost()</code>: 获取本机的 InetAddress对象 </li>
<li><code>getByName(String host)</code>: 根据主机名或IP地址字符串获取 InetAddress对象</li>
<li><code>getHostName()</code>: 获取IP地址对应的主机名 </li>
<li><code>getHostAddress()</code>: 获取IP地址的字符串表示 </li>
<li><code>isReachable(int timeout)</code>: 在指定的毫秒数内测试该IP地址是否可达 </li>
</ul>
<p><strong>常用命令:</strong></p>
<ul>
<li><code>ipconfig</code>: 查看本机的IP地址 </li>
<li><code>ping &lt;IP地址&gt;</code>: 检查与另一个网络的连通性 </li>
</ul>
<p>示例代码：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-32-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-32-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-32-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-32-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-32-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-32-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-32-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-32-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-32-10">10</a></span>
<span class="normal"><a href="#__codelineno-32-11">11</a></span>
<span class="normal"><a href="#__codelineno-32-12">12</a></span>
<span class="normal"><a href="#__codelineno-32-13">13</a></span>
<span class="normal"><a href="#__codelineno-32-14">14</a></span>
<span class="normal"><a href="#__codelineno-32-15">15</a></span>
<span class="normal"><a href="#__codelineno-32-16">16</a></span>
<span class="normal"><a href="#__codelineno-32-17">17</a></span>
<span class="normal"><a href="#__codelineno-32-18">18</a></span>
<span class="normal"><a href="#__codelineno-32-19">19</a></span>
<span class="normal"><a href="#__codelineno-32-20">20</a></span>
<span class="normal"><a href="#__codelineno-32-21">21</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">InetAddressDemo1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="w">        </span><span class="c1">// 目标：认识InetAddress获取本机IP对象和对方IP对象。</span>
<a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-5" name="__codelineno-32-5"></a><span class="w">            </span><span class="c1">// 1.获取本机IP对象</span>
<a id="__codelineno-32-6" name="__codelineno-32-6"></a><span class="w">            </span><span class="n">InetAddress</span><span class="w"> </span><span class="n">ip1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InetAddress</span><span class="p">.</span><span class="na">getLocalHost</span><span class="p">();</span>
<a id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">ip1</span><span class="p">.</span><span class="na">getHostName</span><span class="p">());</span><span class="w">          </span><span class="c1">// LAPTOP-AGQHL0AG 本机设备名称</span>
<a id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">ip1</span><span class="p">.</span><span class="na">getHostAddress</span><span class="p">());</span><span class="w">       </span><span class="c1">// 172.24.144.1</span>
<a id="__codelineno-32-9" name="__codelineno-32-9"></a>
<a id="__codelineno-32-10" name="__codelineno-32-10"></a><span class="w">            </span><span class="c1">// 2、获取对方IP对象，获取百度官网的IP对象</span>
<a id="__codelineno-32-11" name="__codelineno-32-11"></a><span class="w">            </span><span class="n">InetAddress</span><span class="w"> </span><span class="n">ip2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">InetAddress</span><span class="p">.</span><span class="na">getByName</span><span class="p">(</span><span class="s">&quot;www.baidu.com&quot;</span><span class="p">);</span>
<a id="__codelineno-32-12" name="__codelineno-32-12"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">ip2</span><span class="p">.</span><span class="na">getHostName</span><span class="p">());</span>
<a id="__codelineno-32-13" name="__codelineno-32-13"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">ip2</span><span class="p">.</span><span class="na">getHostAddress</span><span class="p">());</span>
<a id="__codelineno-32-14" name="__codelineno-32-14"></a>
<a id="__codelineno-32-15" name="__codelineno-32-15"></a><span class="w">           </span><span class="c1">// 3、判断本机与对方主机在5000ms内是否互通</span>
<a id="__codelineno-32-16" name="__codelineno-32-16"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">ip2</span><span class="p">.</span><span class="na">isReachable</span><span class="p">(</span><span class="mi">5000</span><span class="p">));</span><span class="w"> </span><span class="c1">// false ping</span>
<a id="__codelineno-32-17" name="__codelineno-32-17"></a><span class="w">        </span><span class="p">}</span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">){</span>
<a id="__codelineno-32-18" name="__codelineno-32-18"></a><span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<a id="__codelineno-32-19" name="__codelineno-32-19"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-32-20" name="__codelineno-32-20"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-32-21" name="__codelineno-32-21"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="_35">端口<a class="headerlink" href="#_35" title="Permanent link">&para;</a></h4>
<p>应用程序在设备中的唯一标识；它是一个16位的数字，范围从0到65535，用于区分一台计算机上正在运行的不同程序；</p>
<p>端口分类：</p>
<ul>
<li>周知端口（0-1023）：被预先定义的知名应用占用（例如HTTP占用80端口）</li>
<li>注册端口（1024-49151）：分配给用户进程或者某些应用程序；</li>
<li>动态端口（49152-65535）：通常是动态分配给客户端程序的临时端口；</li>
</ul>
<p>在同一台设备上，不能有两个程序的端口号相同，否则会引发端口冲突错误；</p>
<h4 id="_36">协议<a class="headerlink" href="#_36" title="Permanent link">&para;</a></h4>
<p>网络通信协议是网络上通信的设备间事先规定好的连接和数据传输的规则，目前事实上的国际标准是TCP/IP网络模型；</p>
<h3 id="udp">UDP通信<a class="headerlink" href="#udp" title="Permanent link">&para;</a></h3>
<p>UDP（User Datagram Protocol）：用户数据报协议</p>
<p>UDP通信效率高，应用场景有视频直播、语音通话；</p>
<p>特点：不事先建立连接，数据按照包发送，一个包的数据包含：自己的IP、端口，目的地的IP、端口，以及要发送的数据（限制在64KB内）；发送方不管对方是否在线，数据在中间丢失也不管，如果接收方收到数据也不返回确认，因此是不可靠的；</p>
<p>示例代码：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-33-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-33-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-33-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-33-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-33-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-33-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-33-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-33-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-33-10">10</a></span>
<span class="normal"><a href="#__codelineno-33-11">11</a></span>
<span class="normal"><a href="#__codelineno-33-12">12</a></span>
<span class="normal"><a href="#__codelineno-33-13">13</a></span>
<span class="normal"><a href="#__codelineno-33-14">14</a></span>
<span class="normal"><a href="#__codelineno-33-15">15</a></span>
<span class="normal"><a href="#__codelineno-33-16">16</a></span>
<span class="normal"><a href="#__codelineno-33-17">17</a></span>
<span class="normal"><a href="#__codelineno-33-18">18</a></span>
<span class="normal"><a href="#__codelineno-33-19">19</a></span>
<span class="normal"><a href="#__codelineno-33-20">20</a></span>
<span class="normal"><a href="#__codelineno-33-21">21</a></span>
<span class="normal"><a href="#__codelineno-33-22">22</a></span>
<span class="normal"><a href="#__codelineno-33-23">23</a></span>
<span class="normal"><a href="#__codelineno-33-24">24</a></span>
<span class="normal"><a href="#__codelineno-33-25">25</a></span>
<span class="normal"><a href="#__codelineno-33-26">26</a></span>
<span class="normal"><a href="#__codelineno-33-27">27</a></span>
<span class="normal"><a href="#__codelineno-33-28">28</a></span>
<span class="normal"><a href="#__codelineno-33-29">29</a></span>
<span class="normal"><a href="#__codelineno-33-30">30</a></span>
<span class="normal"><a href="#__codelineno-33-31">31</a></span>
<span class="normal"><a href="#__codelineno-33-32">32</a></span>
<span class="normal"><a href="#__codelineno-33-33">33</a></span>
<span class="normal"><a href="#__codelineno-33-34">34</a></span>
<span class="normal"><a href="#__codelineno-33-35">35</a></span>
<span class="normal"><a href="#__codelineno-33-36">36</a></span>
<span class="normal"><a href="#__codelineno-33-37">37</a></span>
<span class="normal"><a href="#__codelineno-33-38">38</a></span>
<span class="normal"><a href="#__codelineno-33-39">39</a></span>
<span class="normal"><a href="#__codelineno-33-40">40</a></span>
<span class="normal"><a href="#__codelineno-33-41">41</a></span>
<span class="normal"><a href="#__codelineno-33-42">42</a></span>
<span class="normal"><a href="#__codelineno-33-43">43</a></span>
<span class="normal"><a href="#__codelineno-33-44">44</a></span>
<span class="normal"><a href="#__codelineno-33-45">45</a></span>
<span class="normal"><a href="#__codelineno-33-46">46</a></span>
<span class="normal"><a href="#__codelineno-33-47">47</a></span>
<span class="normal"><a href="#__codelineno-33-48">48</a></span>
<span class="normal"><a href="#__codelineno-33-49">49</a></span>
<span class="normal"><a href="#__codelineno-33-50">50</a></span>
<span class="normal"><a href="#__codelineno-33-51">51</a></span>
<span class="normal"><a href="#__codelineno-33-52">52</a></span>
<span class="normal"><a href="#__codelineno-33-53">53</a></span>
<span class="normal"><a href="#__codelineno-33-54">54</a></span>
<span class="normal"><a href="#__codelineno-33-55">55</a></span>
<span class="normal"><a href="#__codelineno-33-56">56</a></span>
<span class="normal"><a href="#__codelineno-33-57">57</a></span>
<span class="normal"><a href="#__codelineno-33-58">58</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="c1">// 客户端实现，客户端通过DatagramSocket创建发送端对象</span>
<a id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="c1">// 通过DatagramPacket建立发送数据包对象，指定要发送的字节流、字节流长度、目的地IP、端口号</span>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UDPClientDemo1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-4" name="__codelineno-33-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-5" name="__codelineno-33-5"></a><span class="w">        </span><span class="c1">// 目标：完成UDP通信一发一收：客户端开发</span>
<a id="__codelineno-33-6" name="__codelineno-33-6"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;===客户端启动==&quot;</span><span class="p">);</span>
<a id="__codelineno-33-7" name="__codelineno-33-7"></a><span class="w">        </span><span class="c1">// 1、创建发送端对象（代表抛韭菜的人） DatagramSocket()用于创建UDP通信的客户端和服务端</span>
<a id="__codelineno-33-8" name="__codelineno-33-8"></a><span class="w">        </span><span class="n">DatagramSocket</span><span class="w"> </span><span class="n">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DatagramSocket</span><span class="p">();</span><span class="w"> </span><span class="c1">// 随机端口</span>
<a id="__codelineno-33-9" name="__codelineno-33-9"></a>
<a id="__codelineno-33-10" name="__codelineno-33-10"></a><span class="w">        </span><span class="c1">// 2、创建数据包对象封装要发送的数据。(韭菜盘子)</span>
<a id="__codelineno-33-11" name="__codelineno-33-11"></a><span class="w">        </span><span class="kt">byte</span><span class="o">[]</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;我是客户端，约你今晚啤酒、龙虾、小烧烤&quot;</span><span class="p">.</span><span class="na">getBytes</span><span class="p">();</span>
<a id="__codelineno-33-12" name="__codelineno-33-12"></a><span class="w">        </span><span class="cm">/**</span>
<a id="__codelineno-33-13" name="__codelineno-33-13"></a><span class="cm">         *   public DatagramPacket(byte[] buf, int length,</span>
<a id="__codelineno-33-14" name="__codelineno-33-14"></a><span class="cm">         *                           InetAddress address, int port)</span>
<a id="__codelineno-33-15" name="__codelineno-33-15"></a><span class="cm">         * 参数一：发送的数据，字节数组（韭菜）</span>
<a id="__codelineno-33-16" name="__codelineno-33-16"></a><span class="cm">         * 参数二：发送的字节长度。</span>
<a id="__codelineno-33-17" name="__codelineno-33-17"></a><span class="cm">         * 参数三：目的地的IP地址。</span>
<a id="__codelineno-33-18" name="__codelineno-33-18"></a><span class="cm">         * 参数四：服务端程序的端口号</span>
<a id="__codelineno-33-19" name="__codelineno-33-19"></a><span class="cm">         */</span>
<a id="__codelineno-33-20" name="__codelineno-33-20"></a><span class="w">        </span><span class="n">DatagramPacket</span><span class="w"> </span><span class="n">packet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DatagramPacket</span><span class="p">(</span><span class="n">bytes</span><span class="p">,</span><span class="w"> </span><span class="n">bytes</span><span class="p">.</span><span class="na">length</span><span class="p">,</span><span class="w"> </span><span class="n">InetAddress</span><span class="p">.</span><span class="na">getLocalHost</span><span class="p">(),</span><span class="w"> </span><span class="mi">8080</span><span class="p">);</span>
<a id="__codelineno-33-21" name="__codelineno-33-21"></a>
<a id="__codelineno-33-22" name="__codelineno-33-22"></a><span class="w">        </span><span class="c1">// 3、让发送端对象发送数据包的数据</span>
<a id="__codelineno-33-23" name="__codelineno-33-23"></a><span class="w">        </span><span class="n">socket</span><span class="p">.</span><span class="na">send</span><span class="p">(</span><span class="n">packet</span><span class="p">);</span>
<a id="__codelineno-33-24" name="__codelineno-33-24"></a>
<a id="__codelineno-33-25" name="__codelineno-33-25"></a><span class="w">        </span><span class="n">socket</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-33-26" name="__codelineno-33-26"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-33-27" name="__codelineno-33-27"></a><span class="p">}</span>
<a id="__codelineno-33-28" name="__codelineno-33-28"></a>
<a id="__codelineno-33-29" name="__codelineno-33-29"></a>
<a id="__codelineno-33-30" name="__codelineno-33-30"></a><span class="c1">// 服务端程序开发</span>
<a id="__codelineno-33-31" name="__codelineno-33-31"></a><span class="c1">// 先启动服务端程序，开启监听状态，接收到客户端发来的消息后，打印该消息</span>
<a id="__codelineno-33-32" name="__codelineno-33-32"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UDPServerDemo2</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-33" name="__codelineno-33-33"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-34" name="__codelineno-33-34"></a><span class="w">        </span><span class="c1">// 目标：完成UDP通信一发一收：服务端开发。</span>
<a id="__codelineno-33-35" name="__codelineno-33-35"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;==服务端启动了===&quot;</span><span class="p">);</span>
<a id="__codelineno-33-36" name="__codelineno-33-36"></a><span class="w">        </span><span class="c1">// 1、创建接收端对象，注册端口。（接韭菜的人）</span>
<a id="__codelineno-33-37" name="__codelineno-33-37"></a><span class="w">        </span><span class="n">DatagramSocket</span><span class="w"> </span><span class="n">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DatagramSocket</span><span class="p">(</span><span class="mi">8080</span><span class="p">);</span>
<a id="__codelineno-33-38" name="__codelineno-33-38"></a>
<a id="__codelineno-33-39" name="__codelineno-33-39"></a><span class="w">        </span><span class="c1">// 2、创建一个数据包对象负责接收数据。（韭菜盘子）</span>
<a id="__codelineno-33-40" name="__codelineno-33-40"></a><span class="w">        </span><span class="kt">byte</span><span class="o">[]</span><span class="w"> </span><span class="n">buf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">byte</span><span class="o">[</span><span class="mi">1024</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">64</span><span class="o">]</span><span class="p">;</span>
<a id="__codelineno-33-41" name="__codelineno-33-41"></a><span class="w">        </span><span class="n">DatagramPacket</span><span class="w"> </span><span class="n">packet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DatagramPacket</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">buf</span><span class="p">.</span><span class="na">length</span><span class="p">);</span>
<a id="__codelineno-33-42" name="__codelineno-33-42"></a>
<a id="__codelineno-33-43" name="__codelineno-33-43"></a><span class="w">        </span><span class="c1">// 3、接收数据，将数据封装到数据包对象的字节数组中去</span>
<a id="__codelineno-33-44" name="__codelineno-33-44"></a><span class="w">        </span><span class="n">socket</span><span class="p">.</span><span class="na">receive</span><span class="p">(</span><span class="n">packet</span><span class="p">);</span>
<a id="__codelineno-33-45" name="__codelineno-33-45"></a>
<a id="__codelineno-33-46" name="__codelineno-33-46"></a><span class="w">        </span><span class="c1">// 4、看看数据是否收到了</span>
<a id="__codelineno-33-47" name="__codelineno-33-47"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">packet</span><span class="p">.</span><span class="na">getLength</span><span class="p">();</span><span class="w">   </span><span class="c1">// 获取当前收到的数据长度。</span>
<a id="__codelineno-33-48" name="__codelineno-33-48"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="p">);</span>
<a id="__codelineno-33-49" name="__codelineno-33-49"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;服务端收到了：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">data</span><span class="p">);</span>
<a id="__codelineno-33-50" name="__codelineno-33-50"></a>
<a id="__codelineno-33-51" name="__codelineno-33-51"></a><span class="w">        </span><span class="c1">// 获取对方的ip对象和程序端口</span>
<a id="__codelineno-33-52" name="__codelineno-33-52"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">packet</span><span class="p">.</span><span class="na">getAddress</span><span class="p">().</span><span class="na">getHostAddress</span><span class="p">();</span>
<a id="__codelineno-33-53" name="__codelineno-33-53"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">packet</span><span class="p">.</span><span class="na">getPort</span><span class="p">();</span>
<a id="__codelineno-33-54" name="__codelineno-33-54"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;对方ip：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;   对方端口：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">port</span><span class="p">);</span>
<a id="__codelineno-33-55" name="__codelineno-33-55"></a>
<a id="__codelineno-33-56" name="__codelineno-33-56"></a><span class="w">        </span><span class="n">socket</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-33-57" name="__codelineno-33-57"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-33-58" name="__codelineno-33-58"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>通过死循环实现多次对话</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-34-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-34-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-34-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-34-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-34-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-34-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-34-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-34-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-34-10">10</a></span>
<span class="normal"><a href="#__codelineno-34-11">11</a></span>
<span class="normal"><a href="#__codelineno-34-12">12</a></span>
<span class="normal"><a href="#__codelineno-34-13">13</a></span>
<span class="normal"><a href="#__codelineno-34-14">14</a></span>
<span class="normal"><a href="#__codelineno-34-15">15</a></span>
<span class="normal"><a href="#__codelineno-34-16">16</a></span>
<span class="normal"><a href="#__codelineno-34-17">17</a></span>
<span class="normal"><a href="#__codelineno-34-18">18</a></span>
<span class="normal"><a href="#__codelineno-34-19">19</a></span>
<span class="normal"><a href="#__codelineno-34-20">20</a></span>
<span class="normal"><a href="#__codelineno-34-21">21</a></span>
<span class="normal"><a href="#__codelineno-34-22">22</a></span>
<span class="normal"><a href="#__codelineno-34-23">23</a></span>
<span class="normal"><a href="#__codelineno-34-24">24</a></span>
<span class="normal"><a href="#__codelineno-34-25">25</a></span>
<span class="normal"><a href="#__codelineno-34-26">26</a></span>
<span class="normal"><a href="#__codelineno-34-27">27</a></span>
<span class="normal"><a href="#__codelineno-34-28">28</a></span>
<span class="normal"><a href="#__codelineno-34-29">29</a></span>
<span class="normal"><a href="#__codelineno-34-30">30</a></span>
<span class="normal"><a href="#__codelineno-34-31">31</a></span>
<span class="normal"><a href="#__codelineno-34-32">32</a></span>
<span class="normal"><a href="#__codelineno-34-33">33</a></span>
<span class="normal"><a href="#__codelineno-34-34">34</a></span>
<span class="normal"><a href="#__codelineno-34-35">35</a></span>
<span class="normal"><a href="#__codelineno-34-36">36</a></span>
<span class="normal"><a href="#__codelineno-34-37">37</a></span>
<span class="normal"><a href="#__codelineno-34-38">38</a></span>
<span class="normal"><a href="#__codelineno-34-39">39</a></span>
<span class="normal"><a href="#__codelineno-34-40">40</a></span>
<span class="normal"><a href="#__codelineno-34-41">41</a></span>
<span class="normal"><a href="#__codelineno-34-42">42</a></span>
<span class="normal"><a href="#__codelineno-34-43">43</a></span>
<span class="normal"><a href="#__codelineno-34-44">44</a></span>
<span class="normal"><a href="#__codelineno-34-45">45</a></span>
<span class="normal"><a href="#__codelineno-34-46">46</a></span>
<span class="normal"><a href="#__codelineno-34-47">47</a></span>
<span class="normal"><a href="#__codelineno-34-48">48</a></span>
<span class="normal"><a href="#__codelineno-34-49">49</a></span>
<span class="normal"><a href="#__codelineno-34-50">50</a></span>
<span class="normal"><a href="#__codelineno-34-51">51</a></span>
<span class="normal"><a href="#__codelineno-34-52">52</a></span>
<span class="normal"><a href="#__codelineno-34-53">53</a></span>
<span class="normal"><a href="#__codelineno-34-54">54</a></span>
<span class="normal"><a href="#__codelineno-34-55">55</a></span>
<span class="normal"><a href="#__codelineno-34-56">56</a></span>
<span class="normal"><a href="#__codelineno-34-57">57</a></span>
<span class="normal"><a href="#__codelineno-34-58">58</a></span>
<span class="normal"><a href="#__codelineno-34-59">59</a></span>
<span class="normal"><a href="#__codelineno-34-60">60</a></span>
<span class="normal"><a href="#__codelineno-34-61">61</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UDPClientDemo1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-3" name="__codelineno-34-3"></a><span class="w">        </span><span class="c1">// 目标：完成UDP通信多发多收：客户端开发</span>
<a id="__codelineno-34-4" name="__codelineno-34-4"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;===客户端启动==&quot;</span><span class="p">);</span>
<a id="__codelineno-34-5" name="__codelineno-34-5"></a><span class="w">        </span><span class="c1">// 1、创建发送端对象（代表抛韭菜的人）</span>
<a id="__codelineno-34-6" name="__codelineno-34-6"></a><span class="w">        </span><span class="n">DatagramSocket</span><span class="w"> </span><span class="n">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DatagramSocket</span><span class="p">();</span><span class="w"> </span><span class="c1">// 随机端口</span>
<a id="__codelineno-34-7" name="__codelineno-34-7"></a>
<a id="__codelineno-34-8" name="__codelineno-34-8"></a><span class="w">        </span><span class="n">Scanner</span><span class="w"> </span><span class="n">sc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Scanner</span><span class="p">(</span><span class="n">System</span><span class="p">.</span><span class="na">in</span><span class="p">);</span>
<a id="__codelineno-34-9" name="__codelineno-34-9"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-10" name="__codelineno-34-10"></a><span class="w">            </span><span class="c1">// 2、创建数据包对象封装要发送的数据。(韭菜盘子)</span>
<a id="__codelineno-34-11" name="__codelineno-34-11"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;请说：&quot;</span><span class="p">);</span>
<a id="__codelineno-34-12" name="__codelineno-34-12"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sc</span><span class="p">.</span><span class="na">nextLine</span><span class="p">();</span>
<a id="__codelineno-34-13" name="__codelineno-34-13"></a>
<a id="__codelineno-34-14" name="__codelineno-34-14"></a><span class="w">            </span><span class="c1">// 如果用户输入的是 exit，则退出</span>
<a id="__codelineno-34-15" name="__codelineno-34-15"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;exit&quot;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">msg</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-16" name="__codelineno-34-16"></a><span class="w">                </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;===客户端退出==&quot;</span><span class="p">);</span>
<a id="__codelineno-34-17" name="__codelineno-34-17"></a><span class="w">                </span><span class="n">socket</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-34-18" name="__codelineno-34-18"></a><span class="w">                </span><span class="k">break</span><span class="p">;</span>
<a id="__codelineno-34-19" name="__codelineno-34-19"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-34-20" name="__codelineno-34-20"></a>
<a id="__codelineno-34-21" name="__codelineno-34-21"></a><span class="w">            </span><span class="kt">byte</span><span class="o">[]</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">msg</span><span class="p">.</span><span class="na">getBytes</span><span class="p">();</span>
<a id="__codelineno-34-22" name="__codelineno-34-22"></a><span class="w">            </span><span class="n">DatagramPacket</span><span class="w"> </span><span class="n">packet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DatagramPacket</span><span class="p">(</span><span class="n">bytes</span><span class="p">,</span><span class="w"> </span><span class="n">bytes</span><span class="p">.</span><span class="na">length</span><span class="p">,</span>
<a id="__codelineno-34-23" name="__codelineno-34-23"></a><span class="w">                    </span><span class="n">InetAddress</span><span class="p">.</span><span class="na">getLocalHost</span><span class="p">(),</span><span class="w"> </span><span class="mi">8080</span><span class="p">);</span>
<a id="__codelineno-34-24" name="__codelineno-34-24"></a>
<a id="__codelineno-34-25" name="__codelineno-34-25"></a><span class="w">            </span><span class="c1">// 3、让发送端对象发送数据包的数据</span>
<a id="__codelineno-34-26" name="__codelineno-34-26"></a><span class="w">            </span><span class="n">socket</span><span class="p">.</span><span class="na">send</span><span class="p">(</span><span class="n">packet</span><span class="p">);</span>
<a id="__codelineno-34-27" name="__codelineno-34-27"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-34-28" name="__codelineno-34-28"></a>
<a id="__codelineno-34-29" name="__codelineno-34-29"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-34-30" name="__codelineno-34-30"></a><span class="p">}</span>
<a id="__codelineno-34-31" name="__codelineno-34-31"></a>
<a id="__codelineno-34-32" name="__codelineno-34-32"></a>
<a id="__codelineno-34-33" name="__codelineno-34-33"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UDPServerDemo2</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-34" name="__codelineno-34-34"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-35" name="__codelineno-34-35"></a><span class="w">        </span><span class="c1">// 目标：完成UDP通信多发多收：服务端开发。</span>
<a id="__codelineno-34-36" name="__codelineno-34-36"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;==服务端启动了===&quot;</span><span class="p">);</span>
<a id="__codelineno-34-37" name="__codelineno-34-37"></a><span class="w">        </span><span class="c1">// 1、创建接收端对象，注册端口。（接韭菜的人）</span>
<a id="__codelineno-34-38" name="__codelineno-34-38"></a><span class="w">        </span><span class="n">DatagramSocket</span><span class="w"> </span><span class="n">socket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DatagramSocket</span><span class="p">(</span><span class="mi">8080</span><span class="p">);</span>
<a id="__codelineno-34-39" name="__codelineno-34-39"></a>
<a id="__codelineno-34-40" name="__codelineno-34-40"></a><span class="w">        </span><span class="c1">// 2、创建一个数据包对象负责接收数据。（韭菜盘子）</span>
<a id="__codelineno-34-41" name="__codelineno-34-41"></a><span class="w">        </span><span class="kt">byte</span><span class="o">[]</span><span class="w"> </span><span class="n">buf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="kt">byte</span><span class="o">[</span><span class="mi">1024</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">64</span><span class="o">]</span><span class="p">;</span>
<a id="__codelineno-34-42" name="__codelineno-34-42"></a><span class="w">        </span><span class="n">DatagramPacket</span><span class="w"> </span><span class="n">packet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DatagramPacket</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">buf</span><span class="p">.</span><span class="na">length</span><span class="p">);</span>
<a id="__codelineno-34-43" name="__codelineno-34-43"></a>
<a id="__codelineno-34-44" name="__codelineno-34-44"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-45" name="__codelineno-34-45"></a><span class="w">            </span><span class="c1">// 3、接收数据，将数据封装到数据包对象的字节数组中去</span>
<a id="__codelineno-34-46" name="__codelineno-34-46"></a><span class="w">            </span><span class="n">socket</span><span class="p">.</span><span class="na">receive</span><span class="p">(</span><span class="n">packet</span><span class="p">);</span><span class="w"> </span><span class="c1">// 等待式接收数据。</span>
<a id="__codelineno-34-47" name="__codelineno-34-47"></a>
<a id="__codelineno-34-48" name="__codelineno-34-48"></a><span class="w">            </span><span class="c1">// 4、看看数据是否收到了</span>
<a id="__codelineno-34-49" name="__codelineno-34-49"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">packet</span><span class="p">.</span><span class="na">getLength</span><span class="p">();</span><span class="w">   </span><span class="c1">// 获取当前收到的数据长度。</span>
<a id="__codelineno-34-50" name="__codelineno-34-50"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="p">);</span>
<a id="__codelineno-34-51" name="__codelineno-34-51"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;服务端收到了：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">data</span><span class="p">);</span>
<a id="__codelineno-34-52" name="__codelineno-34-52"></a>
<a id="__codelineno-34-53" name="__codelineno-34-53"></a><span class="w">            </span><span class="c1">// 获取对方的ip对象和程序端口</span>
<a id="__codelineno-34-54" name="__codelineno-34-54"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">packet</span><span class="p">.</span><span class="na">getAddress</span><span class="p">().</span><span class="na">getHostAddress</span><span class="p">();</span>
<a id="__codelineno-34-55" name="__codelineno-34-55"></a><span class="w">            </span><span class="kt">int</span><span class="w"> </span><span class="n">port</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">packet</span><span class="p">.</span><span class="na">getPort</span><span class="p">();</span>
<a id="__codelineno-34-56" name="__codelineno-34-56"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;对方ip：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;   对方端口：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">port</span><span class="p">);</span>
<a id="__codelineno-34-57" name="__codelineno-34-57"></a>
<a id="__codelineno-34-58" name="__codelineno-34-58"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;----------------------------------------------&quot;</span><span class="p">);</span>
<a id="__codelineno-34-59" name="__codelineno-34-59"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-34-60" name="__codelineno-34-60"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-34-61" name="__codelineno-34-61"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="tcp">TCP通信<a class="headerlink" href="#tcp" title="Permanent link">&para;</a></h3>
<p>特点：面向连接、可靠通信；</p>
<p>TCP的最终目的：要保证在不可靠的信道上实现可靠的数据传输；</p>
<p>TCP主要通过三个步骤实现可靠传输：三次握手建立连接，传输数据进行确认，四次挥手断开连接；</p>
<h3 id="_37">综合案例<a class="headerlink" href="#_37" title="Permanent link">&para;</a></h3>
<h2 id="java_2">Java 高级技术<a class="headerlink" href="#java_2" title="Permanent link">&para;</a></h2>
<h3 id="_38">单元测试<a class="headerlink" href="#_38" title="Permanent link">&para;</a></h3>
<p>指的是针对最小的功能单元方法，编写测试代码对其进行正确性测试；</p>
<p>咱们之前是如何进行单元测试的？在 main 方法中调用该方法，编写测试代码，人为观测结果和预期是否一致；<strong>存在的问题：</strong></p>
<ul>
<li>只能在 main 方法编写测试代码，来调用其他方法进行测试；</li>
<li>无法实现自动化测试，一个方法测试失败，可能会影响其他方法测试；</li>
<li>无法得到测试的报告，需要程序员自己去观察测试是否成功；</li>
</ul>
<p>Junit 单元测试框架</p>
<p>为了解决上述问题，可以用 Junit 单元测试框架来对代码进行测试，由第三方公司开源（很多开发工具已经集成了 Junit 框架，比如 Idea）</p>
<p>优点：</p>
<ul>
<li><strong>可以灵活的编写测试代码，可以针对某个方法执行测试，也支持一键完成对全部方法的自动化测试，且各自独立；</strong></li>
<li>不需要程序员去分析测试的结果，会 <strong>自动生成测试报告</strong> 出来；</li>
</ul>
<p>Junit 单元测试的使用步骤</p>
<p>需求：某个系统，有多个业务方法，请使用 Junit 单元测试框架，编写测试代码，完成对这些方法的正确性测试；</p>
<p>具体步骤：</p>
<ol>
<li>将 Junit 框架的 jar 包导入到项目中（注意：Idea 中已经集成了 Junit 框架，不需要我们自己手工导入了）；</li>
<li>为需要测试的业务类，定义对应的测试类，并为每个业务方法，编写对应的 <strong>测试方法（要求：公开、无参、无返回值）；</strong></li>
<li>测试方法上 <strong>必须声明 <code>@Test</code></strong> 注解，然后在测试方法中，编写代码调用<span style="background:#6fe7dd; border-radius:5px; display:inline-block;">被测试的业务方法</span>进行测试；</li>
<li>开始测试，选中测试方法，右键选择“Junit 运行”，如果测试通过则是绿色；如果测试失败，则是红色；</li>
</ol>
<p>示例代码：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-35-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-35-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-35-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-35-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-35-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-35-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-35-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-35-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-35-10">10</a></span>
<span class="normal"><a href="#__codelineno-35-11">11</a></span>
<span class="normal"><a href="#__codelineno-35-12">12</a></span>
<span class="normal"><a href="#__codelineno-35-13">13</a></span>
<span class="normal"><a href="#__codelineno-35-14">14</a></span>
<span class="normal"><a href="#__codelineno-35-15">15</a></span>
<span class="normal"><a href="#__codelineno-35-16">16</a></span>
<span class="normal"><a href="#__codelineno-35-17">17</a></span>
<span class="normal"><a href="#__codelineno-35-18">18</a></span>
<span class="normal"><a href="#__codelineno-35-19">19</a></span>
<span class="normal"><a href="#__codelineno-35-20">20</a></span>
<span class="normal"><a href="#__codelineno-35-21">21</a></span>
<span class="normal"><a href="#__codelineno-35-22">22</a></span>
<span class="normal"><a href="#__codelineno-35-23">23</a></span>
<span class="normal"><a href="#__codelineno-35-24">24</a></span>
<span class="normal"><a href="#__codelineno-35-25">25</a></span>
<span class="normal"><a href="#__codelineno-35-26">26</a></span>
<span class="normal"><a href="#__codelineno-35-27">27</a></span>
<span class="normal"><a href="#__codelineno-35-28">28</a></span>
<span class="normal"><a href="#__codelineno-35-29">29</a></span>
<span class="normal"><a href="#__codelineno-35-30">30</a></span>
<span class="normal"><a href="#__codelineno-35-31">31</a></span>
<span class="normal"><a href="#__codelineno-35-32">32</a></span>
<span class="normal"><a href="#__codelineno-35-33">33</a></span>
<span class="normal"><a href="#__codelineno-35-34">34</a></span>
<span class="normal"><a href="#__codelineno-35-35">35</a></span>
<span class="normal"><a href="#__codelineno-35-36">36</a></span>
<span class="normal"><a href="#__codelineno-35-37">37</a></span>
<span class="normal"><a href="#__codelineno-35-38">38</a></span>
<span class="normal"><a href="#__codelineno-35-39">39</a></span>
<span class="normal"><a href="#__codelineno-35-40">40</a></span>
<span class="normal"><a href="#__codelineno-35-41">41</a></span>
<span class="normal"><a href="#__codelineno-35-42">42</a></span>
<span class="normal"><a href="#__codelineno-35-43">43</a></span>
<span class="normal"><a href="#__codelineno-35-44">44</a></span>
<span class="normal"><a href="#__codelineno-35-45">45</a></span>
<span class="normal"><a href="#__codelineno-35-46">46</a></span>
<span class="normal"><a href="#__codelineno-35-47">47</a></span>
<span class="normal"><a href="#__codelineno-35-48">48</a></span>
<span class="normal"><a href="#__codelineno-35-49">49</a></span>
<span class="normal"><a href="#__codelineno-35-50">50</a></span>
<span class="normal"><a href="#__codelineno-35-51">51</a></span>
<span class="normal"><a href="#__codelineno-35-52">52</a></span>
<span class="normal"><a href="#__codelineno-35-53">53</a></span>
<span class="normal"><a href="#__codelineno-35-54">54</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="cm">/**</span>
<a id="__codelineno-35-2" name="__codelineno-35-2"></a><span class="cm"> * 字符串工具类</span>
<a id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="cm"> */</span>
<a id="__codelineno-35-4" name="__codelineno-35-4"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">StringUtil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="w">    </span><span class="c1">// 工具一：获取给定字符串的长度；</span>
<a id="__codelineno-35-6" name="__codelineno-35-6"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">printNumber</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">){</span>
<a id="__codelineno-35-7" name="__codelineno-35-7"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">){</span>
<a id="__codelineno-35-8" name="__codelineno-35-8"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;参数为null！请注意&quot;</span><span class="p">);</span>
<a id="__codelineno-35-9" name="__codelineno-35-9"></a><span class="w">            </span><span class="k">return</span><span class="p">;</span>
<a id="__codelineno-35-10" name="__codelineno-35-10"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-35-11" name="__codelineno-35-11"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;名字长度是：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">name</span><span class="p">.</span><span class="na">length</span><span class="p">());</span>
<a id="__codelineno-35-12" name="__codelineno-35-12"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-35-13" name="__codelineno-35-13"></a>
<a id="__codelineno-35-14" name="__codelineno-35-14"></a>
<a id="__codelineno-35-15" name="__codelineno-35-15"></a><span class="w">     </span><span class="c1">// 工具二：获取字符串的最大索引</span>
<a id="__codelineno-35-16" name="__codelineno-35-16"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getMaxIndex</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">data</span><span class="p">){</span>
<a id="__codelineno-35-17" name="__codelineno-35-17"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">data</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-18" name="__codelineno-35-18"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-35-19" name="__codelineno-35-19"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-35-20" name="__codelineno-35-20"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">data</span><span class="p">.</span><span class="na">length</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<a id="__codelineno-35-21" name="__codelineno-35-21"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-35-22" name="__codelineno-35-22"></a><span class="p">}</span>
<a id="__codelineno-35-23" name="__codelineno-35-23"></a>
<a id="__codelineno-35-24" name="__codelineno-35-24"></a><span class="c1">// 测试类：junit单元测试框架，对业务类中的业务方法进行正确性测试。</span>
<a id="__codelineno-35-25" name="__codelineno-35-25"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">StringUtilTest</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-26" name="__codelineno-35-26"></a><span class="w">    </span><span class="c1">// 测试方法：必须是公开public，无参，无返回值。</span>
<a id="__codelineno-35-27" name="__codelineno-35-27"></a><span class="w">    </span><span class="c1">// 测试方法必须加上@Test注解（Junit框架的核心步骤）</span>
<a id="__codelineno-35-28" name="__codelineno-35-28"></a><span class="w">    </span><span class="nd">@Test</span>
<a id="__codelineno-35-29" name="__codelineno-35-29"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testPrinNumber</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-30" name="__codelineno-35-30"></a><span class="w">        </span><span class="c1">// 测试步骤：</span>
<a id="__codelineno-35-31" name="__codelineno-35-31"></a><span class="w">        </span><span class="n">StringUtil</span><span class="p">.</span><span class="na">printNumber</span><span class="p">(</span><span class="s">&quot;张三abc&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// 5</span>
<a id="__codelineno-35-32" name="__codelineno-35-32"></a><span class="w">        </span><span class="c1">// 测试用例</span>
<a id="__codelineno-35-33" name="__codelineno-35-33"></a><span class="w">        </span><span class="n">StringUtil</span><span class="p">.</span><span class="na">printNumber</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>
<a id="__codelineno-35-34" name="__codelineno-35-34"></a><span class="w">        </span><span class="n">StringUtil</span><span class="p">.</span><span class="na">printNumber</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<a id="__codelineno-35-35" name="__codelineno-35-35"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-35-36" name="__codelineno-35-36"></a>
<a id="__codelineno-35-37" name="__codelineno-35-37"></a><span class="w">    </span><span class="nd">@Test</span>
<a id="__codelineno-35-38" name="__codelineno-35-38"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testGetMaxIndex</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-39" name="__codelineno-35-39"></a><span class="w">        </span><span class="c1">// 测试步骤：</span>
<a id="__codelineno-35-40" name="__codelineno-35-40"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">index</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StringUtil</span><span class="p">.</span><span class="na">getMaxIndex</span><span class="p">(</span><span class="s">&quot;abcdefg&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// 6</span>
<a id="__codelineno-35-41" name="__codelineno-35-41"></a><span class="w">        </span><span class="c1">// 测试用例</span>
<a id="__codelineno-35-42" name="__codelineno-35-42"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">index2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StringUtil</span><span class="p">.</span><span class="na">getMaxIndex</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">);</span>
<a id="__codelineno-35-43" name="__codelineno-35-43"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">index3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">StringUtil</span><span class="p">.</span><span class="na">getMaxIndex</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
<a id="__codelineno-35-44" name="__codelineno-35-44"></a>
<a id="__codelineno-35-45" name="__codelineno-35-45"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">index</span><span class="p">);</span>
<a id="__codelineno-35-46" name="__codelineno-35-46"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">index2</span><span class="p">);</span>
<a id="__codelineno-35-47" name="__codelineno-35-47"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">index3</span><span class="p">);</span>
<a id="__codelineno-35-48" name="__codelineno-35-48"></a>
<a id="__codelineno-35-49" name="__codelineno-35-49"></a><span class="w">        </span><span class="c1">// 做断言：断言结果是否与预期结果一致</span>
<a id="__codelineno-35-50" name="__codelineno-35-50"></a><span class="w">        </span><span class="n">Assert</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="s">&quot;本轮测试失败，业务获取的最大索引有问题！请检查&quot;</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="n">index</span><span class="p">);</span>
<a id="__codelineno-35-51" name="__codelineno-35-51"></a><span class="w">        </span><span class="n">Assert</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="s">&quot;本轮测试失败，业务获取的最大索引有问题！请检查&quot;</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">index2</span><span class="p">);</span>
<a id="__codelineno-35-52" name="__codelineno-35-52"></a><span class="w">        </span><span class="n">Assert</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="s">&quot;本轮测试失败，业务获取的最大索引有问题！请检查&quot;</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">index3</span><span class="p">);</span>
<a id="__codelineno-35-53" name="__codelineno-35-53"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-35-54" name="__codelineno-35-54"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="_39">反射<a class="headerlink" href="#_39" title="Permanent link">&para;</a></h3>
<h4 id="_40">认识反射、获取类<a class="headerlink" href="#_40" title="Permanent link">&para;</a></h4>
<p>反射（Reflection）是 Java 语言提供的一种运行时动态操作类、对象、方法和属性的机制。通过反射，程序可以在运行时检查和修改类、接口、字段、方法等信息，甚至可以动态调用方法或创建对象，而无需在编译时知道这些信息。</p>
<p>反射是 Java 的运行时特性，允许程序 <strong>在运行时动态获取类的元数据（如类名、方法、构造函数、字段等），并通过这些元数据操作类或对象</strong>。反射的核心类和接口主要位于 <code>java.lang.reflect</code> 包中，常用的类包括：</p>
<ul>
<li>
<p><code>Class</code>：表示运行时的类或接口。</p>
</li>
<li>
<p><code>Field</code>：表示类的成员变量（字段）。</p>
</li>
<li>
<p><code>Method</code>：表示类的方法。</p>
</li>
<li>
<p><code>Constructor</code>：表示类的构造函数</p>
</li>
</ul>
<p>通过反射，程序可以动态地：</p>
<ul>
<li>获取类的结构信息（方法、字段、构造函数等）。</li>
<li>创建对象。</li>
<li>调用方法或修改字段值。</li>
<li>绕过访问权限限制（例如访问私有字段或方法）</li>
</ul>
<h5 id="class">反射第一步，获取类的 class 对象（类本身）<a class="headerlink" href="#class" title="Permanent link">&para;</a></h5>
<p>示例代码提供了获取类的 class 对象的三种方式：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-36-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-36-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-36-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-36-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-36-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-36-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-36-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-36-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-36-10">10</a></span>
<span class="normal"><a href="#__codelineno-36-11">11</a></span>
<span class="normal"><a href="#__codelineno-36-12">12</a></span>
<span class="normal"><a href="#__codelineno-36-13">13</a></span>
<span class="normal"><a href="#__codelineno-36-14">14</a></span>
<span class="normal"><a href="#__codelineno-36-15">15</a></span>
<span class="normal"><a href="#__codelineno-36-16">16</a></span>
<span class="normal"><a href="#__codelineno-36-17">17</a></span>
<span class="normal"><a href="#__codelineno-36-18">18</a></span>
<span class="normal"><a href="#__codelineno-36-19">19</a></span>
<span class="normal"><a href="#__codelineno-36-20">20</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ReflectDemo1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="w">        </span><span class="c1">// 目标：掌握反射第一步操作：或者类的Class对象。（获取类本身）。</span>
<a id="__codelineno-36-4" name="__codelineno-36-4"></a><span class="w">        </span><span class="c1">// 1、获取类本身：类.class</span>
<a id="__codelineno-36-5" name="__codelineno-36-5"></a><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Student</span><span class="p">.</span><span class="na">class</span><span class="p">;</span>
<a id="__codelineno-36-6" name="__codelineno-36-6"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">c1</span><span class="p">);</span>
<a id="__codelineno-36-7" name="__codelineno-36-7"></a>
<a id="__codelineno-36-8" name="__codelineno-36-8"></a><span class="w">        </span><span class="c1">// 2、获取类本身：Class.forName(&quot;类的全类名&quot;)</span>
<a id="__codelineno-36-9" name="__codelineno-36-9"></a><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">c2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Class</span><span class="p">.</span><span class="na">forName</span><span class="p">(</span><span class="s">&quot;com.itheima.demo2reflect.Student&quot;</span><span class="p">);</span>
<a id="__codelineno-36-10" name="__codelineno-36-10"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">c2</span><span class="p">);</span>
<a id="__codelineno-36-11" name="__codelineno-36-11"></a>
<a id="__codelineno-36-12" name="__codelineno-36-12"></a><span class="w">        </span><span class="c1">// 3、获取类本身：对象.getClass()</span>
<a id="__codelineno-36-13" name="__codelineno-36-13"></a><span class="w">        </span><span class="n">Student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Student</span><span class="p">();</span>
<a id="__codelineno-36-14" name="__codelineno-36-14"></a><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">c3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="na">getClass</span><span class="p">();</span>
<a id="__codelineno-36-15" name="__codelineno-36-15"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">c3</span><span class="p">);</span>
<a id="__codelineno-36-16" name="__codelineno-36-16"></a>
<a id="__codelineno-36-17" name="__codelineno-36-17"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">c1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">c2</span><span class="p">);</span><span class="w"> </span><span class="c1">// true</span>
<a id="__codelineno-36-18" name="__codelineno-36-18"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">c2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">c3</span><span class="p">);</span><span class="w"> </span><span class="c1">// true</span>
<a id="__codelineno-36-19" name="__codelineno-36-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-36-20" name="__codelineno-36-20"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h5 id="_41">反射获取类中的成分并操作<a class="headerlink" href="#_41" title="Permanent link">&para;</a></h5>
<p>Class 类提供了从类中 <strong>获取构造器</strong> 的方法：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Constructor &lt;?&gt; []  getConstructors()</td>
<td>获取全部构造器（只能获取 public 修饰的）</td>
</tr>
<tr>
<td>Constructor &lt;?&gt; []  <strong>getDeclaredConstructors</strong>()</td>
<td>获取全部构造器（只要存在就能拿到）</td>
</tr>
<tr>
<td>Constructor <T>  getConstructor(Class &lt;?&gt;...  parameterTypes)</td>
<td>获取某个构造器（只能获取 public 修饰的）</td>
</tr>
<tr>
<td>Constructor <T>  <strong>getDeclaredConstructor</strong>(Class &lt;?&gt;...  parameterTypes)</td>
<td>获取某个构造器（只要存在就能拿到）</td>
</tr>
</tbody>
</table>
<p>获取类构造器的作用：依然是初始化对象返回</p>
<table>
<thead>
<tr>
<th>Constructor 提供的方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>T newInstance(Object... initargs)</td>
<td>调用此构造器对象表示的构造器，并传入参数，完成对象的初始化并返回</td>
</tr>
<tr>
<td>public void setAccessible(boolean flag)</td>
<td>设置为 true，表示 <strong>禁止检查</strong> 访问控制（暴力反射）</td>
</tr>
</tbody>
</table>
<p><span style="background:#6fe7dd; border-radius:5px; display:inline-block;">暴力反射可以访问私有的构造器、方法、属性</span></p>
<hr />
<p>Class 类提供了从类中获取 <strong>成员变量</strong> 的方法：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public Field [] getFields()</td>
<td>获取类的全部成员变量（只能获取 public 修饰的）</td>
</tr>
<tr>
<td>public Field [] getDeclaredFields()</td>
<td>获取类的全部成员变量（只要存在就能拿到）</td>
</tr>
<tr>
<td>public Field getField(String name)</td>
<td>获取类的某个成员变量（只能获取 public 修饰的）</td>
</tr>
<tr>
<td>public Field getDeclaredField(String name)</td>
<td>获取类的某个成员变量（只要存在就能拿到）</td>
</tr>
</tbody>
</table>
<p>获取到成员变量的目的：依然是给成员变量进行赋值、或者取值；</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>void set(Object obj, Object value)：</td>
<td>赋值</td>
</tr>
<tr>
<td>Object get(Object obj)</td>
<td>取值</td>
</tr>
<tr>
<td>public void setAccessible(boolean flag)</td>
<td>设置为 true，表示 <strong>禁止检查</strong> 访问控制（暴力反射）</td>
</tr>
</tbody>
</table>
<hr />
<p>Class 提供了从类中获取 <strong>成员方法</strong> 的 API</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Method [] getMethods()</td>
<td>获取类的全部成员方法（只能获取 public 修饰的）</td>
</tr>
<tr>
<td>Method [] getDeclaredMethods()</td>
<td>获取类的全部成员方法（只要存在就能拿到）</td>
</tr>
<tr>
<td>Method getMethod(String name, Class &lt;?&gt;... parameterTypes)</td>
<td>获取类的某个成员方法（只能获取 public 修饰的）</td>
</tr>
<tr>
<td>Method getDeclaredMethod(String name, Class &lt;?&gt;... parameterTypes)</td>
<td>获取类的某个成员方法（只要存在就能拿到）</td>
</tr>
</tbody>
</table>
<p>获取成员方法的目的：执行成员方法</p>
<table>
<thead>
<tr>
<th>Method 提供的方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public Object invoke(Object obj, Object... args)</td>
<td>触发某个对象的该方法执行。</td>
</tr>
<tr>
<td>public void setAccessible(boolean flag)</td>
<td>设置为 true，表示 <strong>禁止检查</strong> 访问控制（暴力反射）</td>
</tr>
</tbody>
</table>
<p>示例代码：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1">  1</a></span>
<span class="normal"><a href="#__codelineno-37-2">  2</a></span>
<span class="normal"><a href="#__codelineno-37-3">  3</a></span>
<span class="normal"><a href="#__codelineno-37-4">  4</a></span>
<span class="normal"><a href="#__codelineno-37-5">  5</a></span>
<span class="normal"><a href="#__codelineno-37-6">  6</a></span>
<span class="normal"><a href="#__codelineno-37-7">  7</a></span>
<span class="normal"><a href="#__codelineno-37-8">  8</a></span>
<span class="normal"><a href="#__codelineno-37-9">  9</a></span>
<span class="normal"><a href="#__codelineno-37-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-37-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-37-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-37-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-37-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-37-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-37-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-37-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-37-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-37-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-37-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-37-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-37-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-37-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-37-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-37-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-37-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-37-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-37-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-37-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-37-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-37-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-37-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-37-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-37-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-37-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-37-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-37-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-37-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-37-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-37-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-37-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-37-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-37-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-37-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-37-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-37-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-37-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-37-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-37-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-37-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-37-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-37-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-37-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-37-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-37-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-37-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-37-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-37-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-37-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-37-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-37-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-37-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-37-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-37-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-37-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-37-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-37-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-37-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-37-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-37-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-37-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-37-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-37-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-37-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-37-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-37-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-37-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-37-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-37-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-37-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-37-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-37-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-37-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-37-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-37-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-37-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-37-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-37-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-37-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-37-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-37-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-37-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-37-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-37-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-37-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-37-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-37-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-37-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-37-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-37-100">100</a></span>
<span class="normal"><a href="#__codelineno-37-101">101</a></span>
<span class="normal"><a href="#__codelineno-37-102">102</a></span>
<span class="normal"><a href="#__codelineno-37-103">103</a></span>
<span class="normal"><a href="#__codelineno-37-104">104</a></span>
<span class="normal"><a href="#__codelineno-37-105">105</a></span>
<span class="normal"><a href="#__codelineno-37-106">106</a></span>
<span class="normal"><a href="#__codelineno-37-107">107</a></span>
<span class="normal"><a href="#__codelineno-37-108">108</a></span>
<span class="normal"><a href="#__codelineno-37-109">109</a></span>
<span class="normal"><a href="#__codelineno-37-110">110</a></span>
<span class="normal"><a href="#__codelineno-37-111">111</a></span>
<span class="normal"><a href="#__codelineno-37-112">112</a></span>
<span class="normal"><a href="#__codelineno-37-113">113</a></span>
<span class="normal"><a href="#__codelineno-37-114">114</a></span>
<span class="normal"><a href="#__codelineno-37-115">115</a></span>
<span class="normal"><a href="#__codelineno-37-116">116</a></span>
<span class="normal"><a href="#__codelineno-37-117">117</a></span>
<span class="normal"><a href="#__codelineno-37-118">118</a></span>
<span class="normal"><a href="#__codelineno-37-119">119</a></span>
<span class="normal"><a href="#__codelineno-37-120">120</a></span>
<span class="normal"><a href="#__codelineno-37-121">121</a></span>
<span class="normal"><a href="#__codelineno-37-122">122</a></span>
<span class="normal"><a href="#__codelineno-37-123">123</a></span>
<span class="normal"><a href="#__codelineno-37-124">124</a></span>
<span class="normal"><a href="#__codelineno-37-125">125</a></span>
<span class="normal"><a href="#__codelineno-37-126">126</a></span>
<span class="normal"><a href="#__codelineno-37-127">127</a></span>
<span class="normal"><a href="#__codelineno-37-128">128</a></span>
<span class="normal"><a href="#__codelineno-37-129">129</a></span>
<span class="normal"><a href="#__codelineno-37-130">130</a></span>
<span class="normal"><a href="#__codelineno-37-131">131</a></span>
<span class="normal"><a href="#__codelineno-37-132">132</a></span>
<span class="normal"><a href="#__codelineno-37-133">133</a></span>
<span class="normal"><a href="#__codelineno-37-134">134</a></span>
<span class="normal"><a href="#__codelineno-37-135">135</a></span>
<span class="normal"><a href="#__codelineno-37-136">136</a></span>
<span class="normal"><a href="#__codelineno-37-137">137</a></span>
<span class="normal"><a href="#__codelineno-37-138">138</a></span>
<span class="normal"><a href="#__codelineno-37-139">139</a></span>
<span class="normal"><a href="#__codelineno-37-140">140</a></span>
<span class="normal"><a href="#__codelineno-37-141">141</a></span>
<span class="normal"><a href="#__codelineno-37-142">142</a></span>
<span class="normal"><a href="#__codelineno-37-143">143</a></span>
<span class="normal"><a href="#__codelineno-37-144">144</a></span>
<span class="normal"><a href="#__codelineno-37-145">145</a></span>
<span class="normal"><a href="#__codelineno-37-146">146</a></span>
<span class="normal"><a href="#__codelineno-37-147">147</a></span>
<span class="normal"><a href="#__codelineno-37-148">148</a></span>
<span class="normal"><a href="#__codelineno-37-149">149</a></span>
<span class="normal"><a href="#__codelineno-37-150">150</a></span>
<span class="normal"><a href="#__codelineno-37-151">151</a></span>
<span class="normal"><a href="#__codelineno-37-152">152</a></span>
<span class="normal"><a href="#__codelineno-37-153">153</a></span>
<span class="normal"><a href="#__codelineno-37-154">154</a></span>
<span class="normal"><a href="#__codelineno-37-155">155</a></span>
<span class="normal"><a href="#__codelineno-37-156">156</a></span>
<span class="normal"><a href="#__codelineno-37-157">157</a></span>
<span class="normal"><a href="#__codelineno-37-158">158</a></span>
<span class="normal"><a href="#__codelineno-37-159">159</a></span>
<span class="normal"><a href="#__codelineno-37-160">160</a></span>
<span class="normal"><a href="#__codelineno-37-161">161</a></span>
<span class="normal"><a href="#__codelineno-37-162">162</a></span>
<span class="normal"><a href="#__codelineno-37-163">163</a></span>
<span class="normal"><a href="#__codelineno-37-164">164</a></span>
<span class="normal"><a href="#__codelineno-37-165">165</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ReflectDemo2</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-2" name="__codelineno-37-2"></a><span class="w">    </span><span class="nd">@Test</span>
<a id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">getClassInfo</span><span class="p">(){</span>
<a id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="w">        </span><span class="c1">// 目标：获取类的信息。</span>
<a id="__codelineno-37-5" name="__codelineno-37-5"></a><span class="w">        </span><span class="c1">// 1、反射第一步：或者Class对象，代表拿到类。</span>
<a id="__codelineno-37-6" name="__codelineno-37-6"></a><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Student</span><span class="p">.</span><span class="na">class</span><span class="p">;</span>
<a id="__codelineno-37-7" name="__codelineno-37-7"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">c1</span><span class="p">.</span><span class="na">getName</span><span class="p">());</span><span class="w"> </span><span class="c1">// 类名的全类名 com.itheima.demo2reflect.Student</span>
<a id="__codelineno-37-8" name="__codelineno-37-8"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">c1</span><span class="p">.</span><span class="na">getSimpleName</span><span class="p">());</span><span class="w"> </span><span class="c1">// 类名 Student</span>
<a id="__codelineno-37-9" name="__codelineno-37-9"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-10" name="__codelineno-37-10"></a>
<a id="__codelineno-37-11" name="__codelineno-37-11"></a><span class="w">    </span><span class="c1">// 2、获取类的构造器对象并对其进行操作。</span>
<a id="__codelineno-37-12" name="__codelineno-37-12"></a><span class="w">    </span><span class="nd">@Test</span>
<a id="__codelineno-37-13" name="__codelineno-37-13"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">getConstructorInfo</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-14" name="__codelineno-37-14"></a><span class="w">        </span><span class="c1">// 目标：获取类的构造器对象并对其进行操作。</span>
<a id="__codelineno-37-15" name="__codelineno-37-15"></a><span class="w">        </span><span class="c1">// 1、反射第一步：或者Class对象，代表拿到类。</span>
<a id="__codelineno-37-16" name="__codelineno-37-16"></a><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Dog</span><span class="p">.</span><span class="na">class</span><span class="p">;</span>
<a id="__codelineno-37-17" name="__codelineno-37-17"></a><span class="w">        </span><span class="c1">// 2、获取构造器对象。</span>
<a id="__codelineno-37-18" name="__codelineno-37-18"></a><span class="w">        </span><span class="n">Constructor</span><span class="o">[]</span><span class="w"> </span><span class="n">cons</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getDeclaredConstructors</span><span class="p">();</span>
<a id="__codelineno-37-19" name="__codelineno-37-19"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Constructor</span><span class="w"> </span><span class="n">con</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">cons</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-20" name="__codelineno-37-20"></a><span class="w">            </span><span class="c1">// getParameterCount()获取构造器的参数个数</span>
<a id="__codelineno-37-21" name="__codelineno-37-21"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">con</span><span class="p">.</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;(&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">con</span><span class="p">.</span><span class="na">getParameterCount</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="p">);</span>
<a id="__codelineno-37-22" name="__codelineno-37-22"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-37-23" name="__codelineno-37-23"></a><span class="w">        </span><span class="c1">// 3、获取单个构造器</span>
<a id="__codelineno-37-24" name="__codelineno-37-24"></a><span class="w">        </span><span class="n">Constructor</span><span class="w"> </span><span class="n">con</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getDeclaredConstructor</span><span class="p">();</span><span class="w"> </span><span class="c1">// 无参数构造器</span>
<a id="__codelineno-37-25" name="__codelineno-37-25"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">con</span><span class="p">.</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;(&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">con</span><span class="p">.</span><span class="na">getParameterCount</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="p">);</span>
<a id="__codelineno-37-26" name="__codelineno-37-26"></a>
<a id="__codelineno-37-27" name="__codelineno-37-27"></a><span class="w">        </span><span class="n">Constructor</span><span class="w"> </span><span class="n">con2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getDeclaredConstructor</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"> </span><span class="c1">// 2个参数的有参数构造器</span>
<a id="__codelineno-37-28" name="__codelineno-37-28"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">con2</span><span class="p">.</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;(&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">con2</span><span class="p">.</span><span class="na">getParameterCount</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="p">);</span>
<a id="__codelineno-37-29" name="__codelineno-37-29"></a>
<a id="__codelineno-37-30" name="__codelineno-37-30"></a><span class="w">        </span><span class="c1">// 4、获取构造器的作用依然是创建对象：创建对象。</span>
<a id="__codelineno-37-31" name="__codelineno-37-31"></a><span class="w">        </span><span class="c1">// 暴力反射：暴力反射可以访问私有的构造器、方法、属性。</span>
<a id="__codelineno-37-32" name="__codelineno-37-32"></a><span class="w">        </span><span class="n">con</span><span class="p">.</span><span class="na">setAccessible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w"> </span><span class="c1">// 绕过访问权限，直接访问！</span>
<a id="__codelineno-37-33" name="__codelineno-37-33"></a><span class="w">        </span><span class="n">Dog</span><span class="w"> </span><span class="n">d1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Dog</span><span class="p">)</span><span class="w"> </span><span class="n">con</span><span class="p">.</span><span class="na">newInstance</span><span class="p">();</span>
<a id="__codelineno-37-34" name="__codelineno-37-34"></a><span class="w">        </span><span class="c1">// System.out.println(d1.name);</span>
<a id="__codelineno-37-35" name="__codelineno-37-35"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">d1</span><span class="p">);</span>
<a id="__codelineno-37-36" name="__codelineno-37-36"></a>
<a id="__codelineno-37-37" name="__codelineno-37-37"></a><span class="w">        </span><span class="n">Dog</span><span class="w"> </span><span class="n">d2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">Dog</span><span class="p">)</span><span class="n">con2</span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="s">&quot;小黑&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>
<a id="__codelineno-37-38" name="__codelineno-37-38"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">d2</span><span class="p">);</span>
<a id="__codelineno-37-39" name="__codelineno-37-39"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-40" name="__codelineno-37-40"></a>
<a id="__codelineno-37-41" name="__codelineno-37-41"></a><span class="w">    </span><span class="c1">// 3、获取类的成员变量对象并对其进行操作。</span>
<a id="__codelineno-37-42" name="__codelineno-37-42"></a><span class="w">    </span><span class="nd">@Test</span>
<a id="__codelineno-37-43" name="__codelineno-37-43"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">getFieldInfo</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-44" name="__codelineno-37-44"></a><span class="w">        </span><span class="c1">// 目标：获取类的成员变量对象并对其进行操作。</span>
<a id="__codelineno-37-45" name="__codelineno-37-45"></a><span class="w">        </span><span class="c1">// 1、反射第一步：或者Class对象，代表拿到类。</span>
<a id="__codelineno-37-46" name="__codelineno-37-46"></a><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Dog</span><span class="p">.</span><span class="na">class</span><span class="p">;</span>
<a id="__codelineno-37-47" name="__codelineno-37-47"></a><span class="w">        </span><span class="c1">// 2、获取成员变量对象。</span>
<a id="__codelineno-37-48" name="__codelineno-37-48"></a><span class="w">        </span><span class="n">Field</span><span class="o">[]</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getDeclaredFields</span><span class="p">();</span>
<a id="__codelineno-37-49" name="__codelineno-37-49"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Field</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">fields</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-50" name="__codelineno-37-50"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">field</span><span class="p">.</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;(&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">field</span><span class="p">.</span><span class="na">getType</span><span class="p">().</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="p">);</span>
<a id="__codelineno-37-51" name="__codelineno-37-51"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-37-52" name="__codelineno-37-52"></a><span class="w">        </span><span class="c1">// 3、获取单个成员变量对象。</span>
<a id="__codelineno-37-53" name="__codelineno-37-53"></a><span class="w">        </span><span class="n">Field</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getDeclaredField</span><span class="p">(</span><span class="s">&quot;hobby&quot;</span><span class="p">);</span>
<a id="__codelineno-37-54" name="__codelineno-37-54"></a><span class="w">        </span><span class="c1">// field.setAccessible(true);</span>
<a id="__codelineno-37-55" name="__codelineno-37-55"></a><span class="w">        </span><span class="c1">// System.out.println(c1.getName());</span>
<a id="__codelineno-37-56" name="__codelineno-37-56"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">field</span><span class="p">.</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;(&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">field</span><span class="p">.</span><span class="na">getType</span><span class="p">().</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="p">);</span>
<a id="__codelineno-37-57" name="__codelineno-37-57"></a>
<a id="__codelineno-37-58" name="__codelineno-37-58"></a><span class="w">        </span><span class="n">Field</span><span class="w"> </span><span class="n">field2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getDeclaredField</span><span class="p">(</span><span class="s">&quot;age&quot;</span><span class="p">);</span>
<a id="__codelineno-37-59" name="__codelineno-37-59"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">field2</span><span class="p">.</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;(&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">field2</span><span class="p">.</span><span class="na">getType</span><span class="p">().</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="p">);</span>
<a id="__codelineno-37-60" name="__codelineno-37-60"></a>
<a id="__codelineno-37-61" name="__codelineno-37-61"></a><span class="w">        </span><span class="c1">// 4、获取成员变量的目的依然是取值和赋值。</span>
<a id="__codelineno-37-62" name="__codelineno-37-62"></a><span class="w">        </span><span class="n">Dog</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dog</span><span class="p">(</span><span class="s">&quot;泰迪&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>
<a id="__codelineno-37-63" name="__codelineno-37-63"></a><span class="w">        </span><span class="n">field</span><span class="p">.</span><span class="na">setAccessible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w"> </span><span class="c1">// 绕过访问权限，直接访问！</span>
<a id="__codelineno-37-64" name="__codelineno-37-64"></a><span class="w">        </span><span class="n">field</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;社交&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">//   d.setHobby(&quot;社交&quot;);</span>
<a id="__codelineno-37-65" name="__codelineno-37-65"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">d</span><span class="p">);</span>
<a id="__codelineno-37-66" name="__codelineno-37-66"></a>
<a id="__codelineno-37-67" name="__codelineno-37-67"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">hobby</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="p">)</span><span class="w"> </span><span class="n">field</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">d</span><span class="p">);</span><span class="w"> </span><span class="c1">// d.getHobby();</span>
<a id="__codelineno-37-68" name="__codelineno-37-68"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">hobby</span><span class="p">);</span>
<a id="__codelineno-37-69" name="__codelineno-37-69"></a>
<a id="__codelineno-37-70" name="__codelineno-37-70"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-71" name="__codelineno-37-71"></a>
<a id="__codelineno-37-72" name="__codelineno-37-72"></a><span class="w">    </span><span class="c1">// 4、获取类的成员方法对象并对其进行操作。</span>
<a id="__codelineno-37-73" name="__codelineno-37-73"></a><span class="w">    </span><span class="nd">@Test</span>
<a id="__codelineno-37-74" name="__codelineno-37-74"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">getMethodInfo</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-75" name="__codelineno-37-75"></a><span class="w">        </span><span class="c1">// 目标：获取类的成员方法对象并对其进行操作。</span>
<a id="__codelineno-37-76" name="__codelineno-37-76"></a><span class="w">        </span><span class="c1">// 1、反射第一步：或者Class对象，代表拿到类。</span>
<a id="__codelineno-37-77" name="__codelineno-37-77"></a><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Dog</span><span class="p">.</span><span class="na">class</span><span class="p">;</span>
<a id="__codelineno-37-78" name="__codelineno-37-78"></a><span class="w">        </span><span class="c1">// 2、获取成员方法对象。</span>
<a id="__codelineno-37-79" name="__codelineno-37-79"></a><span class="w">        </span><span class="n">Method</span><span class="o">[]</span><span class="w"> </span><span class="n">methods</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getDeclaredMethods</span><span class="p">();</span>
<a id="__codelineno-37-80" name="__codelineno-37-80"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Method</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">methods</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-81" name="__codelineno-37-81"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">method</span><span class="p">.</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;(&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">method</span><span class="p">.</span><span class="na">getParameterCount</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="p">);</span>
<a id="__codelineno-37-82" name="__codelineno-37-82"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-37-83" name="__codelineno-37-83"></a><span class="w">        </span><span class="c1">// 3、获取单个成员方法对象。</span>
<a id="__codelineno-37-84" name="__codelineno-37-84"></a><span class="w">        </span><span class="n">Method</span><span class="w"> </span><span class="n">m1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getDeclaredMethod</span><span class="p">(</span><span class="s">&quot;eat&quot;</span><span class="p">);</span><span class="c1">// 获取是无参数的eat方法</span>
<a id="__codelineno-37-85" name="__codelineno-37-85"></a><span class="w">        </span><span class="n">Method</span><span class="w"> </span><span class="n">m2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getDeclaredMethod</span><span class="p">(</span><span class="s">&quot;eat&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="c1">// 获取是有参数的eat方法</span>
<a id="__codelineno-37-86" name="__codelineno-37-86"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">m1</span><span class="p">.</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;(&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">m1</span><span class="p">.</span><span class="na">getParameterCount</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="p">);</span>
<a id="__codelineno-37-87" name="__codelineno-37-87"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">m2</span><span class="p">.</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;(&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">m2</span><span class="p">.</span><span class="na">getParameterCount</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;)&quot;</span><span class="p">);</span>
<a id="__codelineno-37-88" name="__codelineno-37-88"></a>
<a id="__codelineno-37-89" name="__codelineno-37-89"></a><span class="w">        </span><span class="c1">// 4、获取成员方法的目的依然是调用方法。</span>
<a id="__codelineno-37-90" name="__codelineno-37-90"></a><span class="w">        </span><span class="n">Dog</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dog</span><span class="p">(</span><span class="s">&quot;泰迪&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>
<a id="__codelineno-37-91" name="__codelineno-37-91"></a><span class="w">        </span><span class="n">m1</span><span class="p">.</span><span class="na">setAccessible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w"> </span><span class="c1">// 绕过访问权限，直接访问！</span>
<a id="__codelineno-37-92" name="__codelineno-37-92"></a><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">rs1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m1</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="n">d</span><span class="p">);</span><span class="w"> </span><span class="c1">// 唤醒对象d的eat方法执行，相当于 d.eat();</span>
<a id="__codelineno-37-93" name="__codelineno-37-93"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">rs1</span><span class="p">);</span><span class="w"> </span><span class="c1">// null</span>
<a id="__codelineno-37-94" name="__codelineno-37-94"></a>
<a id="__codelineno-37-95" name="__codelineno-37-95"></a><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">rs2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">m2</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;牛肉&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// 唤醒对象d的eat带String参数的方法执行，相当于 d.eat(&quot;牛肉&quot;);</span>
<a id="__codelineno-37-96" name="__codelineno-37-96"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">rs2</span><span class="p">);</span>
<a id="__codelineno-37-97" name="__codelineno-37-97"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-98" name="__codelineno-37-98"></a><span class="p">}</span>
<a id="__codelineno-37-99" name="__codelineno-37-99"></a>
<a id="__codelineno-37-100" name="__codelineno-37-100"></a>
<a id="__codelineno-37-101" name="__codelineno-37-101"></a>
<a id="__codelineno-37-102" name="__codelineno-37-102"></a><span class="kn">package</span><span class="w"> </span><span class="nn">com.itheima.demo2reflect</span><span class="p">;</span>
<a id="__codelineno-37-103" name="__codelineno-37-103"></a>
<a id="__codelineno-37-104" name="__codelineno-37-104"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Dog</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-105" name="__codelineno-37-105"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<a id="__codelineno-37-106" name="__codelineno-37-106"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<a id="__codelineno-37-107" name="__codelineno-37-107"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">hobby</span><span class="p">;</span>
<a id="__codelineno-37-108" name="__codelineno-37-108"></a><span class="w">    </span><span class="c1">// 无参构造器</span>
<a id="__codelineno-37-109" name="__codelineno-37-109"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">Dog</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-110" name="__codelineno-37-110"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;无参数构造器执行了~~&quot;</span><span class="p">);</span>
<a id="__codelineno-37-111" name="__codelineno-37-111"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-112" name="__codelineno-37-112"></a><span class="w">    </span><span class="c1">// 带一个参数的构造器</span>
<a id="__codelineno-37-113" name="__codelineno-37-113"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="nf">Dog</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-114" name="__codelineno-37-114"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;1个参数有参数构造器执行了~~&quot;</span><span class="p">);</span>
<a id="__codelineno-37-115" name="__codelineno-37-115"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<a id="__codelineno-37-116" name="__codelineno-37-116"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-117" name="__codelineno-37-117"></a><span class="w">    </span><span class="c1">// 带两个参数的构造器</span>
<a id="__codelineno-37-118" name="__codelineno-37-118"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Dog</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-119" name="__codelineno-37-119"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;2个参数有参数构造器执行了~~&quot;</span><span class="p">);</span>
<a id="__codelineno-37-120" name="__codelineno-37-120"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<a id="__codelineno-37-121" name="__codelineno-37-121"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<a id="__codelineno-37-122" name="__codelineno-37-122"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-123" name="__codelineno-37-123"></a><span class="w">    </span><span class="c1">// 不带参数的eat()方法</span>
<a id="__codelineno-37-124" name="__codelineno-37-124"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">eat</span><span class="p">(){</span>
<a id="__codelineno-37-125" name="__codelineno-37-125"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;狗吃骨头！&quot;</span><span class="p">);</span>
<a id="__codelineno-37-126" name="__codelineno-37-126"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-127" name="__codelineno-37-127"></a><span class="w">    </span><span class="c1">// 带一个参数的eat()方法</span>
<a id="__codelineno-37-128" name="__codelineno-37-128"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">eat</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">){</span>
<a id="__codelineno-37-129" name="__codelineno-37-129"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;狗吃&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">name</span><span class="p">);</span>
<a id="__codelineno-37-130" name="__codelineno-37-130"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;狗说：谢谢！谢谢！汪汪汪！&quot;</span><span class="p">;</span>
<a id="__codelineno-37-131" name="__codelineno-37-131"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-132" name="__codelineno-37-132"></a>
<a id="__codelineno-37-133" name="__codelineno-37-133"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getName</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-134" name="__codelineno-37-134"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<a id="__codelineno-37-135" name="__codelineno-37-135"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-136" name="__codelineno-37-136"></a>
<a id="__codelineno-37-137" name="__codelineno-37-137"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setName</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-138" name="__codelineno-37-138"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<a id="__codelineno-37-139" name="__codelineno-37-139"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-140" name="__codelineno-37-140"></a>
<a id="__codelineno-37-141" name="__codelineno-37-141"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">getAge</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-142" name="__codelineno-37-142"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<a id="__codelineno-37-143" name="__codelineno-37-143"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-144" name="__codelineno-37-144"></a>
<a id="__codelineno-37-145" name="__codelineno-37-145"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setAge</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-146" name="__codelineno-37-146"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">age</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<a id="__codelineno-37-147" name="__codelineno-37-147"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-148" name="__codelineno-37-148"></a>
<a id="__codelineno-37-149" name="__codelineno-37-149"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">getHobby</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-150" name="__codelineno-37-150"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">hobby</span><span class="p">;</span>
<a id="__codelineno-37-151" name="__codelineno-37-151"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-152" name="__codelineno-37-152"></a>
<a id="__codelineno-37-153" name="__codelineno-37-153"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setHobby</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">hobby</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-154" name="__codelineno-37-154"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">hobby</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hobby</span><span class="p">;</span>
<a id="__codelineno-37-155" name="__codelineno-37-155"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-156" name="__codelineno-37-156"></a>
<a id="__codelineno-37-157" name="__codelineno-37-157"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-37-158" name="__codelineno-37-158"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">toString</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-159" name="__codelineno-37-159"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Dog{&quot;</span><span class="w"> </span><span class="o">+</span>
<a id="__codelineno-37-160" name="__codelineno-37-160"></a><span class="w">                </span><span class="s">&quot;name=&#39;&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="sc">&#39;\&#39;&#39;</span><span class="w"> </span><span class="o">+</span>
<a id="__codelineno-37-161" name="__codelineno-37-161"></a><span class="w">                </span><span class="s">&quot;, age=&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">age</span><span class="w"> </span><span class="o">+</span>
<a id="__codelineno-37-162" name="__codelineno-37-162"></a><span class="w">                </span><span class="s">&quot;, hobby=&#39;&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">hobby</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="sc">&#39;\&#39;&#39;</span><span class="w"> </span><span class="o">+</span>
<a id="__codelineno-37-163" name="__codelineno-37-163"></a><span class="w">                </span><span class="sc">&#39;}&#39;</span><span class="p">;</span>
<a id="__codelineno-37-164" name="__codelineno-37-164"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-37-165" name="__codelineno-37-165"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="_42">反射的作用、应用场景<a class="headerlink" href="#_42" title="Permanent link">&para;</a></h4>
<p>反射的作用：</p>
<ul>
<li>拿到一个类的 class 本身的全部成分然后进行操作；</li>
<li>可以破坏封装性（通过暴力反射访问私有构造器、成员变量、成员方法）；</li>
<li>可以绕过泛型的约束；</li>
<li>最重要的用途：适合做 Java 的框架，基本上主流的框架都会基于反射设计出一些通用的功能；</li>
</ul>
<p>示例代码：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-38-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-38-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-38-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-38-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-38-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-38-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-38-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-38-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-38-10">10</a></span>
<span class="normal"><a href="#__codelineno-38-11">11</a></span>
<span class="normal"><a href="#__codelineno-38-12">12</a></span>
<span class="normal"><a href="#__codelineno-38-13">13</a></span>
<span class="normal"><a href="#__codelineno-38-14">14</a></span>
<span class="normal"><a href="#__codelineno-38-15">15</a></span>
<span class="normal"><a href="#__codelineno-38-16">16</a></span>
<span class="normal"><a href="#__codelineno-38-17">17</a></span>
<span class="normal"><a href="#__codelineno-38-18">18</a></span>
<span class="normal"><a href="#__codelineno-38-19">19</a></span>
<span class="normal"><a href="#__codelineno-38-20">20</a></span>
<span class="normal"><a href="#__codelineno-38-21">21</a></span>
<span class="normal"><a href="#__codelineno-38-22">22</a></span>
<span class="normal"><a href="#__codelineno-38-23">23</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ReflectDemo3</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-2" name="__codelineno-38-2"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="w">        </span><span class="c1">// 目标：反射的基本作用。</span>
<a id="__codelineno-38-4" name="__codelineno-38-4"></a><span class="w">        </span><span class="c1">// 1、类的全部成分的获取</span>
<a id="__codelineno-38-5" name="__codelineno-38-5"></a><span class="w">        </span><span class="c1">// 2、可以破坏封装性</span>
<a id="__codelineno-38-6" name="__codelineno-38-6"></a><span class="w">        </span><span class="c1">// 3、可以绕过泛型的约束。</span>
<a id="__codelineno-38-7" name="__codelineno-38-7"></a><span class="w">        </span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ArrayList</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<a id="__codelineno-38-8" name="__codelineno-38-8"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;张无忌&quot;</span><span class="p">);</span>
<a id="__codelineno-38-9" name="__codelineno-38-9"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;令狐冲&quot;</span><span class="p">);</span>
<a id="__codelineno-38-10" name="__codelineno-38-10"></a><span class="w">        </span><span class="n">list</span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;东方不败&quot;</span><span class="p">);</span>
<a id="__codelineno-38-11" name="__codelineno-38-11"></a><span class="w">        </span><span class="c1">// list.add(9.9);</span>
<a id="__codelineno-38-12" name="__codelineno-38-12"></a><span class="w">        </span><span class="c1">// list.add(true);</span>
<a id="__codelineno-38-13" name="__codelineno-38-13"></a>
<a id="__codelineno-38-14" name="__codelineno-38-14"></a><span class="w">        </span><span class="c1">// 反射绕过泛型约束的原理：泛型在编译得到字节码时，会擦除泛型信息。</span>
<a id="__codelineno-38-15" name="__codelineno-38-15"></a><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="p">.</span><span class="na">getClass</span><span class="p">();</span><span class="w"> </span><span class="c1">// c1 == ArrayList.class</span>
<a id="__codelineno-38-16" name="__codelineno-38-16"></a><span class="w">        </span><span class="c1">// 逆向获取 ArrayList 类的add方法</span>
<a id="__codelineno-38-17" name="__codelineno-38-17"></a><span class="w">        </span><span class="n">Method</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getDeclaredMethod</span><span class="p">(</span><span class="s">&quot;add&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<a id="__codelineno-38-18" name="__codelineno-38-18"></a><span class="w">        </span><span class="c1">// 触发list集合对象的add方法执行。</span>
<a id="__codelineno-38-19" name="__codelineno-38-19"></a><span class="w">        </span><span class="n">add</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="mf">9.9</span><span class="p">);</span><span class="w"> </span><span class="c1">// 翻墙</span>
<a id="__codelineno-38-20" name="__codelineno-38-20"></a><span class="w">        </span><span class="n">add</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">);</span><span class="w"> </span><span class="c1">// 翻墙</span>
<a id="__codelineno-38-21" name="__codelineno-38-21"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">list</span><span class="p">);</span>
<a id="__codelineno-38-22" name="__codelineno-38-22"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-38-23" name="__codelineno-38-23"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>使用反射做一个简易版的框架，需求：</p>
<ul>
<li>对于 <strong>任意</strong> 一个对象，该框架都可以把 <strong>对象的字段名和对应的值</strong>，保存到文件中去；</li>
</ul>
<p>分析：如果只是简单的用一个方法来接收一个对象，来获取它的所有字段名和对应的值，无法实现对任意对象都通用；因此可以想到应该使用泛型，通过泛型来实现接收任意一个对象的功能（或者使用所有对象的祖宗类 Object，用多态来实现接收不同类型的对象），但接收一个对象前，我们并不知道该对象中有哪些字段名、更不知道字段名对应的值，就无法实现将它们写入到文件中，这里就需要用到刚才学的反射，对传进来的泛型对象，用反射获取该对象的 class 本身，从而获取它的所有 Filed 字段名和对应的字段值，再将它们写入到文件中；</p>
<p>实现代码如下：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-39-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-39-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-39-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-39-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-39-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-39-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-39-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-39-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-39-10">10</a></span>
<span class="normal"><a href="#__codelineno-39-11">11</a></span>
<span class="normal"><a href="#__codelineno-39-12">12</a></span>
<span class="normal"><a href="#__codelineno-39-13">13</a></span>
<span class="normal"><a href="#__codelineno-39-14">14</a></span>
<span class="normal"><a href="#__codelineno-39-15">15</a></span>
<span class="normal"><a href="#__codelineno-39-16">16</a></span>
<span class="normal"><a href="#__codelineno-39-17">17</a></span>
<span class="normal"><a href="#__codelineno-39-18">18</a></span>
<span class="normal"><a href="#__codelineno-39-19">19</a></span>
<span class="normal"><a href="#__codelineno-39-20">20</a></span>
<span class="normal"><a href="#__codelineno-39-21">21</a></span>
<span class="normal"><a href="#__codelineno-39-22">22</a></span>
<span class="normal"><a href="#__codelineno-39-23">23</a></span>
<span class="normal"><a href="#__codelineno-39-24">24</a></span>
<span class="normal"><a href="#__codelineno-39-25">25</a></span>
<span class="normal"><a href="#__codelineno-39-26">26</a></span>
<span class="normal"><a href="#__codelineno-39-27">27</a></span>
<span class="normal"><a href="#__codelineno-39-28">28</a></span>
<span class="normal"><a href="#__codelineno-39-29">29</a></span>
<span class="normal"><a href="#__codelineno-39-30">30</a></span>
<span class="normal"><a href="#__codelineno-39-31">31</a></span>
<span class="normal"><a href="#__codelineno-39-32">32</a></span>
<span class="normal"><a href="#__codelineno-39-33">33</a></span>
<span class="normal"><a href="#__codelineno-39-34">34</a></span>
<span class="normal"><a href="#__codelineno-39-35">35</a></span>
<span class="normal"><a href="#__codelineno-39-36">36</a></span>
<span class="normal"><a href="#__codelineno-39-37">37</a></span>
<span class="normal"><a href="#__codelineno-39-38">38</a></span>
<span class="normal"><a href="#__codelineno-39-39">39</a></span>
<span class="normal"><a href="#__codelineno-39-40">40</a></span>
<span class="normal"><a href="#__codelineno-39-41">41</a></span>
<span class="normal"><a href="#__codelineno-39-42">42</a></span>
<span class="normal"><a href="#__codelineno-39-43">43</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SaveObjectFrameWork</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-2" name="__codelineno-39-2"></a><span class="w">    </span><span class="c1">// 保存任意对象的静态方法</span>
<a id="__codelineno-39-3" name="__codelineno-39-3"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">saveObject</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-4" name="__codelineno-39-4"></a><span class="w">        </span><span class="n">PrintStream</span><span class="w"> </span><span class="n">ps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PrintStream</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">FileOutputStream</span><span class="p">(</span><span class="s">&quot;day06-junit-reflect-annotation-proxy/src/obj.txt&quot;</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">));</span>
<a id="__codelineno-39-5" name="__codelineno-39-5"></a><span class="w">        </span><span class="c1">// obj 可能是学生  老师  狗</span>
<a id="__codelineno-39-6" name="__codelineno-39-6"></a><span class="w">        </span><span class="c1">// 只有反射可以直到对象有多少个字段：</span>
<a id="__codelineno-39-7" name="__codelineno-39-7"></a><span class="w">        </span><span class="c1">// 1. 获取Class对象</span>
<a id="__codelineno-39-8" name="__codelineno-39-8"></a><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">obj</span><span class="p">.</span><span class="na">getClass</span><span class="p">();</span>
<a id="__codelineno-39-9" name="__codelineno-39-9"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">simpleName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="na">getSimpleName</span><span class="p">();</span>
<a id="__codelineno-39-10" name="__codelineno-39-10"></a><span class="w">        </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;==============&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">simpleName</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;====================&quot;</span><span class="p">);</span>
<a id="__codelineno-39-11" name="__codelineno-39-11"></a><span class="w">        </span><span class="c1">// 2. 获取Class对象的所有字段。</span>
<a id="__codelineno-39-12" name="__codelineno-39-12"></a><span class="w">        </span><span class="n">Field</span><span class="o">[]</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="na">getDeclaredFields</span><span class="p">();</span>
<a id="__codelineno-39-13" name="__codelineno-39-13"></a><span class="w">        </span><span class="c1">// 3. 遍历字段</span>
<a id="__codelineno-39-14" name="__codelineno-39-14"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Field</span><span class="w"> </span><span class="n">field</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">fields</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-15" name="__codelineno-39-15"></a><span class="w">            </span><span class="c1">// 4. 获取字段的值</span>
<a id="__codelineno-39-16" name="__codelineno-39-16"></a><span class="w">            </span><span class="c1">// 4.1 获取字段名称</span>
<a id="__codelineno-39-17" name="__codelineno-39-17"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">fieldName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">field</span><span class="p">.</span><span class="na">getName</span><span class="p">();</span>
<a id="__codelineno-39-18" name="__codelineno-39-18"></a><span class="w">            </span><span class="c1">// 4.2 获取字段的值</span>
<a id="__codelineno-39-19" name="__codelineno-39-19"></a><span class="w">            </span><span class="n">field</span><span class="p">.</span><span class="na">setAccessible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w"> </span><span class="c1">// 暴力反射</span>
<a id="__codelineno-39-20" name="__codelineno-39-20"></a><span class="w">            </span><span class="n">Object</span><span class="w"> </span><span class="n">fieldValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">field</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span>
<a id="__codelineno-39-21" name="__codelineno-39-21"></a><span class="w">            </span><span class="c1">// 5. 打印到文件中去</span>
<a id="__codelineno-39-22" name="__codelineno-39-22"></a><span class="w">            </span><span class="n">ps</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">fieldName</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;=&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">fieldValue</span><span class="p">);</span>
<a id="__codelineno-39-23" name="__codelineno-39-23"></a><span class="w">       </span><span class="p">}</span>
<a id="__codelineno-39-24" name="__codelineno-39-24"></a><span class="w">       </span><span class="n">ps</span><span class="p">.</span><span class="na">close</span><span class="p">();</span>
<a id="__codelineno-39-25" name="__codelineno-39-25"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-39-26" name="__codelineno-39-26"></a><span class="p">}</span>
<a id="__codelineno-39-27" name="__codelineno-39-27"></a>
<a id="__codelineno-39-28" name="__codelineno-39-28"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ReflectDemo4</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-29" name="__codelineno-39-29"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-39-30" name="__codelineno-39-30"></a><span class="w">        </span><span class="c1">// 目标：搞清楚反射的应用：做框架的通用技术。</span>
<a id="__codelineno-39-31" name="__codelineno-39-31"></a><span class="w">        </span><span class="n">Dog</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Dog</span><span class="p">(</span><span class="s">&quot;小黑&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">);</span>
<a id="__codelineno-39-32" name="__codelineno-39-32"></a><span class="w">        </span><span class="n">SaveObjectFrameWork</span><span class="p">.</span><span class="na">saveObject</span><span class="p">(</span><span class="n">d</span><span class="p">);</span>
<a id="__codelineno-39-33" name="__codelineno-39-33"></a>
<a id="__codelineno-39-34" name="__codelineno-39-34"></a><span class="w">        </span><span class="c1">// 创建学生对象</span>
<a id="__codelineno-39-35" name="__codelineno-39-35"></a><span class="w">        </span><span class="n">Student</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Student</span><span class="p">(</span><span class="s">&quot;小明&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;爱问问题&quot;</span><span class="p">);</span>
<a id="__codelineno-39-36" name="__codelineno-39-36"></a><span class="w">        </span><span class="n">SaveObjectFrameWork</span><span class="p">.</span><span class="na">saveObject</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
<a id="__codelineno-39-37" name="__codelineno-39-37"></a>
<a id="__codelineno-39-38" name="__codelineno-39-38"></a><span class="w">        </span><span class="c1">// 创建老师对象</span>
<a id="__codelineno-39-39" name="__codelineno-39-39"></a><span class="w">        </span><span class="n">Teacher</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Teacher</span><span class="p">(</span><span class="s">&quot;小红&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;java、前端、动漫&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">3000</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;422期&quot;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;女&#39;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;12345678901&quot;</span><span class="p">);</span>
<a id="__codelineno-39-40" name="__codelineno-39-40"></a><span class="w">        </span><span class="n">SaveObjectFrameWork</span><span class="p">.</span><span class="na">saveObject</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
<a id="__codelineno-39-41" name="__codelineno-39-41"></a>
<a id="__codelineno-39-42" name="__codelineno-39-42"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-39-43" name="__codelineno-39-43"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>总结，反射的作用有哪些？</p>
<ul>
<li>可以在运行时得到一个类的全部成分然后操作；</li>
<li>可以破坏封装性。（很突出）</li>
<li>也可以破坏泛型的约束性。（很突出）</li>
<li>更重要的用途是适合：做 Java 高级框架；</li>
<li>基本上主流框架都会基于反射设计一些通用技术功能。</li>
</ul>
<h3 id="_43">注解<a class="headerlink" href="#_43" title="Permanent link">&para;</a></h3>
<p><strong>一、注解的本质是什么？—— 一个可以被程序读取的“标签”</strong></p>
<p><strong>注解的本质就是元数据（Metadata），即“关于数据的数据”。</strong></p>
<p>如果这个定义太抽象，你可以把它理解成一个贴在代码（类、方法、字段等）上的 <strong>“标签”</strong> 或 <strong>“说明书”</strong>。</p>
<p>想象一下你整理箱子：</p>
<ul>
<li><strong>代码</strong>：就是箱子里的物品（衣服、书籍）。</li>
<li><strong>注释 (<code>//</code> 或 <code>/\* \*/</code>)</strong>：是你用笔在箱子上写的字，比如“冬天的衣服”。这个字是<strong>写给人看的</strong>，帮助你自己或其他开发者理解。</li>
<li><strong>注解 (<code>@Override</code>)</strong>：是一个标准化的、机器可读的<strong>标签</strong>，比如一个印有“易碎品”图标的贴纸。这个标签不是给人看的，而是给<strong>搬运工（程序）</strong>看的，告诉他要轻拿轻放。</li>
</ul>
<p><strong>核心要点：</strong></p>
<ol>
<li><strong>注解本身不执行任何代码</strong>：它就像那个“易碎品”标签，标签本身不会让箱子变得更坚固。它只是一个被动的、携带信息的标记。</li>
<li><strong>注解为其他程序提供信息</strong>：它的价值完全体现在“读取者”身上。没有读取和处理注解的程序，注解就毫无用处，等同于注释。</li>
</ol>
<hr />
<p><strong>二、怎么理解注解？—— 从“谁来读”和“何时读”的角度</strong></p>
<p>要真正理解注解，关键要明白<strong>“谁”</strong> 在 <strong>“什么时候”</strong> 读取这个“标签”，以及读取后会 <strong>“做什么”</strong>。</p>
<p>处理注解的程序主要有三类：</p>
<p><span style="background:#6fe7dd; border-radius:5px; display:inline-block;">1. 编译器（<code>javac</code>）在【编译时】读取</span></p>
<p>这类注解主要用于辅助编译器进行静态检查，确保代码的正确性。</p>
<ul>
<li>例子：<code>@Override</code><ul>
<li><strong>你贴的标签</strong>：在方法上写 <code>@Override</code>。</li>
<li><strong>谁来读</strong>：Java编译器。</li>
<li><strong>何时读</strong>：代码编译期间。</li>
<li><strong>做什么</strong>：编译器看到这个标签后，会去检查父类或接口中是否存在一个一模一样的方法。如果不存在，编译器就报错。它帮你避免了因拼写错误导致重写失败的问题。</li>
</ul>
</li>
<li>例子：<code>@SuppressWarnings("deprecation")</code><ul>
<li><strong>你贴的标签</strong>：<code>@SuppressWarnings</code>。</li>
<li><strong>谁来读</strong>：编译器。</li>
<li><strong>做什么</strong>：告诉编译器“我知道这里用了一个过时的方法，别烦我，不要显示警告信息”。</li>
</ul>
</li>
</ul>
<p><span style="background:#6fe7dd; border-radius:5px; display:inline-block;">2. 框架或程序在【运行时】读取</span></p>
<p>这是最常见、最强大的一种用法。程序在运行时，通过<strong>反射（Reflection）</strong>技术来查找代码中的注解，并根据注解信息执行相应的逻辑。</p>
<ul>
<li>
<p><strong>例子：JUnit中的 <code>@Test</code></strong></p>
<ul>
<li><strong>你贴的标签</strong>：在测试方法上写 <code>@Test</code>。</li>
<li><strong>谁来读</strong>：JUnit测试框架。</li>
<li><strong>何时读</strong>：当你运行测试时。</li>
<li><strong>做什么</strong>：JUnit框架启动后，会扫描你的代码，通过反射找到所有贴了 <code>@Test</code> 标签的方法，然后自动执行这些方法，并生成测试报告。你不需要手动在 <code>main</code> 方法里一个一个调用它们。</li>
</ul>
</li>
<li>
<p><strong>例子：Spring中的 <code>@Autowired</code> 和 <code>@Service</code></strong></p>
<ul>
<li>
<p><strong>你贴的标签</strong>：在类上写 <code>@Service</code>，在字段上写 <code>@Autowired</code>。</p>
</li>
<li>
<p><strong>谁来读</strong>：Spring IoC容器。</p>
</li>
<li>
<p><strong>何时读</strong>：应用程序启动和运行时。</p>
</li>
<li>
<p>做什么</p>
<p>：</p>
<ol>
<li>Spring启动时，会扫描所有类，把贴了 <code>@Service</code>, <code>@Component</code> 等标签的类创建实例，并放入一个“容器”中管理起来。</li>
<li>当发现某个对象的字段上贴了 <code>@Autowired</code> 标签时，Spring会自动从容器里找到匹配类型的实例，并注入（赋值）给这个字段。这一切都是自动完成的。</li>
</ol>
</li>
</ul>
</li>
</ul>
<p><span style="background:#6fe7dd; border-radius:5px; display:inline-block;">3. 工具在【编译时】处理并生成代码</span></p>
<p>这是一类特殊的注解，它们在编译期间被读取，并用来<strong>生成新的Java代码</strong>，这些新生成的代码会和你的手写代码一起被编译。</p>
<ul>
<li>例子：Lombok中的 <code>@Data</code><ul>
<li><strong>你贴的标签</strong>：在你的 <code>User</code> 类上写 <code>@Data</code>。</li>
<li><strong>谁来读</strong>：Lombok的注解处理器（一个编译器插件）。</li>
<li><strong>何时读</strong>：代码编译期间。</li>
<li><strong>做什么</strong>：Lombok看到 <code>@Data</code> 标签后，会自动为你这个类<strong>生成</strong> <code>getter</code>, <code>setter</code>, <code>toString()</code>, <code>equals()</code> 等方法的源代码。你虽然没写这些代码，但编译后的 <code>.class</code> 文件里是真实存在的。</li>
</ul>
</li>
</ul>
<p><strong>总结：如何形成一个完整的理解</strong></p>
<ol>
<li><strong>本质上，注解是元数据，是一个被动的“标签”</strong>。它本身没有功能。</li>
<li><strong>功能来源于“读取者”</strong>。一个注解的意义完全取决于处理它的程序（编译器、框架等）。</li>
<li><strong>它是一种“约定”</strong>。你通过贴标签的方式，和框架之间形成一种约定。比如你用 <code>@Test</code> 和JUnit约定“这个方法是用来测试的”，用 <code>@Service</code> 和Spring约定“这个类交给你管理”。</li>
<li><strong>它是“配置思路的演进”</strong>。在早期，很多配置都写在独立的XML文件里。这种方式将配置和代码分离，但不够直观。注解将配置信息直接写在它所描述的代码旁边，实现了<strong>“约定优于配置”（Convention over Configuration）</strong>，让代码更简洁、更内聚。</li>
</ol>
<p>所以，下次看到一个注解时，你可以这样问自己：</p>
<ul>
<li>这个注解是给谁看的？（编译器？Spring？JUnit？）</li>
<li>它在什么时候被读取？（编译时？运行时？）</li>
<li>读取它的程序会根据它做什么事？（报错？注入对象？执行方法？）</li>
</ul>
<p>想通了这几点，你就能从本质上理解任何一个注解了。</p>
<h4 id="_44">概述、自定义注解<a class="headerlink" href="#_44" title="Permanent link">&para;</a></h4>
<p>注解：</p>
<ul>
<li>就是 Java 代码里的特殊标记，比如 <code>@Override</code>、<code>@Test</code> 等，作用是 <strong>让其他程序根据注解信息来决定怎么执行该程序</strong>。</li>
<li>注解可以用在类、构造器、方法、成员变量、参数等几乎任意位置上；</li>
</ul>
<p>自定义注解：</p>
<ul>
<li>
<p>就是自己定义注解</p>
<ul>
<li><code>java
    public @interface 注解名称{
        public 属性类型 属性名() default 默认值;
    }</code></li>
</ul>
</li>
<li>
<p>特殊属性名：value</p>
<ul>
<li>如果注解中只有一个 value 属性，使用注解时，value 名称可以不写！</li>
</ul>
</li>
</ul>
<p><img alt="注解的原理" src="https://cdn.jsdelivr.net/gh/Gongzihang6/Pictures@main/Medias/medias%2F2025%2F07%2Fimage-20250619105234142.png" /></p>
<p>注解的原理：</p>
<ul>
<li>注解本质是一个接口，Java 中所有注解都继承了 Annotation 接口；</li>
<li><code>@注解(...)</code>：本质上其实是一个实现类对象，实现了该注解以及 Annotation 接口；</li>
</ul>
<p>注解的作用：</p>
<ul>
<li><strong>对 Java 中的类、方法、成员变量做标记，然后进行特殊处理；</strong></li>
<li>例如：Junit 框架中，标记了注解@Test 的方法就可以被当成测试方法执行，而没有标记的就不能当成测试方法执行；</li>
</ul>
<p>示例代码：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-40-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-40-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-40-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-40-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-40-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-40-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-40-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-40-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-40-10">10</a></span>
<span class="normal"><a href="#__codelineno-40-11">11</a></span>
<span class="normal"><a href="#__codelineno-40-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="c1">// 自定义注解A</span>
<a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="kd">public</span><span class="w"> </span><span class="nd">@interface</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-3" name="__codelineno-40-3"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="nf">value</span><span class="p">();</span><span class="w"> </span><span class="c1">// 特殊属性value，在使用时如果只有一个value属性，value名称可以不写</span>
<a id="__codelineno-40-4" name="__codelineno-40-4"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="nf">hobby</span><span class="p">()</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="s">&quot;打篮球&quot;</span><span class="p">;</span>
<a id="__codelineno-40-5" name="__codelineno-40-5"></a><span class="p">}</span>
<a id="__codelineno-40-6" name="__codelineno-40-6"></a>
<a id="__codelineno-40-7" name="__codelineno-40-7"></a><span class="c1">// 自定义注解MyBook</span>
<a id="__codelineno-40-8" name="__codelineno-40-8"></a><span class="kd">public</span><span class="w"> </span><span class="nd">@interface</span><span class="w"> </span><span class="n">MyBook</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-9" name="__codelineno-40-9"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="nf">name</span><span class="p">();</span>
<a id="__codelineno-40-10" name="__codelineno-40-10"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">age</span><span class="p">()</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">18</span><span class="p">;</span>
<a id="__codelineno-40-11" name="__codelineno-40-11"></a><span class="w">    </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="nf">address</span><span class="p">();</span>
<a id="__codelineno-40-12" name="__codelineno-40-12"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="_45">元注解<a class="headerlink" href="#_45" title="Permanent link">&para;</a></h4>
<p>指的是 <strong>注解的注解</strong></p>
<h5 id="target">@Target<a class="headerlink" href="#target" title="Permanent link">&para;</a></h5>
<p>作用：声明被修饰的注解只能在哪些位置使用，即限制注解的使用范围；</p>
<p><code>@Target(ElementType.TYPE)</code></p>
<ol>
<li><code>TYPE</code>：类、接口</li>
<li><code>FIELD</code>：成员变量；</li>
<li><code>METHOD</code>：成员方法；</li>
<li><code>PARAMETER</code>：方法参数；</li>
<li><code>CONSTRUCTOR</code>：构造器；</li>
<li><code>LOCAL_VARIABLE</code>：局部变量；</li>
</ol>
<h5 id="retention">@Retention<a class="headerlink" href="#retention" title="Permanent link">&para;</a></h5>
<p>作用：声明注解的保留周期，约束自定义注解的存活范围；</p>
<p><code>@Retention(RetentionPolicy.RUNTIME)</code></p>
<ol>
<li><code>SOURCE</code>：只作用在源码阶段，字节码文件中不存在；</li>
<li><code>CLASS</code>：默认值，保留到字节码文件阶段，运行阶段不存在；</li>
<li><code>RUNTIME</code>：开发常用，一直保留到运行阶段；</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-41-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-41-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-41-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-41-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-41-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-41-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-41-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-41-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-41-10">10</a></span>
<span class="normal"><a href="#__codelineno-41-11">11</a></span>
<span class="normal"><a href="#__codelineno-41-12">12</a></span>
<span class="normal"><a href="#__codelineno-41-13">13</a></span>
<span class="normal"><a href="#__codelineno-41-14">14</a></span>
<span class="normal"><a href="#__codelineno-41-15">15</a></span>
<span class="normal"><a href="#__codelineno-41-16">16</a></span>
<span class="normal"><a href="#__codelineno-41-17">17</a></span>
<span class="normal"><a href="#__codelineno-41-18">18</a></span>
<span class="normal"><a href="#__codelineno-41-19">19</a></span>
<span class="normal"><a href="#__codelineno-41-20">20</a></span>
<span class="normal"><a href="#__codelineno-41-21">21</a></span>
<span class="normal"><a href="#__codelineno-41-22">22</a></span>
<span class="normal"><a href="#__codelineno-41-23">23</a></span>
<span class="normal"><a href="#__codelineno-41-24">24</a></span>
<span class="normal"><a href="#__codelineno-41-25">25</a></span>
<span class="normal"><a href="#__codelineno-41-26">26</a></span>
<span class="normal"><a href="#__codelineno-41-27">27</a></span>
<span class="normal"><a href="#__codelineno-41-28">28</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="c1">// 自定义注解MyTest</span>
<a id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="nd">@Target</span><span class="p">({</span><span class="n">ElementType</span><span class="p">.</span><span class="na">METHOD</span><span class="p">})</span><span class="w"> </span><span class="c1">// 表示注解的作用目标为方法</span>
<a id="__codelineno-41-3" name="__codelineno-41-3"></a><span class="nd">@Retention</span><span class="p">(</span><span class="n">RetentionPolicy</span><span class="p">.</span><span class="na">RUNTIME</span><span class="p">)</span><span class="w"> </span><span class="c1">// 表示注解的保留策略: 编译器运行时(一直活着)</span>
<a id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="kd">public</span><span class="w"> </span><span class="nd">@interface</span><span class="w"> </span><span class="n">MyTest</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-41-5" name="__codelineno-41-5"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">count</span><span class="p">()</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// 表示注解的属性</span>
<a id="__codelineno-41-6" name="__codelineno-41-6"></a><span class="p">}</span>
<a id="__codelineno-41-7" name="__codelineno-41-7"></a>
<a id="__codelineno-41-8" name="__codelineno-41-8"></a><span class="nd">@Target</span><span class="p">({</span><span class="n">ElementType</span><span class="p">.</span><span class="na">METHOD</span><span class="p">,</span><span class="w"> </span><span class="n">ElementType</span><span class="p">.</span><span class="na">FIELD</span><span class="p">})</span><span class="w"> </span><span class="c1">// 表示注解的作用目标为方法,成员变量</span>
<a id="__codelineno-41-9" name="__codelineno-41-9"></a><span class="nd">@Retention</span><span class="p">(</span><span class="n">RetentionPolicy</span><span class="p">.</span><span class="na">RUNTIME</span><span class="p">)</span><span class="w"> </span><span class="c1">// 表示注解的保留策略: 编译器运行时(一直活着)</span>
<a id="__codelineno-41-10" name="__codelineno-41-10"></a><span class="kd">public</span><span class="w"> </span><span class="nd">@interface</span><span class="w"> </span><span class="n">MyTest1</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-41-11" name="__codelineno-41-11"></a><span class="p">}</span>
<a id="__codelineno-41-12" name="__codelineno-41-12"></a>
<a id="__codelineno-41-13" name="__codelineno-41-13"></a><span class="c1">// @MyTest1     不能作用于类</span>
<a id="__codelineno-41-14" name="__codelineno-41-14"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AnnotationDemo2</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-41-15" name="__codelineno-41-15"></a>
<a id="__codelineno-41-16" name="__codelineno-41-16"></a><span class="w">    </span><span class="nd">@MyTest1</span>
<a id="__codelineno-41-17" name="__codelineno-41-17"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">age</span><span class="p">;</span>
<a id="__codelineno-41-18" name="__codelineno-41-18"></a><span class="w">     </span><span class="c1">// @MyTest1    不能作用于构造器</span>
<a id="__codelineno-41-19" name="__codelineno-41-19"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">AnnotationDemo2</span><span class="p">(){</span>
<a id="__codelineno-41-20" name="__codelineno-41-20"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-41-21" name="__codelineno-41-21"></a><span class="w">    </span><span class="nd">@MyTest1</span>
<a id="__codelineno-41-22" name="__codelineno-41-22"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-41-23" name="__codelineno-41-23"></a><span class="w">    </span><span class="c1">// 目标：搞清楚元注解的作用。</span>
<a id="__codelineno-41-24" name="__codelineno-41-24"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-41-25" name="__codelineno-41-25"></a><span class="w">    </span><span class="nd">@MyTest1</span>
<a id="__codelineno-41-26" name="__codelineno-41-26"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">getAgeTest</span><span class="p">(){</span>
<a id="__codelineno-41-27" name="__codelineno-41-27"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-41-28" name="__codelineno-41-28"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="_46">注解的解析<a class="headerlink" href="#_46" title="Permanent link">&para;</a></h4>
<p>即判断类上、方法上、成员变量上等是否存在注解，并把注解里面的内容给解析出来；</p>
<p><strong>在运行时，利用 Java 反射机制，动态地检查并获取注解信息，从而实现特定的逻辑处理。这在很多框架（如 Spring、JUnit）中被广泛应用，用于简化配置和实现特定功能。</strong></p>
<h5 id="_47">如何解析注解？<a class="headerlink" href="#_47" title="Permanent link">&para;</a></h5>
<ul>
<li>指导思想：要解析谁上面的注解，就要先拿到谁；</li>
<li>比如要解析类上的注解，则应该先获取该类的 Class 对象，再通过 Class 对象解析类上面的注解；</li>
<li>比如要解析成员方法上的注解，则应该先获取成员方法的 Method 对象，再通过 Method 对象解析其上面的注解；</li>
<li>Class、Method、Field、Constructor 都实现了 AnnotatedElement 接口，它们都拥有解析注解的能力；</li>
</ul>
<p><strong>Class 对象、Method 对象等都可以通过反射来获取；</strong></p>
<table>
<thead>
<tr>
<th>AnnotatedElement 接口提供了解析注解的方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>public  Annotation [] <strong>getDeclaredAnnotations</strong>()</td>
<td>获取当前 <strong>对象</strong> 上面的注解。</td>
</tr>
<tr>
<td>public  T <strong>getDeclaredAnnotation</strong>(Class <T> annotationClass)</td>
<td>获取指定的注解对象</td>
</tr>
<tr>
<td>public  boolean <strong>isAnnotationPresent</strong>(Class <Annotation> annotationClass)</td>
<td>判断当前对象上是否存在某个注解</td>
</tr>
</tbody>
</table>
<h5 id="_48">解析注解的案例<a class="headerlink" href="#_48" title="Permanent link">&para;</a></h5>
<ol>
<li>定义注解 MyTest2，要求如下：<ul>
<li>包含属性：<code>String value()</code></li>
<li>包含属性：<code>double height() default 169.5</code></li>
<li>包含属性：<code>String address</code></li>
</ul>
</li>
</ol>
<p>示例代码：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-42-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-42-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-42-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-42-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-42-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-42-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-42-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-42-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-42-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-42-10">10</a></span>
<span class="normal"><a href="#__codelineno-42-11">11</a></span>
<span class="normal"><a href="#__codelineno-42-12">12</a></span>
<span class="normal"><a href="#__codelineno-42-13">13</a></span>
<span class="normal"><a href="#__codelineno-42-14">14</a></span>
<span class="normal"><a href="#__codelineno-42-15">15</a></span>
<span class="normal"><a href="#__codelineno-42-16">16</a></span>
<span class="normal"><a href="#__codelineno-42-17">17</a></span>
<span class="normal"><a href="#__codelineno-42-18">18</a></span>
<span class="normal"><a href="#__codelineno-42-19">19</a></span>
<span class="normal"><a href="#__codelineno-42-20">20</a></span>
<span class="normal"><a href="#__codelineno-42-21">21</a></span>
<span class="normal"><a href="#__codelineno-42-22">22</a></span>
<span class="normal"><a href="#__codelineno-42-23">23</a></span>
<span class="normal"><a href="#__codelineno-42-24">24</a></span>
<span class="normal"><a href="#__codelineno-42-25">25</a></span>
<span class="normal"><a href="#__codelineno-42-26">26</a></span>
<span class="normal"><a href="#__codelineno-42-27">27</a></span>
<span class="normal"><a href="#__codelineno-42-28">28</a></span>
<span class="normal"><a href="#__codelineno-42-29">29</a></span>
<span class="normal"><a href="#__codelineno-42-30">30</a></span>
<span class="normal"><a href="#__codelineno-42-31">31</a></span>
<span class="normal"><a href="#__codelineno-42-32">32</a></span>
<span class="normal"><a href="#__codelineno-42-33">33</a></span>
<span class="normal"><a href="#__codelineno-42-34">34</a></span>
<span class="normal"><a href="#__codelineno-42-35">35</a></span>
<span class="normal"><a href="#__codelineno-42-36">36</a></span>
<span class="normal"><a href="#__codelineno-42-37">37</a></span>
<span class="normal"><a href="#__codelineno-42-38">38</a></span>
<span class="normal"><a href="#__codelineno-42-39">39</a></span>
<span class="normal"><a href="#__codelineno-42-40">40</a></span>
<span class="normal"><a href="#__codelineno-42-41">41</a></span>
<span class="normal"><a href="#__codelineno-42-42">42</a></span>
<span class="normal"><a href="#__codelineno-42-43">43</a></span>
<span class="normal"><a href="#__codelineno-42-44">44</a></span>
<span class="normal"><a href="#__codelineno-42-45">45</a></span>
<span class="normal"><a href="#__codelineno-42-46">46</a></span>
<span class="normal"><a href="#__codelineno-42-47">47</a></span>
<span class="normal"><a href="#__codelineno-42-48">48</a></span>
<span class="normal"><a href="#__codelineno-42-49">49</a></span>
<span class="normal"><a href="#__codelineno-42-50">50</a></span>
<span class="normal"><a href="#__codelineno-42-51">51</a></span>
<span class="normal"><a href="#__codelineno-42-52">52</a></span>
<span class="normal"><a href="#__codelineno-42-53">53</a></span>
<span class="normal"><a href="#__codelineno-42-54">54</a></span>
<span class="normal"><a href="#__codelineno-42-55">55</a></span>
<span class="normal"><a href="#__codelineno-42-56">56</a></span>
<span class="normal"><a href="#__codelineno-42-57">57</a></span>
<span class="normal"><a href="#__codelineno-42-58">58</a></span>
<span class="normal"><a href="#__codelineno-42-59">59</a></span>
<span class="normal"><a href="#__codelineno-42-60">60</a></span>
<span class="normal"><a href="#__codelineno-42-61">61</a></span>
<span class="normal"><a href="#__codelineno-42-62">62</a></span>
<span class="normal"><a href="#__codelineno-42-63">63</a></span>
<span class="normal"><a href="#__codelineno-42-64">64</a></span>
<span class="normal"><a href="#__codelineno-42-65">65</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1"></a><span class="c1">// 定义MyTest2注解</span>
<a id="__codelineno-42-2" name="__codelineno-42-2"></a><span class="nd">@Target</span><span class="p">({</span><span class="n">ElementType</span><span class="p">.</span><span class="na">METHOD</span><span class="p">,</span><span class="w"> </span><span class="n">ElementType</span><span class="p">.</span><span class="na">TYPE</span><span class="p">})</span><span class="w"> </span><span class="c1">// 表示注解的作用目标为方法，类或者接口</span>
<a id="__codelineno-42-3" name="__codelineno-42-3"></a><span class="nd">@Retention</span><span class="p">(</span><span class="n">RetentionPolicy</span><span class="p">.</span><span class="na">RUNTIME</span><span class="p">)</span><span class="w"> </span><span class="c1">// 表示注解的保留策略: 编译器运行时(一直活着)</span>
<a id="__codelineno-42-4" name="__codelineno-42-4"></a><span class="kd">public</span><span class="w"> </span><span class="nd">@interface</span><span class="w"> </span><span class="n">MyTest2</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-5" name="__codelineno-42-5"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="nf">value</span><span class="p">();</span>
<a id="__codelineno-42-6" name="__codelineno-42-6"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="nf">height</span><span class="p">()</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mf">169.5</span><span class="p">;</span>
<a id="__codelineno-42-7" name="__codelineno-42-7"></a><span class="w">    </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="nf">address</span><span class="p">();</span>
<a id="__codelineno-42-8" name="__codelineno-42-8"></a><span class="p">}</span>
<a id="__codelineno-42-9" name="__codelineno-42-9"></a>
<a id="__codelineno-42-10" name="__codelineno-42-10"></a><span class="c1">// 分别给类Demo和方法go加上MyTest2注解</span>
<a id="__codelineno-42-11" name="__codelineno-42-11"></a><span class="nd">@MyTest2</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;刘亦菲&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;北京&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;上海&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;深圳&quot;</span><span class="p">})</span>
<a id="__codelineno-42-12" name="__codelineno-42-12"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Demo</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-13" name="__codelineno-42-13"></a><span class="w">    </span><span class="nd">@MyTest2</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;欧阳娜娜&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;湖南&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;湖北&quot;</span><span class="p">})</span>
<a id="__codelineno-42-14" name="__codelineno-42-14"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">go</span><span class="p">(){</span>
<a id="__codelineno-42-15" name="__codelineno-42-15"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-42-16" name="__codelineno-42-16"></a><span class="p">}</span>
<a id="__codelineno-42-17" name="__codelineno-42-17"></a>
<a id="__codelineno-42-18" name="__codelineno-42-18"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AnnotationDemo3</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-19" name="__codelineno-42-19"></a><span class="w">    </span><span class="c1">// 目标：解析注解，通过反射注解注解的类实现</span>
<a id="__codelineno-42-20" name="__codelineno-42-20"></a><span class="w">    </span><span class="nd">@Test</span>
<a id="__codelineno-42-21" name="__codelineno-42-21"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">parseClass</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-22" name="__codelineno-42-22"></a><span class="w">        </span><span class="c1">// 解析Demo类上的注解，并把注解里面的内容给解析出来</span>
<a id="__codelineno-42-23" name="__codelineno-42-23"></a><span class="w">        </span><span class="c1">// 1.获取类对象</span>
<a id="__codelineno-42-24" name="__codelineno-42-24"></a><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Demo</span><span class="p">.</span><span class="na">class</span><span class="p">;</span>
<a id="__codelineno-42-25" name="__codelineno-42-25"></a><span class="w">        </span><span class="c1">// 2、使用isAnnotationPresent判断这个类上是否陈列了注解MyTest2</span>
<a id="__codelineno-42-26" name="__codelineno-42-26"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">c1</span><span class="p">.</span><span class="na">isAnnotationPresent</span><span class="p">(</span><span class="n">MyTest2</span><span class="p">.</span><span class="na">class</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-27" name="__codelineno-42-27"></a><span class="w">            </span><span class="c1">// 3、获取注解对象</span>
<a id="__codelineno-42-28" name="__codelineno-42-28"></a><span class="w">            </span><span class="n">MyTest2</span><span class="w"> </span><span class="n">myTest2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">MyTest2</span><span class="p">)</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getDeclaredAnnotation</span><span class="p">(</span><span class="n">MyTest2</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<a id="__codelineno-42-29" name="__codelineno-42-29"></a>
<a id="__codelineno-42-30" name="__codelineno-42-30"></a><span class="w">            </span><span class="c1">// 4、获取注解属性值</span>
<a id="__codelineno-42-31" name="__codelineno-42-31"></a><span class="w">            </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myTest2</span><span class="p">.</span><span class="na">address</span><span class="p">();</span>
<a id="__codelineno-42-32" name="__codelineno-42-32"></a><span class="w">            </span><span class="kt">double</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myTest2</span><span class="p">.</span><span class="na">height</span><span class="p">();</span>
<a id="__codelineno-42-33" name="__codelineno-42-33"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myTest2</span><span class="p">.</span><span class="na">value</span><span class="p">();</span>
<a id="__codelineno-42-34" name="__codelineno-42-34"></a>
<a id="__codelineno-42-35" name="__codelineno-42-35"></a><span class="w">            </span><span class="c1">// 5、打印注解属性值</span>
<a id="__codelineno-42-36" name="__codelineno-42-36"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">toString</span><span class="p">(</span><span class="n">address</span><span class="p">));</span>
<a id="__codelineno-42-37" name="__codelineno-42-37"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">height</span><span class="p">);</span>
<a id="__codelineno-42-38" name="__codelineno-42-38"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<a id="__codelineno-42-39" name="__codelineno-42-39"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-42-40" name="__codelineno-42-40"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-42-41" name="__codelineno-42-41"></a>
<a id="__codelineno-42-42" name="__codelineno-42-42"></a><span class="w">    </span><span class="nd">@Test</span>
<a id="__codelineno-42-43" name="__codelineno-42-43"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">parseMethod</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-44" name="__codelineno-42-44"></a><span class="w">        </span><span class="c1">// // 解析go方法上的注解，并把注解里面的内容给解析出来</span>
<a id="__codelineno-42-45" name="__codelineno-42-45"></a><span class="w">        </span><span class="c1">// 1.获取类对象</span>
<a id="__codelineno-42-46" name="__codelineno-42-46"></a><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">c1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Demo</span><span class="p">.</span><span class="na">class</span><span class="p">;</span>
<a id="__codelineno-42-47" name="__codelineno-42-47"></a><span class="w">        </span><span class="c1">// 2、获取方法对象</span>
<a id="__codelineno-42-48" name="__codelineno-42-48"></a><span class="w">        </span><span class="n">Method</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c1</span><span class="p">.</span><span class="na">getMethod</span><span class="p">(</span><span class="s">&quot;go&quot;</span><span class="p">);</span>
<a id="__codelineno-42-49" name="__codelineno-42-49"></a><span class="w">        </span><span class="c1">// 3、使用isAnnotationPresent判断这个方法上是否陈列了注解MyTest2</span>
<a id="__codelineno-42-50" name="__codelineno-42-50"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">method</span><span class="p">.</span><span class="na">isAnnotationPresent</span><span class="p">(</span><span class="n">MyTest2</span><span class="p">.</span><span class="na">class</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-42-51" name="__codelineno-42-51"></a><span class="w">            </span><span class="c1">// 4、获取注解对象</span>
<a id="__codelineno-42-52" name="__codelineno-42-52"></a><span class="w">            </span><span class="n">MyTest2</span><span class="w"> </span><span class="n">myTest2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">method</span><span class="p">.</span><span class="na">getDeclaredAnnotation</span><span class="p">(</span><span class="n">MyTest2</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<a id="__codelineno-42-53" name="__codelineno-42-53"></a>
<a id="__codelineno-42-54" name="__codelineno-42-54"></a><span class="w">            </span><span class="c1">// 5、获取注解属性值</span>
<a id="__codelineno-42-55" name="__codelineno-42-55"></a><span class="w">            </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">address</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myTest2</span><span class="p">.</span><span class="na">address</span><span class="p">();</span>
<a id="__codelineno-42-56" name="__codelineno-42-56"></a><span class="w">            </span><span class="kt">double</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myTest2</span><span class="p">.</span><span class="na">height</span><span class="p">();</span>
<a id="__codelineno-42-57" name="__codelineno-42-57"></a><span class="w">            </span><span class="n">String</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myTest2</span><span class="p">.</span><span class="na">value</span><span class="p">();</span>
<a id="__codelineno-42-58" name="__codelineno-42-58"></a>
<a id="__codelineno-42-59" name="__codelineno-42-59"></a><span class="w">            </span><span class="c1">// 6、打印注解属性值</span>
<a id="__codelineno-42-60" name="__codelineno-42-60"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">toString</span><span class="p">(</span><span class="n">address</span><span class="p">));</span>
<a id="__codelineno-42-61" name="__codelineno-42-61"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">height</span><span class="p">);</span>
<a id="__codelineno-42-62" name="__codelineno-42-62"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<a id="__codelineno-42-63" name="__codelineno-42-63"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-42-64" name="__codelineno-42-64"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-42-65" name="__codelineno-42-65"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="_49">作用、应用场景<a class="headerlink" href="#_49" title="Permanent link">&para;</a></h4>
<p>使用注解开发出一个简易版的 Junit 框架</p>
<p>需求：定义若干个方法，只要加了 MyTest 注解，就会触发该方法的执行；</p>
<p>分析：</p>
<ol>
<li>定义一个注解 MyTest，只能注解方法，存活范围是一直都在；</li>
<li>定义若干个方法，部分方法加上@MyTest 注解修饰，部分方法不加；</li>
<li>模拟一个 Junit 程序，可以触发加了@MyTest 注解的方法执行，没加@MyTest 的方法就不执行；</li>
</ol>
<p>实现代码：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-43-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-43-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-43-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-43-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-43-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-43-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-43-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-43-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-43-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-43-10">10</a></span>
<span class="normal"><a href="#__codelineno-43-11">11</a></span>
<span class="normal"><a href="#__codelineno-43-12">12</a></span>
<span class="normal"><a href="#__codelineno-43-13">13</a></span>
<span class="normal"><a href="#__codelineno-43-14">14</a></span>
<span class="normal"><a href="#__codelineno-43-15">15</a></span>
<span class="normal"><a href="#__codelineno-43-16">16</a></span>
<span class="normal"><a href="#__codelineno-43-17">17</a></span>
<span class="normal"><a href="#__codelineno-43-18">18</a></span>
<span class="normal"><a href="#__codelineno-43-19">19</a></span>
<span class="normal"><a href="#__codelineno-43-20">20</a></span>
<span class="normal"><a href="#__codelineno-43-21">21</a></span>
<span class="normal"><a href="#__codelineno-43-22">22</a></span>
<span class="normal"><a href="#__codelineno-43-23">23</a></span>
<span class="normal"><a href="#__codelineno-43-24">24</a></span>
<span class="normal"><a href="#__codelineno-43-25">25</a></span>
<span class="normal"><a href="#__codelineno-43-26">26</a></span>
<span class="normal"><a href="#__codelineno-43-27">27</a></span>
<span class="normal"><a href="#__codelineno-43-28">28</a></span>
<span class="normal"><a href="#__codelineno-43-29">29</a></span>
<span class="normal"><a href="#__codelineno-43-30">30</a></span>
<span class="normal"><a href="#__codelineno-43-31">31</a></span>
<span class="normal"><a href="#__codelineno-43-32">32</a></span>
<span class="normal"><a href="#__codelineno-43-33">33</a></span>
<span class="normal"><a href="#__codelineno-43-34">34</a></span>
<span class="normal"><a href="#__codelineno-43-35">35</a></span>
<span class="normal"><a href="#__codelineno-43-36">36</a></span>
<span class="normal"><a href="#__codelineno-43-37">37</a></span>
<span class="normal"><a href="#__codelineno-43-38">38</a></span>
<span class="normal"><a href="#__codelineno-43-39">39</a></span>
<span class="normal"><a href="#__codelineno-43-40">40</a></span>
<span class="normal"><a href="#__codelineno-43-41">41</a></span>
<span class="normal"><a href="#__codelineno-43-42">42</a></span>
<span class="normal"><a href="#__codelineno-43-43">43</a></span>
<span class="normal"><a href="#__codelineno-43-44">44</a></span>
<span class="normal"><a href="#__codelineno-43-45">45</a></span>
<span class="normal"><a href="#__codelineno-43-46">46</a></span>
<span class="normal"><a href="#__codelineno-43-47">47</a></span>
<span class="normal"><a href="#__codelineno-43-48">48</a></span>
<span class="normal"><a href="#__codelineno-43-49">49</a></span>
<span class="normal"><a href="#__codelineno-43-50">50</a></span>
<span class="normal"><a href="#__codelineno-43-51">51</a></span>
<span class="normal"><a href="#__codelineno-43-52">52</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1"></a><span class="nd">@Target</span><span class="p">({</span><span class="n">ElementType</span><span class="p">.</span><span class="na">METHOD</span><span class="p">})</span><span class="w"> </span><span class="c1">// 表示注解的作用目标为方法</span>
<a id="__codelineno-43-2" name="__codelineno-43-2"></a><span class="nd">@Retention</span><span class="p">(</span><span class="n">RetentionPolicy</span><span class="p">.</span><span class="na">RUNTIME</span><span class="p">)</span><span class="w"> </span><span class="c1">// 表示注解的保留策略: 编译器运行时(一直活着)</span>
<a id="__codelineno-43-3" name="__codelineno-43-3"></a><span class="kd">public</span><span class="w"> </span><span class="nd">@interface</span><span class="w"> </span><span class="n">MyTest</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-43-4" name="__codelineno-43-4"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">count</span><span class="p">()</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// 表示注解的属性</span>
<a id="__codelineno-43-5" name="__codelineno-43-5"></a><span class="p">}</span>
<a id="__codelineno-43-6" name="__codelineno-43-6"></a>
<a id="__codelineno-43-7" name="__codelineno-43-7"></a>
<a id="__codelineno-43-8" name="__codelineno-43-8"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AnnotationDemo4</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-43-9" name="__codelineno-43-9"></a><span class="w">    </span><span class="c1">// 目标：搞清楚注解的应用场景：模拟junit框架。有MyTest注解的方法就执行，没有的就不执行。</span>
<a id="__codelineno-43-10" name="__codelineno-43-10"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-43-11" name="__codelineno-43-11"></a><span class="w">        </span><span class="n">AnnotationDemo4</span><span class="w"> </span><span class="n">ad</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AnnotationDemo4</span><span class="p">();</span>
<a id="__codelineno-43-12" name="__codelineno-43-12"></a><span class="w">        </span><span class="c1">// 1、获取类对象</span>
<a id="__codelineno-43-13" name="__codelineno-43-13"></a><span class="w">        </span><span class="n">Class</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AnnotationDemo4</span><span class="p">.</span><span class="na">class</span><span class="p">;</span>
<a id="__codelineno-43-14" name="__codelineno-43-14"></a><span class="w">        </span><span class="c1">// 2、获取所有方法</span>
<a id="__codelineno-43-15" name="__codelineno-43-15"></a><span class="w">        </span><span class="n">Method</span><span class="o">[]</span><span class="w"> </span><span class="n">methods</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">c</span><span class="p">.</span><span class="na">getMethods</span><span class="p">();</span>
<a id="__codelineno-43-16" name="__codelineno-43-16"></a><span class="w">        </span><span class="c1">// 3、遍历所有方法，判断方法上是否有MyTest注解，有就执行，没有就不执行。</span>
<a id="__codelineno-43-17" name="__codelineno-43-17"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">Method</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">methods</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-43-18" name="__codelineno-43-18"></a><span class="w">            </span><span class="c1">// 4、判断方法上是否有MyTest注解</span>
<a id="__codelineno-43-19" name="__codelineno-43-19"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">method</span><span class="p">.</span><span class="na">isAnnotationPresent</span><span class="p">(</span><span class="n">MyTest</span><span class="p">.</span><span class="na">class</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-43-20" name="__codelineno-43-20"></a><span class="w">                </span><span class="c1">// 获取到这个方法的注解</span>
<a id="__codelineno-43-21" name="__codelineno-43-21"></a><span class="w">                </span><span class="n">MyTest</span><span class="w"> </span><span class="n">myTest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">method</span><span class="p">.</span><span class="na">getDeclaredAnnotation</span><span class="p">(</span><span class="n">MyTest</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<a id="__codelineno-43-22" name="__codelineno-43-22"></a><span class="w">                </span><span class="c1">// 可以通过count属性控制一个方法测试几次</span>
<a id="__codelineno-43-23" name="__codelineno-43-23"></a><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myTest</span><span class="p">.</span><span class="na">count</span><span class="p">();</span>
<a id="__codelineno-43-24" name="__codelineno-43-24"></a><span class="w">                </span><span class="c1">// 5、有就执行这个method方法</span>
<a id="__codelineno-43-25" name="__codelineno-43-25"></a><span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-43-26" name="__codelineno-43-26"></a><span class="w">                    </span><span class="n">method</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="n">ad</span><span class="p">);</span>
<a id="__codelineno-43-27" name="__codelineno-43-27"></a><span class="w">                </span><span class="p">}</span>
<a id="__codelineno-43-28" name="__codelineno-43-28"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-43-29" name="__codelineno-43-29"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-43-30" name="__codelineno-43-30"></a>
<a id="__codelineno-43-31" name="__codelineno-43-31"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-43-32" name="__codelineno-43-32"></a>
<a id="__codelineno-43-33" name="__codelineno-43-33"></a><span class="w">    </span><span class="c1">// 测试方法：public 无参 无返回值</span>
<a id="__codelineno-43-34" name="__codelineno-43-34"></a><span class="w">    </span><span class="nd">@MyTest</span>
<a id="__codelineno-43-35" name="__codelineno-43-35"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test1</span><span class="p">(){</span>
<a id="__codelineno-43-36" name="__codelineno-43-36"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;test1方法执行了&quot;</span><span class="p">);</span>
<a id="__codelineno-43-37" name="__codelineno-43-37"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-43-38" name="__codelineno-43-38"></a>
<a id="__codelineno-43-39" name="__codelineno-43-39"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test2</span><span class="p">(){</span>
<a id="__codelineno-43-40" name="__codelineno-43-40"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;test2方法执行了&quot;</span><span class="p">);</span>
<a id="__codelineno-43-41" name="__codelineno-43-41"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-43-42" name="__codelineno-43-42"></a>
<a id="__codelineno-43-43" name="__codelineno-43-43"></a><span class="w">    </span><span class="nd">@MyTest</span><span class="p">(</span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<a id="__codelineno-43-44" name="__codelineno-43-44"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test3</span><span class="p">(){</span>
<a id="__codelineno-43-45" name="__codelineno-43-45"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;test3方法执行了&quot;</span><span class="p">);</span>
<a id="__codelineno-43-46" name="__codelineno-43-46"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-43-47" name="__codelineno-43-47"></a>
<a id="__codelineno-43-48" name="__codelineno-43-48"></a><span class="w">    </span><span class="nd">@MyTest</span>
<a id="__codelineno-43-49" name="__codelineno-43-49"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test4</span><span class="p">(){</span>
<a id="__codelineno-43-50" name="__codelineno-43-50"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;test4方法执行了&quot;</span><span class="p">);</span>
<a id="__codelineno-43-51" name="__codelineno-43-51"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-43-52" name="__codelineno-43-52"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="_50">动态代理<a class="headerlink" href="#_50" title="Permanent link">&para;</a></h3>
<h4 id="_51">为什么需要代理？<a class="headerlink" href="#_51" title="Permanent link">&para;</a></h4>
<p>想象一个生活中的场景：你是一位大明星（<strong>目标对象</strong>），你的核心工作是唱歌和演戏。但除了这些，你还有很多琐事，比如谈合同、安排档期、过滤骚扰电话等。如果你亲自处理所有这些事，会非常低效且分散精力。</p>
<p>于是，你雇佣了一位经纪人（<strong>代理对象</strong>）。</p>
<ul>
<li>当有人想找你谈合作，他们会先联系你的 <strong>经纪人</strong>。</li>
<li>经纪人会负责处理所有前期工作：审核资质、谈判条款、安排时间。</li>
<li>只有当一切准备就绪，需要你亲自出面（唱歌、演戏）时，经纪人才会通知你。</li>
</ul>
<p>在这个模型中，经纪人并没有取代你的核心技能，而是在不改变你核心工作的前提下，为你 <strong>增强了功能</strong>（合同谈判、安全过滤等）。</p>
<p><strong>在软件开发中，代理模式（Proxy Pattern）的思想是完全一样的。</strong></p>
<p>它的核心目的是：<strong>在不修改目标对象（原始类）代码的前提下，通过引入一个代理对象来为目标对象增加额外的功能或控制其访问。</strong></p>
<p>这遵循了软件设计中的一个重要原则——<strong>开闭原则（Open/Closed Principle）</strong>：<span style="color:#d59bf6;">对扩展开放，对修改关闭。我们不希望每次增加一个新功能（比如记录日志）就去修改一次原始类的代码。</span></p>
<p><strong>使用代理的好处（解决的实际问题）：</strong></p>
<ol>
<li><strong>功能增强（Enhancement）</strong>: 在调用原始方法前后，增加新的逻辑。<ul>
<li><strong>事务管理</strong>：在方法开始时开启事务，在方法结束时提交或回滚事务。</li>
<li><strong>日志记录</strong>：记录方法的入参、出参和执行时间，方便调试和监控。</li>
<li><strong>性能监控</strong>：计算每个方法的执行耗时。</li>
</ul>
</li>
<li><strong>访问控制（Access Control）</strong>: 代理可以决定是否要将请求转发给目标对象。<ul>
<li><strong>权限校验</strong>：在调用方法前，检查当前用户是否具有执行该操作的权限。</li>
</ul>
</li>
<li><strong>懒加载（Lazy Loading）</strong>: 如果一个对象的创建非常耗费资源，代理可以等到真正需要使用它时才去创建它。</li>
</ol>
<h4 id="_52">解决实际问题、掌握使用代理的好处<a class="headerlink" href="#_52" title="Permanent link">&para;</a></h4>
<p>使用代理的好处：</p>
<p>1、<strong>功能增强（Enhancement）</strong>: 在调用原始方法前后，增加新的逻辑。</p>
<ul>
<li><strong>事务管理</strong>：在方法开始时开启事务，在方法结束时提交或回滚事务。</li>
<li><strong>日志记录</strong>：记录方法的入参、出参和执行时间，方便调试和监控。</li>
<li><strong>性能监控</strong>：计算每个方法的执行耗时。</li>
</ul>
<p>2、<strong>访问控制（Access Control）</strong>: 代理可以决定是否要将请求转发给目标对象。</p>
<ul>
<li><strong>权限校验</strong>：在调用方法前，检查当前用户是否具有执行该操作的权限。</li>
</ul>
<p>3、<strong>懒加载（Lazy Loading）</strong>: 如果一个对象的创建非常耗费资源，代理可以等到真正需要使用它时才去创建它。</p>
<p>理解了为什么需要代理后，我们来看 Java 是如何实现的。代理可以分为 <strong>静态代理</strong> 和 <strong>动态代理</strong>。</p>
<ul>
<li><strong>静态代理</strong>：需要我们手动为每个目标接口编写一个代理类。如果接口很多，或者接口中的方法发生变化，维护起来会非常繁琐，导致类爆炸。</li>
<li><strong>动态代理</strong>：不需要手动编写代理类。代理类是在程序运行时，由 JVM 根据我们提供的信息动态生成的。这极大地提高了灵活性和可维护性。</li>
</ul>
<p>Java 的 <code>java.lang.reflect</code> 包提供了实现动态代理的核心机制。主要涉及两个关键角色：</p>
<ol>
<li><code>Proxy</code> 类：这是创建动态代理实例的主工厂。最重要的方法是 <code>Proxy.newProxyInstance()</code>。</li>
<li><code>InvocationHandler</code> 接口：这是代理的“大脑”。它是一个接口，只有一个 <code>invoke</code> 方法。所有对代理对象的方法调用，最终都会被转发到这个 <code>invoke</code> 方法中来统一处理。</li>
</ol>
<h4 id="_53">动态代理的工作流程<a class="headerlink" href="#_53" title="Permanent link">&para;</a></h4>
<ol>
<li>当客户端代码调用代理对象的一个方法时（例如 <code>proxy.doSomething()</code>）。</li>
<li><span style="color:#d59bf6;">这个调用请求不会直接执行</span>，而是被 <strong>转发</strong> 到与该代理关联的 <code>InvocationHandler</code> 的 <code>invoke</code> 方法上。</li>
<li><code>invoke</code> 方法会接收到三个参数：<ul>
<li><code>Object proxy</code>: 代理对象本身（一般很少使用）。</li>
<li><code>Method method</code>: 被调用的方法对象（例如 <code>doSomething</code> 方法）。</li>
<li><code>Object[] args</code>: 调用方法时传递的参数。</li>
</ul>
</li>
<li>在 <code>invoke</code> 方法内部，我们可以：<ul>
<li><strong>执行前置增强</strong>：比如打印日志、开启事务。</li>
<li>通过反射调用<strong>目标对象的原始方法</strong>：<code>method.invoke(target, args)</code>。</li>
<li><strong>执行后置增强</strong>：比如提交事务、计算耗时。</li>
<li>返回原始方法的执行结果。</li>
</ul>
</li>
</ol>
<p>示例代码：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-44-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-44-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-44-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-44-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-44-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-44-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-44-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-44-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-44-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-44-10">10</a></span>
<span class="normal"><a href="#__codelineno-44-11">11</a></span>
<span class="normal"><a href="#__codelineno-44-12">12</a></span>
<span class="normal"><a href="#__codelineno-44-13">13</a></span>
<span class="normal"><a href="#__codelineno-44-14">14</a></span>
<span class="normal"><a href="#__codelineno-44-15">15</a></span>
<span class="normal"><a href="#__codelineno-44-16">16</a></span>
<span class="normal"><a href="#__codelineno-44-17">17</a></span>
<span class="normal"><a href="#__codelineno-44-18">18</a></span>
<span class="normal"><a href="#__codelineno-44-19">19</a></span>
<span class="normal"><a href="#__codelineno-44-20">20</a></span>
<span class="normal"><a href="#__codelineno-44-21">21</a></span>
<span class="normal"><a href="#__codelineno-44-22">22</a></span>
<span class="normal"><a href="#__codelineno-44-23">23</a></span>
<span class="normal"><a href="#__codelineno-44-24">24</a></span>
<span class="normal"><a href="#__codelineno-44-25">25</a></span>
<span class="normal"><a href="#__codelineno-44-26">26</a></span>
<span class="normal"><a href="#__codelineno-44-27">27</a></span>
<span class="normal"><a href="#__codelineno-44-28">28</a></span>
<span class="normal"><a href="#__codelineno-44-29">29</a></span>
<span class="normal"><a href="#__codelineno-44-30">30</a></span>
<span class="normal"><a href="#__codelineno-44-31">31</a></span>
<span class="normal"><a href="#__codelineno-44-32">32</a></span>
<span class="normal"><a href="#__codelineno-44-33">33</a></span>
<span class="normal"><a href="#__codelineno-44-34">34</a></span>
<span class="normal"><a href="#__codelineno-44-35">35</a></span>
<span class="normal"><a href="#__codelineno-44-36">36</a></span>
<span class="normal"><a href="#__codelineno-44-37">37</a></span>
<span class="normal"><a href="#__codelineno-44-38">38</a></span>
<span class="normal"><a href="#__codelineno-44-39">39</a></span>
<span class="normal"><a href="#__codelineno-44-40">40</a></span>
<span class="normal"><a href="#__codelineno-44-41">41</a></span>
<span class="normal"><a href="#__codelineno-44-42">42</a></span>
<span class="normal"><a href="#__codelineno-44-43">43</a></span>
<span class="normal"><a href="#__codelineno-44-44">44</a></span>
<span class="normal"><a href="#__codelineno-44-45">45</a></span>
<span class="normal"><a href="#__codelineno-44-46">46</a></span>
<span class="normal"><a href="#__codelineno-44-47">47</a></span>
<span class="normal"><a href="#__codelineno-44-48">48</a></span>
<span class="normal"><a href="#__codelineno-44-49">49</a></span>
<span class="normal"><a href="#__codelineno-44-50">50</a></span>
<span class="normal"><a href="#__codelineno-44-51">51</a></span>
<span class="normal"><a href="#__codelineno-44-52">52</a></span>
<span class="normal"><a href="#__codelineno-44-53">53</a></span>
<span class="normal"><a href="#__codelineno-44-54">54</a></span>
<span class="normal"><a href="#__codelineno-44-55">55</a></span>
<span class="normal"><a href="#__codelineno-44-56">56</a></span>
<span class="normal"><a href="#__codelineno-44-57">57</a></span>
<span class="normal"><a href="#__codelineno-44-58">58</a></span>
<span class="normal"><a href="#__codelineno-44-59">59</a></span>
<span class="normal"><a href="#__codelineno-44-60">60</a></span>
<span class="normal"><a href="#__codelineno-44-61">61</a></span>
<span class="normal"><a href="#__codelineno-44-62">62</a></span>
<span class="normal"><a href="#__codelineno-44-63">63</a></span>
<span class="normal"><a href="#__codelineno-44-64">64</a></span>
<span class="normal"><a href="#__codelineno-44-65">65</a></span>
<span class="normal"><a href="#__codelineno-44-66">66</a></span>
<span class="normal"><a href="#__codelineno-44-67">67</a></span>
<span class="normal"><a href="#__codelineno-44-68">68</a></span>
<span class="normal"><a href="#__codelineno-44-69">69</a></span>
<span class="normal"><a href="#__codelineno-44-70">70</a></span>
<span class="normal"><a href="#__codelineno-44-71">71</a></span>
<span class="normal"><a href="#__codelineno-44-72">72</a></span>
<span class="normal"><a href="#__codelineno-44-73">73</a></span>
<span class="normal"><a href="#__codelineno-44-74">74</a></span>
<span class="normal"><a href="#__codelineno-44-75">75</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1"></a><span class="c1">// 代理是基于接口的，代理要知道明星能够接哪些活，比如唱歌和跳舞</span>
<a id="__codelineno-44-2" name="__codelineno-44-2"></a><span class="c1">// 明星行为接口，StarService就是明星Star的代理</span>
<a id="__codelineno-44-3" name="__codelineno-44-3"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">StarService</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-4" name="__codelineno-44-4"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">sing</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">);</span>
<a id="__codelineno-44-5" name="__codelineno-44-5"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="nf">dance</span><span class="p">();</span>
<a id="__codelineno-44-6" name="__codelineno-44-6"></a><span class="p">}</span>
<a id="__codelineno-44-7" name="__codelineno-44-7"></a>
<a id="__codelineno-44-8" name="__codelineno-44-8"></a><span class="c1">// 被代理的明星类</span>
<a id="__codelineno-44-9" name="__codelineno-44-9"></a><span class="nd">@Data</span>
<a id="__codelineno-44-10" name="__codelineno-44-10"></a><span class="nd">@AllArgsConstructor</span>
<a id="__codelineno-44-11" name="__codelineno-44-11"></a><span class="nd">@NoArgsConstructor</span>
<a id="__codelineno-44-12" name="__codelineno-44-12"></a><span class="c1">// 明星类要实现明星行为接口，由明星本身来完成，如唱歌、跳舞等明星行为</span>
<a id="__codelineno-44-13" name="__codelineno-44-13"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Star</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">StarService</span><span class="p">{</span>
<a id="__codelineno-44-14" name="__codelineno-44-14"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<a id="__codelineno-44-15" name="__codelineno-44-15"></a><span class="w">    </span><span class="c1">// 重写接口方法</span>
<a id="__codelineno-44-16" name="__codelineno-44-16"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-44-17" name="__codelineno-44-17"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">sing</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-18" name="__codelineno-44-18"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;表演唱歌：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">name</span><span class="p">);</span>
<a id="__codelineno-44-19" name="__codelineno-44-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-44-20" name="__codelineno-44-20"></a>
<a id="__codelineno-44-21" name="__codelineno-44-21"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-44-22" name="__codelineno-44-22"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">dance</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-23" name="__codelineno-44-23"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;表演跳舞：魅力四射！&quot;</span><span class="w"> </span><span class="p">);</span>
<a id="__codelineno-44-24" name="__codelineno-44-24"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;谢谢！谢谢！&quot;</span><span class="p">;</span>
<a id="__codelineno-44-25" name="__codelineno-44-25"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-44-26" name="__codelineno-44-26"></a><span class="p">}</span>
<a id="__codelineno-44-27" name="__codelineno-44-27"></a>
<a id="__codelineno-44-28" name="__codelineno-44-28"></a>
<a id="__codelineno-44-29" name="__codelineno-44-29"></a><span class="cm">/**</span>
<a id="__codelineno-44-30" name="__codelineno-44-30"></a><span class="cm"> * 代理工具类：中介公司，专门负责创建代理对象并返回给别人使用</span>
<a id="__codelineno-44-31" name="__codelineno-44-31"></a><span class="cm"> */</span>
<a id="__codelineno-44-32" name="__codelineno-44-32"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ProxyUtil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-33" name="__codelineno-44-33"></a><span class="w">    </span><span class="c1">// 创建一个明星对象的代理对象返回。</span>
<a id="__codelineno-44-34" name="__codelineno-44-34"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">StarService</span><span class="w"> </span><span class="nf">createProxy</span><span class="p">(</span><span class="n">Star</span><span class="w"> </span><span class="n">s</span><span class="p">){</span>
<a id="__codelineno-44-35" name="__codelineno-44-35"></a><span class="w">        </span><span class="cm">/**</span>
<a id="__codelineno-44-36" name="__codelineno-44-36"></a><span class="cm">         * 参数一：用于执行用哪个类加载器去加载生成的代理类。</span>
<a id="__codelineno-44-37" name="__codelineno-44-37"></a><span class="cm">         * 参数二：用于指定代理类需要实现的接口: 明星类实现了哪些接口，代理类就实现哪些接口</span>
<a id="__codelineno-44-38" name="__codelineno-44-38"></a><span class="cm">         * 参数三：用于指定代理类需要如何去代理（代理要做的事情）。</span>
<a id="__codelineno-44-39" name="__codelineno-44-39"></a><span class="cm">         */</span>
<a id="__codelineno-44-40" name="__codelineno-44-40"></a><span class="w">        </span><span class="n">StarService</span><span class="w"> </span><span class="n">proxy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">StarService</span><span class="p">)</span><span class="w"> </span><span class="n">Proxy</span><span class="p">.</span><span class="na">newProxyInstance</span><span class="p">(</span><span class="n">ProxyUtil</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getClassLoader</span><span class="p">(),</span>
<a id="__codelineno-44-41" name="__codelineno-44-41"></a><span class="w">                </span><span class="n">s</span><span class="p">.</span><span class="na">getClass</span><span class="p">().</span><span class="na">getInterfaces</span><span class="p">(),</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InvocationHandler</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-42" name="__codelineno-44-42"></a><span class="w">                    </span><span class="nd">@Override</span>
<a id="__codelineno-44-43" name="__codelineno-44-43"></a><span class="w">                    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">invoke</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">proxy</span><span class="p">,</span><span class="w"> </span><span class="n">Method</span><span class="w"> </span><span class="n">method</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Throwable</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-44" name="__codelineno-44-44"></a><span class="w">                        </span><span class="c1">// 用来声明代理对象要干的事情。</span>
<a id="__codelineno-44-45" name="__codelineno-44-45"></a><span class="w">                        </span><span class="c1">// 参数一： proxy接收到代理对象本身（暂时用处不大）</span>
<a id="__codelineno-44-46" name="__codelineno-44-46"></a><span class="w">                        </span><span class="c1">// 参数二： method代表正在被代理的方法</span>
<a id="__codelineno-44-47" name="__codelineno-44-47"></a><span class="w">                        </span><span class="c1">// 参数三： args代表正在被代理的方法的参数</span>
<a id="__codelineno-44-48" name="__codelineno-44-48"></a><span class="w">                        </span><span class="n">String</span><span class="w"> </span><span class="n">methodName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">method</span><span class="p">.</span><span class="na">getName</span><span class="p">();</span>
<a id="__codelineno-44-49" name="__codelineno-44-49"></a><span class="w">                        </span><span class="k">if</span><span class="p">(</span><span class="s">&quot;sing&quot;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">methodName</span><span class="p">)){</span>
<a id="__codelineno-44-50" name="__codelineno-44-50"></a><span class="w">                            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;准备话筒，收钱20万！&quot;</span><span class="p">);</span>
<a id="__codelineno-44-51" name="__codelineno-44-51"></a><span class="w">                        </span><span class="p">}</span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="p">(</span><span class="s">&quot;dance&quot;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">methodName</span><span class="p">)){</span>
<a id="__codelineno-44-52" name="__codelineno-44-52"></a><span class="w">                            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;准备场地，收钱100万！&quot;</span><span class="p">);</span>
<a id="__codelineno-44-53" name="__codelineno-44-53"></a><span class="w">                        </span><span class="p">}</span>
<a id="__codelineno-44-54" name="__codelineno-44-54"></a><span class="w">                        </span><span class="c1">// 真正干活（把真正的明星对象叫过来正式干活）</span>
<a id="__codelineno-44-55" name="__codelineno-44-55"></a><span class="w">                        </span><span class="c1">// 找真正的明星对象来执行被代理的行为：method方法</span>
<a id="__codelineno-44-56" name="__codelineno-44-56"></a><span class="w">                        </span><span class="n">Object</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">method</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">);</span>
<a id="__codelineno-44-57" name="__codelineno-44-57"></a><span class="w">                        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
<a id="__codelineno-44-58" name="__codelineno-44-58"></a><span class="w">                    </span><span class="p">}</span>
<a id="__codelineno-44-59" name="__codelineno-44-59"></a><span class="w">                </span><span class="p">});</span>
<a id="__codelineno-44-60" name="__codelineno-44-60"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">proxy</span><span class="p">;</span>
<a id="__codelineno-44-61" name="__codelineno-44-61"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-44-62" name="__codelineno-44-62"></a><span class="p">}</span>
<a id="__codelineno-44-63" name="__codelineno-44-63"></a>
<a id="__codelineno-44-64" name="__codelineno-44-64"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-65" name="__codelineno-44-65"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-44-66" name="__codelineno-44-66"></a><span class="w">        </span><span class="c1">// 目标：创建代理对象。</span>
<a id="__codelineno-44-67" name="__codelineno-44-67"></a><span class="w">        </span><span class="c1">// 1、准备一个明星对象：设计明星类。</span>
<a id="__codelineno-44-68" name="__codelineno-44-68"></a><span class="w">        </span><span class="n">Star</span><span class="w"> </span><span class="n">star</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Star</span><span class="p">(</span><span class="s">&quot;章若楠&quot;</span><span class="p">);</span>
<a id="__codelineno-44-69" name="__codelineno-44-69"></a><span class="w">        </span><span class="c1">// star.sing(&quot;《红昭愿》&quot;);</span>
<a id="__codelineno-44-70" name="__codelineno-44-70"></a><span class="w">        </span><span class="c1">// 2、为章若楠创建一个专属与她的代理对象。</span>
<a id="__codelineno-44-71" name="__codelineno-44-71"></a><span class="w">        </span><span class="n">StarService</span><span class="w"> </span><span class="n">proxy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ProxyUtil</span><span class="p">.</span><span class="na">createProxy</span><span class="p">(</span><span class="n">star</span><span class="p">);</span>
<a id="__codelineno-44-72" name="__codelineno-44-72"></a><span class="w">        </span><span class="n">proxy</span><span class="p">.</span><span class="na">sing</span><span class="p">(</span><span class="s">&quot;《红昭愿》&quot;</span><span class="p">);</span>
<a id="__codelineno-44-73" name="__codelineno-44-73"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">proxy</span><span class="p">.</span><span class="na">dance</span><span class="p">());</span>
<a id="__codelineno-44-74" name="__codelineno-44-74"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-44-75" name="__codelineno-44-75"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h4 id="_54">代码实例<a class="headerlink" href="#_54" title="Permanent link">&para;</a></h4>
<p>让我们通过一个“为用户服务添加性能监控”的例子来演示。</p>
<p><strong>第一步：定义一个接口</strong></p>
<p>动态代理是基于接口的，所以我们首先需要一个接口。</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-45-1">1</a></span>
<span class="normal"><a href="#__codelineno-45-2">2</a></span>
<span class="normal"><a href="#__codelineno-45-3">3</a></span>
<span class="normal"><a href="#__codelineno-45-4">4</a></span>
<span class="normal"><a href="#__codelineno-45-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1"></a><span class="c1">// UserService.java</span>
<a id="__codelineno-45-2" name="__codelineno-45-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">UserService</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-45-3" name="__codelineno-45-3"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">addUser</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">username</span><span class="p">);</span>
<a id="__codelineno-45-4" name="__codelineno-45-4"></a><span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="nf">findUser</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>
<a id="__codelineno-45-5" name="__codelineno-45-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p><strong>第二步：创建接口的实现类（目标对象）</strong></p>
<p>这是我们原始的、不希望被修改的业务逻辑。</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-46-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-46-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-46-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-46-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-46-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-46-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-46-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-46-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-46-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-46-10">10</a></span>
<span class="normal"><a href="#__codelineno-46-11">11</a></span>
<span class="normal"><a href="#__codelineno-46-12">12</a></span>
<span class="normal"><a href="#__codelineno-46-13">13</a></span>
<span class="normal"><a href="#__codelineno-46-14">14</a></span>
<span class="normal"><a href="#__codelineno-46-15">15</a></span>
<span class="normal"><a href="#__codelineno-46-16">16</a></span>
<span class="normal"><a href="#__codelineno-46-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1"></a><span class="c1">// UserServiceImpl.java</span>
<a id="__codelineno-46-2" name="__codelineno-46-2"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserServiceImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">UserService</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-46-3" name="__codelineno-46-3"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-46-4" name="__codelineno-46-4"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">addUser</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">username</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-46-5" name="__codelineno-46-5"></a><span class="w">        </span><span class="c1">// 模拟数据库操作耗时</span>
<a id="__codelineno-46-6" name="__codelineno-46-6"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span><span class="p">(</span><span class="mi">50</span><span class="p">);</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">InterruptedException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-46-7" name="__codelineno-46-7"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;成功添加用户: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">username</span><span class="p">);</span>
<a id="__codelineno-46-8" name="__codelineno-46-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-46-9" name="__codelineno-46-9"></a>
<a id="__codelineno-46-10" name="__codelineno-46-10"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-46-11" name="__codelineno-46-11"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">findUser</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-46-12" name="__codelineno-46-12"></a><span class="w">        </span><span class="c1">// 模拟数据库操作耗时</span>
<a id="__codelineno-46-13" name="__codelineno-46-13"></a><span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">InterruptedException</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-46-14" name="__codelineno-46-14"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;正在查找ID为 &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; 的用户...&quot;</span><span class="p">);</span>
<a id="__codelineno-46-15" name="__codelineno-46-15"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;用户&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<a id="__codelineno-46-16" name="__codelineno-46-16"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-46-17" name="__codelineno-46-17"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p><strong>第三步：创建<code>InvocationHandler</code>实现</strong></p>
<p>这是动态代理的核心，我们在这里编写增强逻辑。</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-47-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-47-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-47-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-47-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-47-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-47-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-47-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-47-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-47-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-47-10">10</a></span>
<span class="normal"><a href="#__codelineno-47-11">11</a></span>
<span class="normal"><a href="#__codelineno-47-12">12</a></span>
<span class="normal"><a href="#__codelineno-47-13">13</a></span>
<span class="normal"><a href="#__codelineno-47-14">14</a></span>
<span class="normal"><a href="#__codelineno-47-15">15</a></span>
<span class="normal"><a href="#__codelineno-47-16">16</a></span>
<span class="normal"><a href="#__codelineno-47-17">17</a></span>
<span class="normal"><a href="#__codelineno-47-18">18</a></span>
<span class="normal"><a href="#__codelineno-47-19">19</a></span>
<span class="normal"><a href="#__codelineno-47-20">20</a></span>
<span class="normal"><a href="#__codelineno-47-21">21</a></span>
<span class="normal"><a href="#__codelineno-47-22">22</a></span>
<span class="normal"><a href="#__codelineno-47-23">23</a></span>
<span class="normal"><a href="#__codelineno-47-24">24</a></span>
<span class="normal"><a href="#__codelineno-47-25">25</a></span>
<span class="normal"><a href="#__codelineno-47-26">26</a></span>
<span class="normal"><a href="#__codelineno-47-27">27</a></span>
<span class="normal"><a href="#__codelineno-47-28">28</a></span>
<span class="normal"><a href="#__codelineno-47-29">29</a></span>
<span class="normal"><a href="#__codelineno-47-30">30</a></span>
<span class="normal"><a href="#__codelineno-47-31">31</a></span>
<span class="normal"><a href="#__codelineno-47-32">32</a></span>
<span class="normal"><a href="#__codelineno-47-33">33</a></span>
<span class="normal"><a href="#__codelineno-47-34">34</a></span>
<span class="normal"><a href="#__codelineno-47-35">35</a></span>
<span class="normal"><a href="#__codelineno-47-36">36</a></span>
<span class="normal"><a href="#__codelineno-47-37">37</a></span>
<span class="normal"><a href="#__codelineno-47-38">38</a></span>
<span class="normal"><a href="#__codelineno-47-39">39</a></span>
<span class="normal"><a href="#__codelineno-47-40">40</a></span>
<span class="normal"><a href="#__codelineno-47-41">41</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1"></a><span class="c1">// PerformanceMonitorHandler.java</span>
<a id="__codelineno-47-2" name="__codelineno-47-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.InvocationHandler</span><span class="p">;</span>
<a id="__codelineno-47-3" name="__codelineno-47-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Method</span><span class="p">;</span>
<a id="__codelineno-47-4" name="__codelineno-47-4"></a>
<a id="__codelineno-47-5" name="__codelineno-47-5"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PerformanceMonitorHandler</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">InvocationHandler</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-47-6" name="__codelineno-47-6"></a>
<a id="__codelineno-47-7" name="__codelineno-47-7"></a><span class="w">    </span><span class="c1">// 目标对象，也就是被代理的对象</span>
<a id="__codelineno-47-8" name="__codelineno-47-8"></a><span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="n">target</span><span class="p">;</span>
<a id="__codelineno-47-9" name="__codelineno-47-9"></a>
<a id="__codelineno-47-10" name="__codelineno-47-10"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">PerformanceMonitorHandler</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">target</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-47-11" name="__codelineno-47-11"></a><span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">target</span><span class="p">;</span>
<a id="__codelineno-47-12" name="__codelineno-47-12"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-47-13" name="__codelineno-47-13"></a>
<a id="__codelineno-47-14" name="__codelineno-47-14"></a><span class="w">    </span><span class="cm">/**</span>
<a id="__codelineno-47-15" name="__codelineno-47-15"></a><span class="cm">     * 所有对代理对象的方法调用都会进入这个invoke方法</span>
<a id="__codelineno-47-16" name="__codelineno-47-16"></a><span class="cm">     * @param proxy 代理对象</span>
<a id="__codelineno-47-17" name="__codelineno-47-17"></a><span class="cm">     * @param method 被调用的方法</span>
<a id="__codelineno-47-18" name="__codelineno-47-18"></a><span class="cm">     * @param args 方法的参数</span>
<a id="__codelineno-47-19" name="__codelineno-47-19"></a><span class="cm">     * @return 方法的返回值</span>
<a id="__codelineno-47-20" name="__codelineno-47-20"></a><span class="cm">     * @throws Throwable</span>
<a id="__codelineno-47-21" name="__codelineno-47-21"></a><span class="cm">     */</span>
<a id="__codelineno-47-22" name="__codelineno-47-22"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-47-23" name="__codelineno-47-23"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">invoke</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">proxy</span><span class="p">,</span><span class="w"> </span><span class="n">Method</span><span class="w"> </span><span class="n">method</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Throwable</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-47-24" name="__codelineno-47-24"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;---进入性能监控代理---&quot;</span><span class="p">);</span>
<a id="__codelineno-47-25" name="__codelineno-47-25"></a>
<a id="__codelineno-47-26" name="__codelineno-47-26"></a><span class="w">        </span><span class="c1">// 1. 前置增强：记录方法开始时间</span>
<a id="__codelineno-47-27" name="__codelineno-47-27"></a><span class="w">        </span><span class="kt">long</span><span class="w"> </span><span class="n">startTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">currentTimeMillis</span><span class="p">();</span>
<a id="__codelineno-47-28" name="__codelineno-47-28"></a>
<a id="__codelineno-47-29" name="__codelineno-47-29"></a><span class="w">        </span><span class="c1">// 2. 通过反射调用目标对象的原始方法</span>
<a id="__codelineno-47-30" name="__codelineno-47-30"></a><span class="w">        </span><span class="n">Object</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">method</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="n">target</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">);</span>
<a id="__codelineno-47-31" name="__codelineno-47-31"></a>
<a id="__codelineno-47-32" name="__codelineno-47-32"></a><span class="w">        </span><span class="c1">// 3. 后置增强：记录方法结束时间并计算耗时</span>
<a id="__codelineno-47-33" name="__codelineno-47-33"></a><span class="w">        </span><span class="kt">long</span><span class="w"> </span><span class="n">endTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">currentTimeMillis</span><span class="p">();</span>
<a id="__codelineno-47-34" name="__codelineno-47-34"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;方法 &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">method</span><span class="p">.</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; 执行耗时: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">endTime</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">startTime</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;毫秒&quot;</span><span class="p">);</span>
<a id="__codelineno-47-35" name="__codelineno-47-35"></a>
<a id="__codelineno-47-36" name="__codelineno-47-36"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;---退出性能监控代理---&quot;</span><span class="p">);</span>
<a id="__codelineno-47-37" name="__codelineno-47-37"></a>
<a id="__codelineno-47-38" name="__codelineno-47-38"></a><span class="w">        </span><span class="c1">// 4. 返回原始方法的执行结果</span>
<a id="__codelineno-47-39" name="__codelineno-47-39"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
<a id="__codelineno-47-40" name="__codelineno-47-40"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-47-41" name="__codelineno-47-41"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p><strong>第四步：创建并使用代理对象</strong></p>
<p>在客户端代码中，我们使用 <code>Proxy.newProxyInstance()</code> 来生成代理。</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-48-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-48-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-48-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-48-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-48-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-48-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-48-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-48-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-48-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-48-10">10</a></span>
<span class="normal"><a href="#__codelineno-48-11">11</a></span>
<span class="normal"><a href="#__codelineno-48-12">12</a></span>
<span class="normal"><a href="#__codelineno-48-13">13</a></span>
<span class="normal"><a href="#__codelineno-48-14">14</a></span>
<span class="normal"><a href="#__codelineno-48-15">15</a></span>
<span class="normal"><a href="#__codelineno-48-16">16</a></span>
<span class="normal"><a href="#__codelineno-48-17">17</a></span>
<span class="normal"><a href="#__codelineno-48-18">18</a></span>
<span class="normal"><a href="#__codelineno-48-19">19</a></span>
<span class="normal"><a href="#__codelineno-48-20">20</a></span>
<span class="normal"><a href="#__codelineno-48-21">21</a></span>
<span class="normal"><a href="#__codelineno-48-22">22</a></span>
<span class="normal"><a href="#__codelineno-48-23">23</a></span>
<span class="normal"><a href="#__codelineno-48-24">24</a></span>
<span class="normal"><a href="#__codelineno-48-25">25</a></span>
<span class="normal"><a href="#__codelineno-48-26">26</a></span>
<span class="normal"><a href="#__codelineno-48-27">27</a></span>
<span class="normal"><a href="#__codelineno-48-28">28</a></span>
<span class="normal"><a href="#__codelineno-48-29">29</a></span>
<span class="normal"><a href="#__codelineno-48-30">30</a></span>
<span class="normal"><a href="#__codelineno-48-31">31</a></span>
<span class="normal"><a href="#__codelineno-48-32">32</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1"></a><span class="c1">// ProxyClient.java</span>
<a id="__codelineno-48-2" name="__codelineno-48-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">java.lang.reflect.Proxy</span><span class="p">;</span>
<a id="__codelineno-48-3" name="__codelineno-48-3"></a>
<a id="__codelineno-48-4" name="__codelineno-48-4"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ProxyClient</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-48-5" name="__codelineno-48-5"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-48-6" name="__codelineno-48-6"></a><span class="w">        </span><span class="c1">// 1. 创建目标对象实例</span>
<a id="__codelineno-48-7" name="__codelineno-48-7"></a><span class="w">        </span><span class="n">UserService</span><span class="w"> </span><span class="n">realUserService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserServiceImpl</span><span class="p">();</span>
<a id="__codelineno-48-8" name="__codelineno-48-8"></a>
<a id="__codelineno-48-9" name="__codelineno-48-9"></a><span class="w">        </span><span class="c1">// 2. 创建 InvocationHandler 实例，并将目标对象传入</span>
<a id="__codelineno-48-10" name="__codelineno-48-10"></a><span class="w">        </span><span class="n">InvocationHandler</span><span class="w"> </span><span class="n">handler</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">PerformanceMonitorHandler</span><span class="p">(</span><span class="n">realUserService</span><span class="p">);</span>
<a id="__codelineno-48-11" name="__codelineno-48-11"></a>
<a id="__codelineno-48-12" name="__codelineno-48-12"></a><span class="w">        </span><span class="c1">// 3. 使用 Proxy.newProxyInstance() 创建动态代理对象</span>
<a id="__codelineno-48-13" name="__codelineno-48-13"></a><span class="w">        </span><span class="c1">// 参数1: 类加载器，通常和目标对象使用同一个</span>
<a id="__codelineno-48-14" name="__codelineno-48-14"></a><span class="w">        </span><span class="c1">// 参数2: 代理类需要实现的接口数组，和目标对象的接口保持一致</span>
<a id="__codelineno-48-15" name="__codelineno-48-15"></a><span class="w">        </span><span class="c1">// 参数3: InvocationHandler，我们将方法调度的逻辑委托给它</span>
<a id="__codelineno-48-16" name="__codelineno-48-16"></a><span class="w">        </span><span class="n">UserService</span><span class="w"> </span><span class="n">proxyUserService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">UserService</span><span class="p">)</span><span class="w"> </span><span class="n">Proxy</span><span class="p">.</span><span class="na">newProxyInstance</span><span class="p">(</span>
<a id="__codelineno-48-17" name="__codelineno-48-17"></a><span class="w">                </span><span class="n">realUserService</span><span class="p">.</span><span class="na">getClass</span><span class="p">().</span><span class="na">getClassLoader</span><span class="p">(),</span>
<a id="__codelineno-48-18" name="__codelineno-48-18"></a><span class="w">                </span><span class="n">realUserService</span><span class="p">.</span><span class="na">getClass</span><span class="p">().</span><span class="na">getInterfaces</span><span class="p">(),</span>
<a id="__codelineno-48-19" name="__codelineno-48-19"></a><span class="w">                </span><span class="n">handler</span>
<a id="__codelineno-48-20" name="__codelineno-48-20"></a><span class="w">        </span><span class="p">);</span>
<a id="__codelineno-48-21" name="__codelineno-48-21"></a>
<a id="__codelineno-48-22" name="__codelineno-48-22"></a><span class="w">        </span><span class="c1">// 4. 通过代理对象调用方法</span>
<a id="__codelineno-48-23" name="__codelineno-48-23"></a><span class="w">        </span><span class="c1">// 注意：我们现在操作的是 proxyUserService，而不是 realUserService</span>
<a id="__codelineno-48-24" name="__codelineno-48-24"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;开始调用 addUser 方法...&quot;</span><span class="p">);</span>
<a id="__codelineno-48-25" name="__codelineno-48-25"></a><span class="w">        </span><span class="n">proxyUserService</span><span class="p">.</span><span class="na">addUser</span><span class="p">(</span><span class="s">&quot;Alice&quot;</span><span class="p">);</span>
<a id="__codelineno-48-26" name="__codelineno-48-26"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">();</span>
<a id="__codelineno-48-27" name="__codelineno-48-27"></a>
<a id="__codelineno-48-28" name="__codelineno-48-28"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;开始调用 findUser 方法...&quot;</span><span class="p">);</span>
<a id="__codelineno-48-29" name="__codelineno-48-29"></a><span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">proxyUserService</span><span class="p">.</span><span class="na">findUser</span><span class="p">(</span><span class="mi">101</span><span class="p">);</span>
<a id="__codelineno-48-30" name="__codelineno-48-30"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;查询结果: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">user</span><span class="p">);</span>
<a id="__codelineno-48-31" name="__codelineno-48-31"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-48-32" name="__codelineno-48-32"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p><strong>运行结果：</strong></p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-49-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-49-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-49-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-49-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-49-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-49-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-49-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-49-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-49-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-49-10">10</a></span>
<span class="normal"><a href="#__codelineno-49-11">11</a></span>
<span class="normal"><a href="#__codelineno-49-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1"></a><span class="n">开始调用</span><span class="w"> </span><span class="n">addUser</span><span class="w"> </span><span class="n">方法</span><span class="p">...</span>
<a id="__codelineno-49-2" name="__codelineno-49-2"></a><span class="o">---</span><span class="n">进入性能监控代理</span><span class="o">---</span>
<a id="__codelineno-49-3" name="__codelineno-49-3"></a><span class="nl">成功添加用户</span><span class="p">:</span><span class="w"> </span><span class="n">Alice</span>
<a id="__codelineno-49-4" name="__codelineno-49-4"></a><span class="n">方法</span><span class="w"> </span><span class="n">addUser</span><span class="w"> </span><span class="n">执行耗时</span><span class="p">:</span><span class="w"> </span><span class="mi">53</span><span class="n">毫秒</span>
<a id="__codelineno-49-5" name="__codelineno-49-5"></a><span class="o">---</span><span class="n">退出性能监控代理</span><span class="o">---</span>
<a id="__codelineno-49-6" name="__codelineno-49-6"></a>
<a id="__codelineno-49-7" name="__codelineno-49-7"></a><span class="n">开始调用</span><span class="w"> </span><span class="n">findUser</span><span class="w"> </span><span class="n">方法</span><span class="p">...</span>
<a id="__codelineno-49-8" name="__codelineno-49-8"></a><span class="o">---</span><span class="n">进入性能监控代理</span><span class="o">---</span>
<a id="__codelineno-49-9" name="__codelineno-49-9"></a><span class="n">正在查找ID为</span><span class="w"> </span><span class="mi">101</span><span class="w"> </span><span class="n">的用户</span><span class="p">...</span>
<a id="__codelineno-49-10" name="__codelineno-49-10"></a><span class="n">方法</span><span class="w"> </span><span class="n">findUser</span><span class="w"> </span><span class="n">执行耗时</span><span class="p">:</span><span class="w"> </span><span class="mi">101</span><span class="n">毫秒</span>
<a id="__codelineno-49-11" name="__codelineno-49-11"></a><span class="o">---</span><span class="n">退出性能监控代理</span><span class="o">---</span>
<a id="__codelineno-49-12" name="__codelineno-49-12"></a><span class="nl">查询结果</span><span class="p">:</span><span class="w"> </span><span class="n">用户101</span>
</code></pre></div></td></tr></table></div>
<p>从结果可以看出，我们没有修改一行 <code>UserServiceImpl</code> 的代码，却成功地为它的每个方法都增加了性能监控的功能。</p>
<p><strong>总结</strong></p>
<ul>
<li>
<p><strong>为什么需要代理？</strong></p>
<ul>
<li>为了在<strong>不修改源码</strong>的情况下，对已有对象的功能进行<strong>增强</strong>或<strong>控制</strong>。</li>
<li>核心价值在于<strong>解耦</strong>，让业务逻辑和非业务的通用逻辑（如日志、事务、安全）分离。</li>
</ul>
</li>
<li>
<p><strong>Java动态代理</strong></p>
<ul>
<li>
<p><strong>优点</strong>：解决了静态代理的类爆炸问题，非常灵活，可以在运行时动态创建代理。</p>
</li>
<li>
<p><strong>核心</strong>：<code>Proxy</code> 类和 <code>InvocationHandler</code> 接口。所有逻辑都集中在 <code>invoke</code> 方法中。</p>
</li>
<li>
<p>局限</p>
<p>：Java原生的动态代理</p>
<p>必须基于接口</p>
<p>。如果一个类没有实现任何接口，就无法为它创建动态代理。</p>
<ul>
<li>（<em>补充知识</em>：为了解决这个问题，可以引入第三方库如 <strong>CGLIB</strong>，它通过继承目标类来创建代理，从而绕过了接口的限制。）</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>又一个案例：</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Java</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-50-1">  1</a></span>
<span class="normal"><a href="#__codelineno-50-2">  2</a></span>
<span class="normal"><a href="#__codelineno-50-3">  3</a></span>
<span class="normal"><a href="#__codelineno-50-4">  4</a></span>
<span class="normal"><a href="#__codelineno-50-5">  5</a></span>
<span class="normal"><a href="#__codelineno-50-6">  6</a></span>
<span class="normal"><a href="#__codelineno-50-7">  7</a></span>
<span class="normal"><a href="#__codelineno-50-8">  8</a></span>
<span class="normal"><a href="#__codelineno-50-9">  9</a></span>
<span class="normal"><a href="#__codelineno-50-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-50-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-50-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-50-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-50-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-50-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-50-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-50-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-50-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-50-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-50-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-50-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-50-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-50-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-50-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-50-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-50-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-50-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-50-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-50-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-50-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-50-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-50-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-50-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-50-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-50-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-50-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-50-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-50-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-50-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-50-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-50-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-50-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-50-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-50-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-50-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-50-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-50-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-50-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-50-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-50-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-50-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-50-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-50-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-50-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-50-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-50-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-50-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-50-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-50-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-50-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-50-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-50-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-50-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-50-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-50-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-50-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-50-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-50-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-50-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-50-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-50-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-50-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-50-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-50-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-50-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-50-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-50-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-50-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-50-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-50-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-50-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-50-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-50-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-50-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-50-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-50-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-50-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-50-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-50-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-50-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-50-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-50-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-50-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-50-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-50-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-50-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-50-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-50-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-50-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-50-100">100</a></span>
<span class="normal"><a href="#__codelineno-50-101">101</a></span>
<span class="normal"><a href="#__codelineno-50-102">102</a></span>
<span class="normal"><a href="#__codelineno-50-103">103</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1"></a><span class="cm">/**</span>
<a id="__codelineno-50-2" name="__codelineno-50-2"></a><span class="cm"> *  用户业务接口</span>
<a id="__codelineno-50-3" name="__codelineno-50-3"></a><span class="cm"> */</span>
<a id="__codelineno-50-4" name="__codelineno-50-4"></a><span class="c1">// 在接口中定义好需要实现的核心功能</span>
<a id="__codelineno-50-5" name="__codelineno-50-5"></a><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">UserService</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-6" name="__codelineno-50-6"></a><span class="w">    </span><span class="c1">// 登录功能</span>
<a id="__codelineno-50-7" name="__codelineno-50-7"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">login</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">loginName</span><span class="p">,</span><span class="n">String</span><span class="w"> </span><span class="n">passWord</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="p">;</span>
<a id="__codelineno-50-8" name="__codelineno-50-8"></a><span class="w">    </span><span class="c1">// 删除用户</span>
<a id="__codelineno-50-9" name="__codelineno-50-9"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">deleteUsers</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="p">;</span>
<a id="__codelineno-50-10" name="__codelineno-50-10"></a><span class="w">    </span><span class="c1">// 查询用户，返回数组的形式。</span>
<a id="__codelineno-50-11" name="__codelineno-50-11"></a><span class="w">    </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="nf">selectUsers</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="p">;</span>
<a id="__codelineno-50-12" name="__codelineno-50-12"></a><span class="w">    </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="nf">selectUsers2</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="p">;</span>
<a id="__codelineno-50-13" name="__codelineno-50-13"></a><span class="p">}</span>
<a id="__codelineno-50-14" name="__codelineno-50-14"></a>
<a id="__codelineno-50-15" name="__codelineno-50-15"></a>
<a id="__codelineno-50-16" name="__codelineno-50-16"></a>
<a id="__codelineno-50-17" name="__codelineno-50-17"></a><span class="cm">/**</span>
<a id="__codelineno-50-18" name="__codelineno-50-18"></a><span class="cm"> * 用户业务实现类（面向接口编程）</span>
<a id="__codelineno-50-19" name="__codelineno-50-19"></a><span class="cm"> */</span>
<a id="__codelineno-50-20" name="__codelineno-50-20"></a><span class="c1">// 根据接口定义好核心功能的具体实现</span>
<a id="__codelineno-50-21" name="__codelineno-50-21"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">UserServiceImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">UserService</span><span class="p">{</span>
<a id="__codelineno-50-22" name="__codelineno-50-22"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-50-23" name="__codelineno-50-23"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">login</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">loginName</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">passWord</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-24" name="__codelineno-50-24"></a><span class="w">        </span><span class="c1">// ----------------------</span>
<a id="__codelineno-50-25" name="__codelineno-50-25"></a><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="s">&quot;admin&quot;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">loginName</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="s">&quot;123456&quot;</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">passWord</span><span class="p">)){</span>
<a id="__codelineno-50-26" name="__codelineno-50-26"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;您登录成功，欢迎光临本系统~&quot;</span><span class="p">);</span>
<a id="__codelineno-50-27" name="__codelineno-50-27"></a><span class="w">        </span><span class="p">}</span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-28" name="__codelineno-50-28"></a><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;您登录失败，用户名或密码错误~&quot;</span><span class="p">);</span>
<a id="__codelineno-50-29" name="__codelineno-50-29"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-50-30" name="__codelineno-50-30"></a><span class="w">        </span><span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span><span class="p">(</span><span class="mi">1000</span><span class="p">);</span>
<a id="__codelineno-50-31" name="__codelineno-50-31"></a><span class="w">        </span><span class="c1">// --------------------------</span>
<a id="__codelineno-50-32" name="__codelineno-50-32"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-50-33" name="__codelineno-50-33"></a>
<a id="__codelineno-50-34" name="__codelineno-50-34"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-50-35" name="__codelineno-50-35"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">deleteUsers</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="p">{</span>
<a id="__codelineno-50-36" name="__codelineno-50-36"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;成功删除了1万个用户~&quot;</span><span class="p">);</span>
<a id="__codelineno-50-37" name="__codelineno-50-37"></a><span class="w">        </span><span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span><span class="p">(</span><span class="mi">1500</span><span class="p">);</span>
<a id="__codelineno-50-38" name="__codelineno-50-38"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-50-39" name="__codelineno-50-39"></a>
<a id="__codelineno-50-40" name="__codelineno-50-40"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-50-41" name="__codelineno-50-41"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="nf">selectUsers</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="p">{</span>
<a id="__codelineno-50-42" name="__codelineno-50-42"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;查询出了3个用户&quot;</span><span class="p">);</span>
<a id="__codelineno-50-43" name="__codelineno-50-43"></a><span class="w">        </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;张全蛋&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;李二狗&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;牛爱花&quot;</span><span class="p">};</span>
<a id="__codelineno-50-44" name="__codelineno-50-44"></a><span class="w">        </span><span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
<a id="__codelineno-50-45" name="__codelineno-50-45"></a>
<a id="__codelineno-50-46" name="__codelineno-50-46"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">names</span><span class="p">;</span>
<a id="__codelineno-50-47" name="__codelineno-50-47"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-50-48" name="__codelineno-50-48"></a>
<a id="__codelineno-50-49" name="__codelineno-50-49"></a><span class="w">    </span><span class="nd">@Override</span>
<a id="__codelineno-50-50" name="__codelineno-50-50"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="nf">selectUsers2</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-51" name="__codelineno-50-51"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;查询出了3000个用户&quot;</span><span class="p">);</span>
<a id="__codelineno-50-52" name="__codelineno-50-52"></a><span class="w">        </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;张全蛋2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;李二狗2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;牛爱花2&quot;</span><span class="p">};</span>
<a id="__codelineno-50-53" name="__codelineno-50-53"></a><span class="w">        </span><span class="n">Thread</span><span class="p">.</span><span class="na">sleep</span><span class="p">(</span><span class="mi">2500</span><span class="p">);</span>
<a id="__codelineno-50-54" name="__codelineno-50-54"></a>
<a id="__codelineno-50-55" name="__codelineno-50-55"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">names</span><span class="p">;</span>
<a id="__codelineno-50-56" name="__codelineno-50-56"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-50-57" name="__codelineno-50-57"></a><span class="p">}</span>
<a id="__codelineno-50-58" name="__codelineno-50-58"></a>
<a id="__codelineno-50-59" name="__codelineno-50-59"></a>
<a id="__codelineno-50-60" name="__codelineno-50-60"></a>
<a id="__codelineno-50-61" name="__codelineno-50-61"></a><span class="c1">// 通过代理为前面的核心功能增加附加功能，而不用修改核心功能的原始代码，比如这里为每一个核心功能增加了耗时检测功能</span>
<a id="__codelineno-50-62" name="__codelineno-50-62"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ProxyUtil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-63" name="__codelineno-50-63"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="nf">createProxy</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-64" name="__codelineno-50-64"></a><span class="w">        </span><span class="n">T</span><span class="w"> </span><span class="n">proxy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="p">)</span><span class="w"> </span><span class="n">Proxy</span><span class="p">.</span><span class="na">newProxyInstance</span><span class="p">(</span><span class="n">ProxyUtil</span><span class="p">.</span><span class="na">class</span><span class="p">.</span><span class="na">getClassLoader</span><span class="p">(),</span>
<a id="__codelineno-50-65" name="__codelineno-50-65"></a><span class="w">                </span><span class="n">obj</span><span class="p">.</span><span class="na">getClass</span><span class="p">().</span><span class="na">getInterfaces</span><span class="p">(),</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">InvocationHandler</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-66" name="__codelineno-50-66"></a><span class="w">                    </span><span class="nd">@Override</span>
<a id="__codelineno-50-67" name="__codelineno-50-67"></a><span class="w">                    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">invoke</span><span class="p">(</span><span class="n">Object</span><span class="w"> </span><span class="n">proxy</span><span class="p">,</span><span class="w"> </span><span class="n">Method</span><span class="w"> </span><span class="n">method</span><span class="p">,</span><span class="w"> </span><span class="n">Object</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Throwable</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-68" name="__codelineno-50-68"></a><span class="w">                        </span><span class="kt">long</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">currentTimeMillis</span><span class="p">();</span><span class="w"> </span><span class="c1">// 记录开始时间 1970年1月1日0时0分0秒 走到此刻的总毫秒值</span>
<a id="__codelineno-50-69" name="__codelineno-50-69"></a><span class="w">                        </span><span class="c1">// 真正调用业务对象被代理的方法</span>
<a id="__codelineno-50-70" name="__codelineno-50-70"></a><span class="w">                        </span><span class="n">Object</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">method</span><span class="p">.</span><span class="na">invoke</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">);</span>
<a id="__codelineno-50-71" name="__codelineno-50-71"></a>
<a id="__codelineno-50-72" name="__codelineno-50-72"></a><span class="w">                        </span><span class="kt">long</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="na">currentTimeMillis</span><span class="p">();</span>
<a id="__codelineno-50-73" name="__codelineno-50-73"></a><span class="w">                        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">method</span><span class="p">.</span><span class="na">getName</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;方法耗时：&quot;</span><span class="o">+</span><span class="p">(</span><span class="n">end</span><span class="o">-</span><span class="n">start</span><span class="p">)</span><span class="o">/</span><span class="mf">1000.0</span><span class="o">+</span><span class="s">&quot;秒&quot;</span><span class="p">);</span>
<a id="__codelineno-50-74" name="__codelineno-50-74"></a><span class="w">                        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
<a id="__codelineno-50-75" name="__codelineno-50-75"></a><span class="w">                    </span><span class="p">}</span>
<a id="__codelineno-50-76" name="__codelineno-50-76"></a><span class="w">                </span><span class="p">});</span>
<a id="__codelineno-50-77" name="__codelineno-50-77"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">proxy</span><span class="p">;</span>
<a id="__codelineno-50-78" name="__codelineno-50-78"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-50-79" name="__codelineno-50-79"></a><span class="p">}</span>
<a id="__codelineno-50-80" name="__codelineno-50-80"></a>
<a id="__codelineno-50-81" name="__codelineno-50-81"></a>
<a id="__codelineno-50-82" name="__codelineno-50-82"></a>
<a id="__codelineno-50-83" name="__codelineno-50-83"></a><span class="cm">/**</span>
<a id="__codelineno-50-84" name="__codelineno-50-84"></a><span class="cm"> * 目标：使用动态代理解决实际问题，并掌握使用代理的好处。</span>
<a id="__codelineno-50-85" name="__codelineno-50-85"></a><span class="cm"> */</span>
<a id="__codelineno-50-86" name="__codelineno-50-86"></a><span class="c1">// 测试代理功能</span>
<a id="__codelineno-50-87" name="__codelineno-50-87"></a><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-50-88" name="__codelineno-50-88"></a><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="p">{</span>
<a id="__codelineno-50-89" name="__codelineno-50-89"></a><span class="w">        </span><span class="c1">// 1、创建用户业务对象。</span>
<a id="__codelineno-50-90" name="__codelineno-50-90"></a><span class="w">        </span><span class="n">UserService</span><span class="w"> </span><span class="n">userService</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ProxyUtil</span><span class="p">.</span><span class="na">createProxy</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">UserServiceImpl</span><span class="p">());</span>
<a id="__codelineno-50-91" name="__codelineno-50-91"></a>
<a id="__codelineno-50-92" name="__codelineno-50-92"></a><span class="w">        </span><span class="c1">// 2、调用用户业务的功能。</span>
<a id="__codelineno-50-93" name="__codelineno-50-93"></a><span class="w">        </span><span class="n">userService</span><span class="p">.</span><span class="na">login</span><span class="p">(</span><span class="s">&quot;admin&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;123456&quot;</span><span class="p">);</span>
<a id="__codelineno-50-94" name="__codelineno-50-94"></a>
<a id="__codelineno-50-95" name="__codelineno-50-95"></a><span class="w">        </span><span class="n">userService</span><span class="p">.</span><span class="na">deleteUsers</span><span class="p">();</span>
<a id="__codelineno-50-96" name="__codelineno-50-96"></a>
<a id="__codelineno-50-97" name="__codelineno-50-97"></a><span class="w">        </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userService</span><span class="p">.</span><span class="na">selectUsers</span><span class="p">();</span>
<a id="__codelineno-50-98" name="__codelineno-50-98"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;查询到的用户是：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">toString</span><span class="p">(</span><span class="n">names</span><span class="p">));</span>
<a id="__codelineno-50-99" name="__codelineno-50-99"></a>
<a id="__codelineno-50-100" name="__codelineno-50-100"></a><span class="w">        </span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">names2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">userService</span><span class="p">.</span><span class="na">selectUsers2</span><span class="p">();</span>
<a id="__codelineno-50-101" name="__codelineno-50-101"></a><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;查询到的用户是：&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">Arrays</span><span class="p">.</span><span class="na">toString</span><span class="p">(</span><span class="n">names2</span><span class="p">));</span>
<a id="__codelineno-50-102" name="__codelineno-50-102"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-50-103" name="__codelineno-50-103"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Render date of last update -->


<!-- Render date of creation -->


<!-- ---------------------------------------------------------------------- -->

<!-- Render authors -->


<!-- ---------------------------------------------------------------------- -->

<!-- Render committers from GitHub -->


<!-- Render committers from GitLab -->


<!-- Render committers -->


<!-- ---------------------------------------------------------------------- -->

<!-- Determine date of last update -->


<!-- Source file information -->

<!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Determine feedback configuration -->

  


<!-- Determine whether to show feedback -->


<!-- Was this page helpful? -->

  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        此页面有帮助吗？
      </legend>
      <div class="md-feedback__inner">

        <!-- Feedback ratings -->
        <div class="md-feedback__list">
          
            <button
              class="md-feedback__icon md-icon"
              type="submit"
              title="This page was helpful"
              data-md-value="1"
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"/></svg>
            </button>
          
            <button
              class="md-feedback__icon md-icon"
              type="submit"
              title="This page could be improved"
              data-md-value="0"
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"/></svg>
            </button>
          
        </div>

        <!-- Feedback rating notes (shown after submission) -->
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              

              <!-- Determine title -->
              
                
              

              <!-- Replace {url} and {title} placeholders in note -->
              谢谢你的反馈！
            </div>
          
            <div data-md-value="0" hidden>
              

              <!-- Determine title -->
              
                
              

              <!-- Replace {url} and {title} placeholders in note -->
              Thanks for your feedback! Help us improve this page by using our <a href="https://marketingplatform.google.com/about/analytics/" target="_blank" rel="noopener">feedback form</a>.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>

<!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Comment system -->





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <style>
  .md-footer {
      background-color: #f0f0f0;
  }
</style>


<!-- Footer -->
<footer class="md-footer">

  <!-- Link to previous and/or next page -->
  
    
      
      <nav
        class="md-footer__inner md-grid"
        aria-label="页脚"
        
      >

        <!-- Link to previous page -->
        
          
          <a
            href="../%E5%B8%B8%E7%94%A8API/"
            class="md-footer__link md-footer__link--prev"
            aria-label="上一页: Java集合框架与常用API"
          >
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                Java集合框架与常用API
              </div>
            </div>
            
          </a>
        

        <!-- Link to next page -->
        
          
          <a
            href="../LeetCode/%E4%BA%A4%E6%98%93%E9%80%86%E5%BA%8F%E5%AF%B9%E7%9A%84%E6%80%BB%E6%95%B0/"
            class="md-footer__link md-footer__link--next"
            aria-label="下一页: 交易逆序对的总数"
          >
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                交易逆序对的总数
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; gzh
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
   
      <font color="#B9B9B9">
      <div class="footer-visit-count" style="display: flex; justify-content: center; align-items: center;color: #000;">
        本站访问量：<script async src="//finicounter.eu.org/finicounter.js"></script>
        <span id="finicount_views"></span>    &nbsp;|&nbsp;
        <footer>
          <a href="https://icp.gov.moe/?keyword=20230640" target="_blank">萌ICP备20230640号</a>
        </footer>
      </div>
      </font>

        <style>
          .footer-visit-count {
              height: fit-content;
              min-height: 55px; /* 根据实际情况调整此高度 */
              color: #000;
          }
          </style>
        
          <div class="md-social">
  
    
    
    
    
    <a href="https://cdn.jsdelivr.net/gh/Gongzihang6/Pictures@main/Medias/%E6%88%91%E7%9A%84%E5%BE%AE%E4%BF%A1%E4%BA%8C%E7%BB%B4%E7%A0%81.png" target="_blank" rel="noopener" title="Wechat" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M385.2 167.6c6.4 0 12.6.3 18.8 1.1C387.4 90.3 303.3 32 207.7 32 100.5 32 13 104.8 13 197.4c0 53.4 29.3 97.5 77.9 131.6l-19.3 58.6 68-34.1c24.4 4.8 43.8 9.7 68.2 9.7 6.2 0 12.1-.3 18.3-.8-4-12.9-6.2-26.6-6.2-40.8-.1-84.9 72.9-154 165.3-154m-104.5-52.9c14.5 0 24.2 9.7 24.2 24.4 0 14.5-9.7 24.2-24.2 24.2-14.8 0-29.3-9.7-29.3-24.2.1-14.7 14.6-24.4 29.3-24.4m-136.4 48.6c-14.5 0-29.3-9.7-29.3-24.2 0-14.8 14.8-24.4 29.3-24.4 14.8 0 24.4 9.7 24.4 24.4 0 14.6-9.6 24.2-24.4 24.2M563 319.4c0-77.9-77.9-141.3-165.4-141.3-92.7 0-165.4 63.4-165.4 141.3S305 460.7 397.6 460.7c19.3 0 38.9-5.1 58.6-9.9l53.4 29.3-14.8-48.6C534 402.1 563 363.2 563 319.4m-219.1-24.5c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.8 0 24.4 9.7 24.4 19.3 0 10-9.7 19.6-24.4 19.6m107.1 0c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.5 0 24.4 9.7 24.4 19.3.1 10-9.9 19.6-24.4 19.6"/></svg>
    </a>
  
    
    
    
    
    <a href="https://t.me/gongzihang" target="_blank" rel="noopener" title="telegram" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8m114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.45 10.45 0 0 1 3.53 6.716 43.8 43.8 0 0 1 .417 9.769"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/ZihangGong28792" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/Gongzihang6" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:<zihanggong24@gmail.com>" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M64 112c-8.8 0-16 7.2-16 16v22.1l172.5 141.6c20.7 17 50.4 17 71.1 0L464 150.1V128c0-8.8-7.2-16-16-16zM48 212.2V384c0 8.8 7.2 16 16 16h384c8.8 0 16-7.2 16-16V212.2L322 328.8c-38.4 31.5-93.7 31.5-132 0zM0 128c0-35.3 28.7-64 64-64h384c35.3 0 64 28.7 64 64v256c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://space.bilibili.com/688234000/lists" target="_blank" rel="noopener" title="space.bilibili.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1-17.2 17-39.1 25.9-65.5 26.7H92.02c-26.45-.8-48.21-9.8-65.28-27.2C9.682 419.4.767 396.5 0 368.2V169.8c.767-26 9.682-47.6 26.74-65.7C43.81 87.75 65.57 78.77 92.02 78h29.38L96.05 52.19c-5.75-5.73-8.63-13-8.63-21.79 0-8.8 2.88-16.06 8.63-21.797C101.8 2.868 109.1 0 117.9 0q13.2 0 21.9 8.603L213.1 78h88l74.5-69.397C381.7 2.868 389.2 0 398 0q13.2 0 21.9 8.603c5.7 5.737 8.6 12.997 8.6 21.797 0 8.79-2.9 16.06-8.6 21.79L394.6 78h29.3c26.4.77 48 9.75 64.7 26.1m-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5-5.2-6.1-14-9.4-22.7-9.8H96.05c-9.59.4-17.45 3.7-23.58 9.8-6.14 6.1-9.4 13.9-9.78 23.5v194.4c0 9.2 3.26 17 9.78 23.5s14.38 9.8 23.58 9.8H416.4c9.2 0 17-3.3 23.3-9.8s9.7-14.3 10.1-23.5zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.2 6.3-14 9.5-23.6 9.5s-17.5-3.2-23.6-9.5-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2s13.2-9.6 23.3-10c9.2.4 17 3.7 23.3 10m191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2s-14 9.5-23.6 9.5-17.4-3.2-23.6-9.5c-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2s14.1-9.6 23.3-10c9.2.4 17 3.7 23.3 10"/></svg>
    </a>
  
</div>
        
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  


<h4>Cookie consent</h4>
<p>我们也使用cookies来识别您的重复访问和偏好来衡量我们文档的有效性以及用户是否找到他们要找的东西。 如果你同意,你可以帮助我们让我们的网站更好</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="analytics" checked>
      <span class="task-list-indicator"></span>
      Google Analytics
    </label>
  </li>

      
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="github" checked>
      <span class="task-list-indicator"></span>
      GitHub
    </label>
  </li>

      
    
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">同意</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">管理设定</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["announce.dismiss", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "search.share", "navigation.expand", "navigation.indexes", "content.tabs.link", "content.tooltips", "content.code.copy", "content.code.select", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="../../../javascripts/extra.js"></script>
      
        <script src="../../../javascripts/config_mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../../javascripts/简历.js"></script>
      
    
  </body>
</html>