
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="记录、分享">
      
      
        <meta name="author" content="gzh">
      
      
        <link rel="canonical" href="https://gongzihang6.github.io/blog/Computer%20Science/Algorithm/docs/dp/opt/slope-trick/">
      
      
      
      
      <link rel="icon" href="https://s2.loli.net/2025/02/12/aE5ovtzAlNTd9Uh.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Slope trick - Blog of GZH</title>
      
    
    
      <link rel="stylesheet" href="../../../../../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../../../../../../stylesheets/extra2.css">
    
      <link rel="stylesheet" href="../../../../../../../stylesheets/简历.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Wcowin/Wcowin.github.io@main/docs/stylesheets/link.css">
    
      <link rel="stylesheet" href="../../../../../../../stylesheets/customize.css">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600&display=swap">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Wcowin/Wcowin.github.io@main/docs/stylesheets/ziti.css">
    
    <script>__md_scope=new URL("../../../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-40HC6RYSR1"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-40HC6RYSR1",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-40HC6RYSR1",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../../../../../.." title="Blog of GZH" class="md-header__button md-logo" aria-label="Blog of GZH" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 89 89">
  <path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z" />
  <path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5" />
  <path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z" />
  <path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25" />
</svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Blog of GZH
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Slope trick
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="关闭自动模式"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="关闭自动模式" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1M8 13h8v-2H8zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4a5 5 0 0 0 5-5 5 5 0 0 0-5-5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="切换至夜间模式"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="切换至夜间模式" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="切换至日间模式"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="切换至日间模式" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="选择当前语言">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M0 128c0-35.3 28.7-64 64-64h512c35.3 0 64 28.7 64 64v256c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64zm320 0v256h256V128zm-141.7 47.9c-3.2-7.2-10.4-11.9-18.3-11.9s-15.1 4.7-18.3 11.9l-64 144c-4.5 10.1.1 21.9 10.2 26.4s21.9-.1 26.4-10.2l8.9-20.1h73.6l8.9 20.1c4.5 10.1 16.3 14.6 26.4 10.2s14.6-16.3 10.2-26.4zM160 233.2l19 42.8h-38zM448 164c11 0 20 9 20 20v4h60c11 0 20 9 20 20s-9 20-20 20h-2l-1.6 4.5c-8.9 24.4-22.4 46.6-39.6 65.4.9.6 1.8 1.1 2.7 1.6l18.9 11.3c9.5 5.7 12.5 18 6.9 27.4s-18 12.5-27.4 6.9L467 333.8c-4.5-2.7-8.8-5.5-13.1-8.5-10.6 7.5-21.9 14-34 19.4l-3.6 1.6c-10.1 4.5-21.9-.1-26.4-10.2s.1-21.9 10.2-26.4l3.6-1.6c6.4-2.9 12.6-6.1 18.5-9.8L410 286.1c-7.8-7.8-7.8-20.5 0-28.3s20.5-7.8 28.3 0l14.6 14.6.5.5c12.4-13.1 22.5-28.3 29.8-45l-35.2.1h-72c-11 0-20-9-20-20s9-20 20-20h52v-4c0-11 9-20 20-20"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="/" hreflang="zh" class="md-select__link">
              简体中文
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/Mkdocs-Wcowin/en/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/Mkdocs-Wcowin/ZH-TW/" hreflang="zh-TW" class="md-select__link">
              China(TW)
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256l137.3-137.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Gongzihang6" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Gongzihang6
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../../.." class="md-tabs__link">
        
  
  
    
  
  主页

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../java%E5%9F%BA%E7%A1%80/" class="md-tabs__link">
          
  
  
    
  
  Computer Science

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../../MachineLearning/K%E8%BF%91%E9%82%BB%E5%AD%A6%E4%B9%A0%E4%B8%8E%E9%99%8D%E7%BB%B4/" class="md-tabs__link">
          
  
  
    
  
  MachineLearning

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../../%E6%AF%8F%E6%97%A5%E8%AF%97%E8%AF%8D/%E8%99%9E%E7%BE%8E%E4%BA%BA%C2%B7%E7%8E%89%E9%98%91%E5%B9%B2%E5%A4%96%E6%B8%85%E6%B1%9F%E6%B5%A6/" class="md-tabs__link">
          
  
  
    
  
  每日诗词

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../../%E9%95%BF%E6%9C%9F%E4%B8%BB%E4%B9%89/fitness/" class="md-tabs__link">
          
  
  
    
  
  长期主义

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../../../about/geren/" class="md-tabs__link">
          
  
  
    
  
  关于

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../../../.." title="Blog of GZH" class="md-nav__button md-logo" aria-label="Blog of GZH" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 89 89">
  <path d="M3.136,17.387l0,42.932l42.932,21.467l-42.932,-64.399Z" />
  <path d="M21.91,8l42.933,64.398l-18.775,9.388l-42.932,-64.399l18.774,-9.387Z" style="fill-opacity: 0.5" />
  <path d="M67.535,17.387l-27.262,18.156l21.878,32.818l5.384,2.691l0,-53.665Z" />
  <path d="M67.535,17.387l0,53.666l18.774,-9.388l0,-53.665l-18.774,9.387Z" style="fill-opacity: 0.25" />
</svg>

    </a>
    Blog of GZH
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Gongzihang6" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    Gongzihang6
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    主页
    
  </span>
  
    
  
  
    <span class="md-status md-status--new"></span>
  

  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Computer Science
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Computer Science
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Java
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Java
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../java%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Java面向对象基础
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../%E5%B8%B8%E7%94%A8API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Java集合框架与常用API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../java%E6%8F%90%E9%AB%98/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Java高级技术
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Algorithm
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Algorithm
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%B9%B6%E6%9F%A5%E9%9B%86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    并查集
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    LeetCode热题100
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            LeetCode热题100
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode%E7%83%AD%E9%A2%98100/%E5%AD%97%E6%AF%8D%E5%BC%82%E4%BD%8D%E8%AF%8D%E5%88%86%E7%BB%84/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    字母异位词分组
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    LeetCode
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            LeetCode
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/%E4%BA%A4%E6%98%93%E9%80%86%E5%BA%8F%E5%AF%B9%E7%9A%84%E6%80%BB%E6%95%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    交易逆序对的总数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/%E5%8D%95%E8%AF%8D%E6%8E%A5%E9%BE%99/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    单词接龙
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/%E5%B2%9B%E5%B1%BF%E6%95%B0%E9%87%8F/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    岛屿数量
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/%E5%88%86%E8%80%83%E5%9C%BA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    分考场
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/%E6%8B%89%E9%A9%AC%E8%BD%A6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    拉马车
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/%E5%88%86%E5%B7%A7%E5%85%8B%E5%8A%9B/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    分巧克力
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/k%E5%80%8D%E5%8C%BA%E9%97%B4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    K倍区间
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    编辑距离
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/%E6%8E%A5%E9%9B%A8%E6%B0%B4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    接雨水
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/%E7%BB%84%E5%90%88%E6%80%BB%E5%92%8C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    组合总和
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/%E5%85%A8%E6%8E%92%E5%88%97/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    全排列
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/%E4%B9%98%E7%A7%AF%E6%9C%80%E5%A4%A7%E5%AD%90%E6%95%B0%E7%BB%84/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    乘积最大子数组
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5. 最长回文子串
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/%E5%89%8DK%E4%B8%AA%E9%AB%98%E9%A2%91%E5%85%83%E7%B4%A0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    前K个高频元素
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/%E6%9C%80%E5%B0%8F%E6%A0%88/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    最小栈
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/Pow%28x%2Cn%29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pow(x,n)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/%E7%BD%91%E7%BB%9C%E5%BB%B6%E8%BF%9F%E6%97%B6%E9%97%B4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    网络延迟时间
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/%E8%AE%A1%E7%AE%97%E8%B4%A8%E6%95%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    计算质数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/%E5%AF%B9%E8%A7%92%E7%BA%BF%E4%B8%8A%E7%9A%84%E8%B4%A8%E6%95%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    对角线上的质数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/%E9%9B%B6%E9%92%B1%E5%85%91%E6%8D%A2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    零钱兑换
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/01%E7%9F%A9%E9%98%B5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    01矩阵
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    二分查找
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/%E6%8B%AC%E5%8F%B7%E5%8C%B9%E9%85%8D/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    括号匹配
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/300%E6%9C%80%E9%95%BF%E9%80%92%E5%A2%9E%E5%AD%90%E5%BA%8F%E5%88%97/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    300最长递增子序列
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/115%E4%B8%8D%E5%90%8C%E7%9A%84%E5%AD%90%E5%BA%8F%E5%88%97/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    115不同的子序列
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/712%E4%B8%A4%E4%B8%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%9C%80%E5%B0%8FASCII%E5%88%A0%E9%99%A4%E5%92%8C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    712两个字符串的最小ASCII删除和
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/516%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E5%BA%8F%E5%88%97/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    516最长回文子序列
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/139%E5%8D%95%E8%AF%8D%E6%8B%86%E5%88%86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    139单词拆分
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/221%E6%9C%80%E5%A4%A7%E6%AD%A3%E6%96%B9%E5%BD%A2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    221最大正方形
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/2845%E7%BB%9F%E8%AE%A1%E8%B6%A3%E5%91%B3%E5%AD%90%E6%95%B0%E7%BB%84%E7%9A%84%E6%95%B0%E7%9B%AE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2845统计趣味子数组的数目
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/2799%E7%BB%9F%E8%AE%A1%E5%AE%8C%E5%85%A8%E5%AD%90%E6%95%B0%E7%BB%84%E7%9A%84%E6%95%B0%E7%9B%AE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2799统计完全子数组的数目
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/1399%E7%BB%9F%E8%AE%A1%E6%9C%80%E5%A4%A7%E7%BB%84%E7%9A%84%E6%95%B0%E7%9B%AE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1399统计最大组的数目
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/2338%E7%BB%9F%E8%AE%A1%E7%90%86%E6%83%B3%E6%95%B0%E7%BB%84%E7%9A%84%E6%95%B0%E7%9B%AE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2338统计理想数组的数目
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/2179%E7%BB%9F%E8%AE%A1%E6%95%B0%E7%BB%84%E4%B8%AD%E5%A5%BD%E4%B8%89%E5%85%83%E7%BB%84%E6%95%B0%E7%9B%AE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2179统计数组中好三元组数目
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/2537%E7%BB%9F%E8%AE%A1%E5%A5%BD%E5%AD%90%E6%95%B0%E7%BB%84%E7%9A%84%E6%95%B0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2537统计好子数组的数
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/2140%E8%A7%A3%E5%86%B3%E6%99%BA%E5%8A%9B%E9%97%AE%E9%A2%98/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2140解决智力问题
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../LeetCode/2278%E5%AD%97%E6%AF%8D%E5%9C%A8%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E7%9A%84%E7%99%BE%E5%88%86%E6%AF%94/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2278字母在字符串中的百分比
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    MachineLearning
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            MachineLearning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../MachineLearning/K%E8%BF%91%E9%82%BB%E5%AD%A6%E4%B9%A0%E4%B8%8E%E9%99%8D%E7%BB%B4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    K近邻学习与降维
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../MachineLearning/%E6%A8%A1%E5%9E%8B%E8%AF%84%E4%BC%B0%E4%B8%8E%E5%A4%9A%E5%88%86%E7%B1%BB/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    模型评估与多分类
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../MachineLearning/%E5%85%AC%E5%BC%8F%E6%B5%8B%E8%AF%95/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    公式测试
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../MachineLearning/%E7%BB%8F%E5%85%B8%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    经典卷积神经网络
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../MachineLearning/%E7%90%86%E8%A7%A3YOLO%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    理解YOLO网络结构
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    每日诗词
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            每日诗词
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../%E6%AF%8F%E6%97%A5%E8%AF%97%E8%AF%8D/%E8%99%9E%E7%BE%8E%E4%BA%BA%C2%B7%E7%8E%89%E9%98%91%E5%B9%B2%E5%A4%96%E6%B8%85%E6%B1%9F%E6%B5%A6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    虞美人·玉阑干外清江浦
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../%E6%AF%8F%E6%97%A5%E8%AF%97%E8%AF%8D/%E8%8F%A9%E8%90%A8%E8%9B%AE%C2%B7%E5%9B%9E%E6%96%87%E5%A4%8F%E9%97%BA%E6%80%A8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    菩萨蛮·回文夏闺怨
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../%E6%AF%8F%E6%97%A5%E8%AF%97%E8%AF%8D/%E6%B8%85%E5%B9%B3%E4%B9%90%C2%B7%E5%85%AD%E7%9B%98%E5%B1%B1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    清平乐·六盘山
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../%E6%AF%8F%E6%97%A5%E8%AF%97%E8%AF%8D/%E6%B4%9E%E4%BB%99%E6%AD%8C%C2%B7%E5%92%8F%E6%9F%B3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    洞仙歌·咏柳
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../%E6%AF%8F%E6%97%A5%E8%AF%97%E8%AF%8D/%E7%A7%8B%E5%85%B4%E5%85%AB%E9%A6%96%C2%B7%E5%85%B6%E4%B8%80/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    秋兴八首·其一
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../%E6%AF%8F%E6%97%A5%E8%AF%97%E8%AF%8D/%E4%B8%8E%E5%8F%B2%E9%83%8E%E4%B8%AD%E9%92%A6%E5%90%AC%E9%BB%84%E9%B9%A4%E6%A5%BC%E4%B8%8A%E5%90%B9%E7%AC%9B/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    与史郎中钦听黄鹤楼上吹笛
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../%E6%AF%8F%E6%97%A5%E8%AF%97%E8%AF%8D/%E5%A4%8F%E6%97%A5%E5%8D%97%E4%BA%AD%E6%80%80%E8%BE%9B%E5%A4%A7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    夏日南亭怀辛大
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../%E6%AF%8F%E6%97%A5%E8%AF%97%E8%AF%8D/%E8%A1%8C%E9%A6%99%E5%AD%90%C2%B7%E7%A7%8B%E4%B8%8E/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    行香子·秋与
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../%E6%AF%8F%E6%97%A5%E8%AF%97%E8%AF%8D/%E8%87%AA%E9%A2%98%E9%87%91%E5%B1%B1%E7%94%BB%E5%83%8F/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    自题金山画像
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    长期主义
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            长期主义
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../%E9%95%BF%E6%9C%9F%E4%B8%BB%E4%B9%89/fitness/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fitness
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    关于
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            关于
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../../about/geren/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    作者个人简介
    
  </span>
  
    
  
  
    <span class="md-status md-status--new"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../../about/%E7%AE%80%E5%8E%86/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    个人简历
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../../about/zcw/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    支持作者
    
  </span>
  
    
  
  
    <span class="md-status md-status--new"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../../../about/test/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    功能测试
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      引入
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      凸函数
    </span>
  </a>
  
    <nav class="md-nav" aria-label="凸函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      实轴上的凸函数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      离散点集上的凸函数
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      凸函数的两种刻画
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      凸函数的变换
    </span>
  </a>
  
    <nav class="md-nav" aria-label="凸函数的变换">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      非负线性组合
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minkowski" class="md-nav__link">
    <span class="md-ellipsis">
      卷积下确界（Minkowski 和）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      最值操作
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      维护拐点
    </span>
  </a>
  
    <nav class="md-nav" aria-label="维护拐点">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      例题：最小成本递增序列
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      例题：转移带限制的情形
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      维护斜率
    </span>
  </a>
  
    <nav class="md-nav" aria-label="维护斜率">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      例题：股票交易问题
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      例题：搬运土石问题
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      习题
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      参考文献与注释
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Slope trick</h1>

<div class="admonition info">
<p class="admonition-title">💾 AI智能摘要 (DeepSeek)</p>
<p>Slope Trick是一种优化凸函数动态规划的技术，通过维护函数的差分（斜率）而非函数本身来简化状态转移。该方法适用于价值函数在固定维度下为凸函数的情形，利用斜率序列变化较少的特点提升效率。具体实现可基于拐点或斜率序列的维护，核心思想是通过凸函数的性质（如非递减差分）来优化转移过程。该技术在处理特定DP问题时能显著降低计算复杂度。</p>
</div>
<div class="admonition info">
<p class="admonition-title">📖 阅读信息</p>
<p>阅读时间：<strong>6</strong> 分钟 | 中文字符：<strong>2229</strong> | 有效代码行数：<strong>4</strong></p>
</div>
<h2 id="_1">引入<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>对于一类二维 DP 问题，如果它的价值函数 <span class="arithmatex">\(f(i,x)\)</span> 对于每个固定的 <span class="arithmatex">\(i\)</span> 都是 <span class="arithmatex">\(x\)</span> 的凸函数，那么将函数 <span class="arithmatex">\(f(i,\cdot)\)</span> 整体视为 <span class="arithmatex">\(i\)</span> 处的状态，并维护它的差分（或斜率）</p>
<div class="arithmatex">\[
\Delta f(i,x) = f(i,x+1)-f(i,x)
\]</div>
<p>而非函数本身，往往能够起到优化转移的效果。这种优化 DP 的思想，就称为 Slope Trick。</p>
<details class="info" open="open">
<summary>「斜率」</summary>
<p>因为大多数题目中涉及的函数都只在整点处取值，所以称它为差分和斜率没有本质区别，本文按照 Slope Trick 这个名词统一称呼它为斜率。</p>
</details>
<p>具体题目中，斜率的维护方式可能各不相同。如果斜率的取值范围较窄，维护斜率变化的点（即拐点）更为方便；而如果函数定义域较窄，维护斜率序列本身可能更为方便。更复杂的情形，可能需要同时维护每段斜率的大小和该段的长度。无论具体维护方式是什么，这类问题的本质都是利用状态转移中斜率序列变化较少这一点简化转移。因此，它们都可以称作 Slope Trick。</p>
<h2 id="_2">凸函数<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>在讨论具体的题目之前，有必要首先了解一下凸函数的基本性质，以及在对凸函数进行各种变换时，它的斜率会如何变化。</p>
<h3 id="_3">实轴上的凸函数<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>凸函数较为一般的定义是在 <span class="arithmatex">\(\mathbf R\)</span> 上给出的。</p>
<p><img alt="" src="../../images/slope-trick/epigraph-convex-def.svg" /></p>
<details class="abstract" open="open">
<summary><span class="arithmatex">\(\mathbf R\)</span> 上的凸函数 </summary>
<p>如果函数 <span class="arithmatex">\(f:\mathbf R\rightarrow\mathbf R\cup\{\pm\infty\}\)</span> 对于所有 <span class="arithmatex">\(x,y\in\mathbf R\)</span> 和 <span class="arithmatex">\(\alpha\in(0,1)\)</span> 都满足</p>
<div class="arithmatex">\[
f(\alpha x+(1-\alpha)y) \le \alpha f(x)+(1-\alpha)f(y),
\]</div>
<p>就称函数 <span class="arithmatex">\(f\)</span> 为 <strong>凸函数</strong>（convex function），其中 <span class="arithmatex">\(\pm\infty\)</span> 的运算法则规定为 <span class="arithmatex">\(\pm\infty\)</span> 乘以任何正实数或是加上任何实数都等于其自身，且对于任何实数 <span class="arithmatex">\(x\in\mathbf R\)</span> 都有 <span class="arithmatex">\(-\infty&lt;x&lt;+\infty\)</span>。</p>
</details>
<p>当然，如果不等号换作 <span class="arithmatex">\(\ge\)</span>，就相应地称它为凹函数<sup id="fnref:convex-def"><a class="footnote-ref" href="#fn:convex-def">1</a></sup>。因为对于凹函数 <span class="arithmatex">\(f\)</span>，总有 <span class="arithmatex">\(-f\)</span> 为凸函数，所以本节只考虑凸函数。</p>
<details class="info" open="open">
<summary>本文只考虑正常凸函数</summary>
<p>为了避免讨论 <span class="arithmatex">\(\infty-\infty\)</span> 的取值和额外的复杂分析，本文在讨论凸函数相关概念时，总是默认函数不会取到 <span class="arithmatex">\(-\infty\)</span>，且不总是 <span class="arithmatex">\(+\infty\)</span>。这样的凸函数称为 <strong>正常凸函数</strong>（proper convex function）。这对于理解算法竞赛涉及的内容已经足够。</p>
</details>
<p>当然，函数 <span class="arithmatex">\(f\)</span> 往往并不会对所有实数都有定义。如果函数 <span class="arithmatex">\(f\)</span> 的定义域仅是 <span class="arithmatex">\(\mathbf R\)</span> 的子集，那么可以将它拓展为 <span class="arithmatex">\(\mathbf R\)</span> 上的函数：</p>
<div class="arithmatex">\[
\tilde f(x) = \begin{cases} f(x), &amp; x\in\operatorname{dom}f,\\ +\infty,&amp; x\notin\operatorname{dom}f.\end{cases}
\]</div>
<p>此时，称 <span class="arithmatex">\(f\)</span> 是凸函数，当且仅当相应的 <span class="arithmatex">\(\tilde f\)</span> 满足上述凸函数的定义。因此，如果没有特别指出，本文提到的凸函数的定义域均是实数集 <span class="arithmatex">\(\mathbf R\)</span>。显然，凸函数 <span class="arithmatex">\(f\)</span> 只能在一个区间（即 <span class="arithmatex">\(\mathbf R\)</span> 的凸子集）上取得有限值。</p>
<details class="example" open="open">
<summary>简单例子</summary>
<p>常见的凸函数的例子包括：</p>
<ol>
<li>常数函数：<span class="arithmatex">\(f(x)=c\)</span>，其中 <span class="arithmatex">\(c\in\mathbf R\)</span>；</li>
<li>一次函数：<span class="arithmatex">\(f(x)=kx+b\)</span>，其中 <span class="arithmatex">\(k,b\in\mathbf R\)</span> 且 <span class="arithmatex">\(k\neq 0\)</span>；</li>
<li>绝对值函数：<span class="arithmatex">\(f(x)=|x-a|\)</span>，其中 <span class="arithmatex">\(a\in\mathbf R\)</span>；</li>
<li>任何凸函数限制在某个区间上的结果，例如 <span class="arithmatex">\(0_{[a,b]}(x)\)</span>（在凸分析的语境下也称作 <span class="arithmatex">\([a,b]\)</span> 的指示函数）。</li>
</ol>
</details>
<p>当然，可以通过下文提到的保持凸性的变换组合出更为复杂的凸函数。</p>
<h3 id="_4">离散点集上的凸函数<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>算法竞赛中，很多函数仅在部分整数值处有定义。它们在一般情况下并不是（上文定义的）凸函数，因为它们的定义域不再是凸集。为了处理这种情形，需要单独定义离散点集上的函数的凸性。简单来说，需要首先对函数做线性插值，将其定义域拓展到区间，再判断它的凸性。</p>
<p><img alt="" src="../../images/slope-trick/epigraph-convex-discrete.svg" /></p>
<details class="abstract" open="open">
<summary>离散点集上的凸函数</summary>
<p>设 <span class="arithmatex">\(S\subset\mathbf R\)</span> 为离散点集，即对任意闭区间 <span class="arithmatex">\([a,b]\)</span>，<span class="arithmatex">\(S\cap[a,b]\)</span> 都是有限集。对于函数 <span class="arithmatex">\(f:S\rightarrow\mathbf R\cup\{\pm\infty\}\)</span>，可以定义函数 <span class="arithmatex">\(\tilde f:\mathbf R\rightarrow\mathbf R\cup\{\pm\infty\}\)</span> 使得：</p>
<ul>
<li>当 <span class="arithmatex">\(x\in S\)</span> 时，<span class="arithmatex">\(\tilde f(x)=f(x)\)</span>，</li>
<li>
<p>当 <span class="arithmatex">\(x\in(\inf S,\sup S)\setminus S\)</span> 时，设 <span class="arithmatex">\(s_-=\max\{s\in S:s\le x\}\)</span>，<span class="arithmatex">\(s_+=\min\{s\in S:s\ge x\}\)</span>，则</p>
<div class="arithmatex">\[
\tilde f(x) = \dfrac{s_+-x}{s_+-s_-}f(s_-)+\dfrac{x-s_-}{s_+-s_-}f(s_+),
\]</div>
</li>
<li>
<p>当 <span class="arithmatex">\(x\notin[\inf S,\sup S]\)</span> 时，<span class="arithmatex">\(\tilde f(x)=+\infty\)</span>。</p>
</li>
</ul>
<p>那么，如果 <span class="arithmatex">\(\tilde f(x)\)</span> 是 <span class="arithmatex">\(\mathbf R\)</span> 上的凸函数，就称 <span class="arithmatex">\(f(x)\)</span> 是 <span class="arithmatex">\(S\)</span> 上的 <strong>凸函数</strong>。</p>
</details>
<p>因为 <span class="arithmatex">\(\mathbf R\)</span> 上的凸函数处理起来更为方便，所以本文在提及凸函数时，若非特别说明，指的都是 <span class="arithmatex">\(\mathbf R\)</span> 上的凸函数。如果本文中某个函数仅给出了部分整数处的取值，那么它在其他实数处的取值应由定义中的 <span class="arithmatex">\(\tilde f\)</span> 确定，也就相当于直接讨论对应的分段线性函数 <span class="arithmatex">\(\tilde f\)</span>。</p>
<p>整数集 <span class="arithmatex">\(\mathbf Z\)</span> 上的凸函数有一个更为直观的等价定义：</p>
<details class="note" open="open">
<summary><span class="arithmatex">\(\mathbf Z\)</span> 上的凸函数的等价定义 </summary>
<p>函数 <span class="arithmatex">\(f:\mathbf Z\rightarrow\mathbf R\cup\{\pm\infty\}\)</span> 是凸的，当且仅当</p>
<div class="arithmatex">\[
f(x)-f(x-1)\le f(x+1)-f(x)
\]</div>
<p>对于所有 <span class="arithmatex">\(x\in\mathbf Z\)</span> 都成立。</p>
</details>
<details class="note">
<summary>证明</summary>
<p>这个命题是凸函数的斜率刻画的简单推论。</p>
<p>如果 <span class="arithmatex">\(f\)</span> 是 <span class="arithmatex">\(\mathbf Z\)</span> 上的凸函数，那么根据斜率弱增，有</p>
<div class="arithmatex">\[
\Delta f(x-1,x)\le \Delta f(x-1,x+1) \le\Delta f(x,x+1).
\]</div>
<p>这就是上述条件。</p>
<p>反过来，如果上述条件成立，那么对于任何 <span class="arithmatex">\(x_1&lt;x_2\)</span>，都有</p>
<div class="arithmatex">\[
\Delta f(x_1,x_2) = \dfrac{1}{x_2-x_1}\sum_{i=x_1}^{x_2-1}\left(f(i)-f(i-1)\right).
\]</div>
<p>这相当于对所有满足 <span class="arithmatex">\(x_1\le i&lt;x_2\)</span> 的差分的算术平均值。如果 <span class="arithmatex">\(x_2\)</span> 增加一，就相当于插入一项更大的差分；如果 <span class="arithmatex">\(x_1\)</span> 增加一，就相当于移除一项最小的差分。这两个操作都会使得平均值上升。这就说明斜率 <span class="arithmatex">\(\Delta f(x_1,x_2)\)</span> 弱增，即 <span class="arithmatex">\(f\)</span> 是 <span class="arithmatex">\(\mathbf Z\)</span> 上的凸函数。</p>
</details>
<p>也就是说，只要斜率（差分）单调不减，这个序列就可以看作是 <span class="arithmatex">\(\mathbf Z\)</span> 上的凸函数。</p>
<h3 id="_5">凸函数的两种刻画<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>其实，用斜率刻画凸函数的方式也可以推广到一般情况。</p>
<details class="note" open="open">
<summary>凸函数的斜率刻画</summary>
<p>设 <span class="arithmatex">\(S\)</span> 为 <span class="arithmatex">\(\mathbf R\)</span> 或它的离散子集，则函数 <span class="arithmatex">\(f:S\rightarrow\mathbf R\cup\{\pm\infty\}\)</span> 为凸函数，当且仅当斜率</p>
<div class="arithmatex">\[
\Delta f(x_1,x_2) = \dfrac{f(x_2)-f(x_1)}{x_2-x_1}
\]</div>
<p>对于任何 <span class="arithmatex">\(x_1,x_2\in S\)</span> 且 <span class="arithmatex">\(x_1&lt;x_2\)</span> 都是 <span class="arithmatex">\(x_1\)</span> 和 <span class="arithmatex">\(x_2\)</span> 的弱增函数。</p>
</details>
<details class="note">
<summary>证明</summary>
<p>对于 <span class="arithmatex">\(\mathbf R\)</span> 上的函数 <span class="arithmatex">\(f(x)\)</span> 以及 <span class="arithmatex">\(x_1&lt;x_2\)</span>，对于 <span class="arithmatex">\(\alpha\in(0,1)\)</span>，令 <span class="arithmatex">\(x_3=\alpha x_1+(1-\alpha)x_2\)</span>，那么</p>
<div class="arithmatex">\[
\Delta f(x_1,x_3) \le \Delta f(x_1,x_2) \le \Delta f(x_3,x_2)
\]</div>
<p>就等价于</p>
<div class="arithmatex">\[
\dfrac{f(x_3)-f(x_1)}{1-\alpha} \le f(x_2)-f(x_1) \le \dfrac{f(x_2)-f(x_3)}{\alpha}.
\]</div>
<p>这两侧的不等式都等价于 <span class="arithmatex">\(f(x_3)\le\alpha f(x_1)+(1-\alpha)f(x_2)\)</span>，即函数 <span class="arithmatex">\(f(x)\)</span> 的凸性。</p>
<p>对于 <span class="arithmatex">\(\mathbf R\)</span> 的离散子集 <span class="arithmatex">\(S\)</span> 上的函数 <span class="arithmatex">\(f(x)\)</span>，斜率弱增这一条件的必要性可以由 <span class="arithmatex">\(\tilde f(x)\)</span> 的凸性推导出来。现在要证明它的充分性，为此只要证明 <span class="arithmatex">\(\Delta\tilde f(x_1,x_2)\)</span> 也是弱增的。设 <span class="arithmatex">\(S=\{s_i\}\)</span> 且 <span class="arithmatex">\(s_i\)</span> 关于 <span class="arithmatex">\(i\)</span> 严格递增，并设 <span class="arithmatex">\(s_{i_1}\le x_1\le s_{i_1+1}\)</span> 且 <span class="arithmatex">\(s_{i_2}\le x_2\le s_{i_2+1}\)</span>，自然有 <span class="arithmatex">\(i_1\le i_2\)</span>。令 <span class="arithmatex">\(\Delta_i=\Delta f(s_i,s_{i+1})\)</span>，那么，可以证明 <span class="arithmatex">\(\Delta_{i_1}\le\Delta\tilde f(x_1,x_2)\le\Delta_{i_2}\)</span>。</p>
<p>这分两种情形。如果 <span class="arithmatex">\(i_1=i_2\)</span>，那么 <span class="arithmatex">\(\Delta_{i_1}=\Delta\tilde f(x_1,x_2)=\Delta_{i_2}\)</span>，该不等式显然成立。否则，有</p>
<div class="arithmatex">\[
\Delta\tilde f(x_1,x_2) = \dfrac{1}{x_2-x_1}\left((s_{i_1+1}-x_1)\Delta_{i_1}+(x_2-s_{i_2})\Delta_{i_2}+\sum_{j=i_1+1}^{i_2-1}(s_{j+1}-s_j)\Delta_j\right).
\]</div>
<p>根据 <span class="arithmatex">\(S\)</span> 上的斜率递增可知，<span class="arithmatex">\(\Delta_i\)</span> 关于 <span class="arithmatex">\(i\)</span> 递增，所以，<span class="arithmatex">\(\Delta_{i_1}\le\Delta\tilde f(x_1,x_2)\le\Delta_{i_2}\)</span>。</p>
<p>利用这个结论，对于 <span class="arithmatex">\(x_1&lt;x_2\)</span> 和 <span class="arithmatex">\(\alpha\in(0,1)\)</span>，令 <span class="arithmatex">\(x_3=\alpha x_1+(1-\alpha)x_2\)</span>，并取 <span class="arithmatex">\(i_3\)</span> 使得 <span class="arithmatex">\(s_{i_3}\le x_3\le s_{i_3+1}\)</span> 成立，则有</p>
<div class="arithmatex">\[
\Delta\tilde f(x_1,x_3) \le \Delta_{i_3} \le \Delta\tilde f(x_3,x_2).
\]</div>
<p>代入 <span class="arithmatex">\(x_3\)</span> 的表达式，就得到 <span class="arithmatex">\(\tilde f(x)\)</span> 的凸性。</p>
</details>
<p>斜率单调不减，可以看作是凸函数的等价定义。正因为凸函数的斜率具有单调性，在维护斜率时，通常需要选择 <a href="../../../ds/heap/">堆（优先队列）</a> 或 <a href="../../../ds/bst/">平衡树</a> 等数据结构。</p>
<p>本文还会用到凸函数的另一种等价刻画。对于函数 <span class="arithmatex">\(f:\mathbf R\rightarrow\mathbf R\cup\{\pm\infty\}\)</span>，可以考察平面内函数图像上方的区域，即</p>
<div class="arithmatex">\[
\operatorname{epi} f = \{(x,y)\in\mathbf R^2 : y\ge f(x)\}.
\]</div>
<p>这个区域也称为函数 <span class="arithmatex">\(f\)</span> 的 <strong>上境图</strong>（epigraph）。函数的凸性，等价于它的上境图的凸性：</p>
<details class="note" open="open">
<summary>凸函数的上境图刻画</summary>
<p>函数 <span class="arithmatex">\(f:\mathbf R\rightarrow\mathbf R\cup\{\pm\infty\}\)</span> 是凸函数，当且仅当 <span class="arithmatex">\(\operatorname{epi}f\)</span> 是 <span class="arithmatex">\(\mathbf R^2\)</span> 内的凸集。</p>
</details>
<details class="note">
<summary>证明</summary>
<p>如果 <span class="arithmatex">\(f\)</span> 是凸函数，那么对于 <span class="arithmatex">\((x_1,y_1),(x_2,y_2)\in\operatorname{epi}f\)</span> 和任意 <span class="arithmatex">\(\alpha\in(0,1)\)</span>，有</p>
<div class="arithmatex">\[
\alpha y_1+(1-\alpha)y_2 \ge \alpha f(x_1)+(1-\alpha)f(x_2) \ge f(\alpha x_1+(1-\alpha) x_2).
\]</div>
<p>所以，<span class="arithmatex">\(\alpha(x_1,y_1)+(1-\alpha)(x_2,y_2)\in\operatorname{epi}f\)</span>。</p>
<p>反过来，如果 <span class="arithmatex">\(\operatorname{epi}f\)</span> 是凸集，那么对于任意 <span class="arithmatex">\(x_1&lt;x_2\)</span> 以及 <span class="arithmatex">\(\alpha\in(0,1)\)</span>，有</p>
<div class="arithmatex">\[
\alpha(x_1,f(x_1))+(1-\alpha)(x_2,f(x_2)) \in \operatorname{epi}f.
\]</div>
<p>这就等价于 <span class="arithmatex">\(\alpha f(x_1)+(1-\alpha)f(x_2)\ge f\left(\alpha x_1+(1-\alpha)x_2\right)\)</span>，即 <span class="arithmatex">\(f\)</span> 的凸性。</p>
</details>
<p>稍后会看到，利用上境图，可以将凸函数的卷积下确界与凸集的 Minkowski 和联系起来。</p>
<h2 id="_6">凸函数的变换<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h2>
<p>紧接着，本文介绍一些 Slope Trick 中经常遇见的保持凸性的变换。</p>
<h3 id="_7">非负线性组合<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>对于凸函数 <span class="arithmatex">\(f\)</span> 和 <span class="arithmatex">\(g\)</span> 以及非负实数 <span class="arithmatex">\(\alpha,\beta\ge0\)</span>，函数 <span class="arithmatex">\(\alpha f+\beta g\)</span> 也是凸函数。而且，</p>
<div class="arithmatex">\[
\Delta(\alpha f+\beta g) = \alpha\Delta f + \beta\Delta g.
\]</div>
<p>因此，如果维护了凸函数 <span class="arithmatex">\(f\)</span> 和 <span class="arithmatex">\(g\)</span> 的斜率，要得到它们的非负线性组合 <span class="arithmatex">\(\alpha f+\beta g\)</span> 的斜率，只需要逐段计算即可。</p>
<p>在维护斜率的问题中，往往其中一个函数的形式比较简单，此时可以通过懒标记的方式降低修改复杂度。在维护拐点的问题中，要计算 <span class="arithmatex">\(f+g\)</span> 的斜率拐点，只需要将 <span class="arithmatex">\(f\)</span> 和 <span class="arithmatex">\(g\)</span> 的斜率拐点合并即可。</p>
<h3 id="minkowski">卷积下确界（Minkowski 和）<a class="headerlink" href="#minkowski" title="Permanent link">&para;</a></h3>
<p>凸函数的另一种常见操作是卷积下确界。对于函数 <span class="arithmatex">\(f\)</span> 和 <span class="arithmatex">\(g\)</span>，函数</p>
<div class="arithmatex">\[
h(x) = \inf_{y\in\mathbf R}f(y)+g(x-y)
\]</div>
<p>称为 <span class="arithmatex">\(f\)</span> 和 <span class="arithmatex">\(g\)</span> 的 <strong>卷积下确界</strong><sup id="fnref:inf-conv"><a class="footnote-ref" href="#fn:inf-conv">2</a></sup>（infimal convolution）。如果 <span class="arithmatex">\(f\)</span> 和 <span class="arithmatex">\(g\)</span> 都是凸函数，它们的卷积下确界也是凸函数。</p>
<p><img alt="" src="../../images/slope-trick/epigraph-convex-minkowski.svg" /></p>
<details class="example">
<summary>对图示的解释</summary>
<p>如图所示，要求 <span class="arithmatex">\(f\)</span> 和 <span class="arithmatex">\(g\)</span> 的卷积下确界 <span class="arithmatex">\(h\)</span>，可以将 <span class="arithmatex">\(f\)</span> 的图像（第三个图的红色虚线）上的每一个点都视作原点，在相应的坐标系内画出 <span class="arithmatex">\(g\)</span> 的图像（第三个图中的蓝色虚线）。当坐标系原点沿着 <span class="arithmatex">\(f\)</span> 的图像移动时，<span class="arithmatex">\(g\)</span> 的图像（上境图）移动的轨迹轮廓（即下凸壳），就是 <span class="arithmatex">\(h\)</span> 的图像。可以看出，<span class="arithmatex">\(h\)</span> 的每一个斜率段，都要么是 <span class="arithmatex">\(f\)</span> 的斜率段，要么是 <span class="arithmatex">\(g\)</span> 的斜率段：只是重新按照斜率大小排序了。这个过程中，<span class="arithmatex">\(f\)</span> 和 <span class="arithmatex">\(g\)</span> 的角色可以互换，即让 <span class="arithmatex">\(f\)</span> 的图像沿着 <span class="arithmatex">\(g\)</span> 的图像移动，得到的结果是一致的。</p>
</details>
<p>几何直观上，<span class="arithmatex">\(\operatorname{epi}h\)</span> 就是 <span class="arithmatex">\(\operatorname{epi}f\)</span> 和 <span class="arithmatex">\(\operatorname{epi}g\)</span> 的 <a href="../../../geometry/convex-hull/#闵可夫斯基和">Minkowski 和</a>。如果 <span class="arithmatex">\(f\)</span> 和 <span class="arithmatex">\(g\)</span> 都是分段线性函数，那么 <span class="arithmatex">\(h\)</span> 同样是分段线性函数，且它的斜率段可以看作是 <span class="arithmatex">\(f\)</span> 和 <span class="arithmatex">\(g\)</span> 的斜率段合并（再排序）的结果。</p>
<details class="note">
<summary>证明</summary>
<p>设 <span class="arithmatex">\(f,g\)</span> 都是凸函数，<span class="arithmatex">\(h\)</span> 是它们的卷积下确界。设 <span class="arithmatex">\(x_1&lt;x_2\)</span>，且 <span class="arithmatex">\(\alpha\in(0,1)\)</span>。根据卷积下确界的定义，对任意 <span class="arithmatex">\(\varepsilon&gt;0\)</span>，存在 <span class="arithmatex">\(y_i,z_i\in\mathbf R\)</span> 使得 <span class="arithmatex">\(y_i+z_i=x_i\)</span> 且</p>
<div class="arithmatex">\[
h(x_i) + \varepsilon &gt; f(y_i) + g(z_i).
\]</div>
<p>故而，结合 <span class="arithmatex">\(f,g\)</span> 的凸性及 <span class="arithmatex">\(h\)</span> 的定义，有</p>
<div class="arithmatex">\[
\begin{aligned}
\alpha h(x_1)+(1-\alpha)h(x_2) + \varepsilon 
&amp;&gt; \alpha f(y_1) + (1-\alpha) f(y_2) + \alpha g(z_1) + (1-\alpha) g(z_2)\\
&amp;\ge f\left(\alpha y_1+(1-\alpha)y_2\right) + g\left(\alpha z_1+(1-\alpha)z_2\right)\\
&amp;\ge h(\alpha x_1+(1-\alpha)x_2).
\end{aligned}
\]</div>
<p>因为 <span class="arithmatex">\(\varepsilon&gt;0\)</span> 是任意选取的，所以</p>
<div class="arithmatex">\[
\alpha h(x_1)+(1-\alpha)h(x_2) \ge h(\alpha x_1+(1-\alpha)x_2).
\]</div>
<p>这就得到 <span class="arithmatex">\(h\)</span> 的凸性。</p>
<p>然后，对于几何直观，严格地说，只能证明如下结论：</p>
<div class="arithmatex">\[
\operatorname{epi} f + \operatorname{epi} g\subseteq \operatorname{epi}h \subseteq \operatorname{cl}(\operatorname{epi} f + \operatorname{epi} g).
\]</div>
<p>其中，<span class="arithmatex">\(\operatorname{cl}\)</span> 表示闭包。</p>
<p>对于任何 <span class="arithmatex">\((x,y)\in\operatorname{epi} f + \operatorname{epi} g\)</span>，都存在 <span class="arithmatex">\((x_1,y_1)\in\operatorname{epi} f\)</span> 且 <span class="arithmatex">\((x_2,y_2)\in\operatorname{epi} g\)</span>，使得 <span class="arithmatex">\(x=x_1+x_2\)</span> 且</p>
<div class="arithmatex">\[
y = y_1+y_2 \ge f(x_1)+g(x_2) \ge h(x_1+x_2)=h(x).
\]</div>
<p>故而，<span class="arithmatex">\((x,y)\in\operatorname{epi}h\)</span>。这说明 <span class="arithmatex">\(\operatorname{epi} f + \operatorname{epi} g\subseteq \operatorname{epi}h\)</span>。</p>
<p>反过来，对于任何 <span class="arithmatex">\((x,y)\in\operatorname{epi}h\)</span>，有 <span class="arithmatex">\(y\ge h(x)\)</span>。根据 <span class="arithmatex">\(h\)</span> 的定义，对任何 <span class="arithmatex">\(\varepsilon&gt;0\)</span>，都存在 <span class="arithmatex">\(x_1+x_2=x\)</span> 使得</p>
<div class="arithmatex">\[
y + \varepsilon &gt; f(x_1) + g(x_2).
\]</div>
<p>令 <span class="arithmatex">\(y_1=f(x_1)\)</span> 且 <span class="arithmatex">\(y_2=g(x_2)\)</span>，就有 <span class="arithmatex">\(y+\varepsilon&gt;y_1+y_2\)</span>。这说明，对于任何 <span class="arithmatex">\(\varepsilon&gt;0\)</span>，都有 <span class="arithmatex">\((x_1,y_1)+(x_2,y_2)\in\operatorname{epi} f + \operatorname{epi} g\)</span> 位于点 <span class="arithmatex">\((x,y)\)</span> 与点 <span class="arithmatex">\((x,y+\varepsilon)\)</span> 的连线上。取 <span class="arithmatex">\(\varepsilon\rightarrow 0\)</span>，就有 <span class="arithmatex">\(\operatorname{epi}h \subseteq \operatorname{cl}(\operatorname{epi} f + \operatorname{epi} g)\)</span>。</p>
<p>所以，<span class="arithmatex">\(\operatorname{epi} f + \operatorname{epi} g = \operatorname{epi}h\)</span> 当且仅当它是闭凸集。一个使其满足的条件是，<span class="arithmatex">\(f\)</span> 和 <span class="arithmatex">\(g\)</span> 都是正常凸函数且 <a href="https://en.wikipedia.org/wiki/Semi-continuity">下半连续</a>。对于算法竞赛的应用来说，这已经足够了，比如分段线性函数总是满足这些条件的。</p>
</details>
<p>在实际问题中，如果 <span class="arithmatex">\(f\)</span> 和 <span class="arithmatex">\(g\)</span> 其中一个的斜率段数较少，可以直接将较少的斜率段插入到较多的斜率段中；否则，可能需要利用 <a href="../../../graph/dsu-on-tree/">启发式合并</a> 或 <a href="../../../ds/heap/">可并堆</a> 等方法，降低合并的整体复杂度，或者根据具体问题寻找相应的处理方式。</p>
<h3 id="_8">最值操作<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>两个凸函数的最大值仍然是凸函数，但是，两个凸函数的最小值未必仍然是凸函数。</p>
<p>很多常见的最小值操作可以转化为卷积下确界：</p>
<details class="example" open="open">
<summary>例子</summary>
<ul>
<li>
<p><span class="arithmatex">\(f(x)=\min_{y\in [x+a,x+b]}g(y)\)</span> 仍然是凸函数，因为它可以看作是卷积下确界：</p>
<div class="arithmatex">\[
f(x) = \min_{y\in\mathbf R}g(y) + 0_{[-b,-a]}(x-y).
\]</div>
</li>
<li>
<p><span class="arithmatex">\(f(x)=\min\{g(x-a_i)+b_i\}\)</span> 是 <span class="arithmatex">\(\mathbf Z\)</span> 上的凸函数，只要 <span class="arithmatex">\(g(x)\)</span> 是 <span class="arithmatex">\(\mathbf Z\)</span> 上的凸函数，且在有限集合 <span class="arithmatex">\(\{a_i\}\subset\mathbf Z\)</span> 上定义的函数 <span class="arithmatex">\(h:a_i\mapsto b_i\)</span> 也是该离散集合上的凸函数。这是因为延拓之后的函数 <span class="arithmatex">\(\tilde f(x)\)</span> 可以看作是卷积下确界：</p>
<div class="arithmatex">\[
\tilde f(x) = \min_{y\in\mathbf R}\tilde h(y)+\tilde g(x-y).
\]</div>
<p>因此，延拓之前的函数 <span class="arithmatex">\(f(x)\)</span> 也是凸函数。</p>
</li>
</ul>
</details>
<p>但并不是所有的最小值操作都保持凸性。</p>
<details class="example" open="open">
<summary>反例</summary>
<p>设 <span class="arithmatex">\(g(x)\)</span> 是凸函数，函数 <span class="arithmatex">\(f(x)=\min\{g(x-1)+kx,g(x)\}\)</span> 并不一定是凸函数。</p>
</details>
<p>在一些特殊的问题中，尽管动态规划的转移方程可以写作两个凸函数的最小值的形式，且难以转化为卷积下确界的形式，但是价值函数依然能够保持凸性。在实际处理时，通常需要结合打表和猜测找到这类问题的合理的斜率转移方式。</p>
<p>了解了凸函数及其常见变换后，就可以通过具体的问题理解 Slope Trick 优化 DP 的方法。本文的例题大致分为维护拐点和维护斜率两组，用于理解这两种维护方式的常见操作和实施细节。但是，正如前文所强调的那样，维护方式并不是 Slope Trick 的本质，应当根据具体的问题需要选取合适的斜率段维护方式。</p>
<h2 id="_9">维护拐点<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h2>
<p>这类问题通常出现在需要最小化若干个绝对值的和式的问题中。因为这类问题中，价值函数的斜率的绝对值并不大，因此维护斜率变化的拐点更为方便。</p>
<p>维护拐点是指维护分段线性函数中，斜率发生变化的点。相当于对于每个斜率为 <span class="arithmatex">\(k_i\)</span> 的斜率段 <span class="arithmatex">\([l_i,r_i]\)</span>，只维护其端点信息，而斜率本身不需要格外维护；因此，这类问题斜率每次发生变化时，都应当只变化一个固定的量。比如，如果维护了拐点集 <span class="arithmatex">\(\xi_{-s}\le\cdots\le\xi_{-1}\le\xi_{1}\le\cdots\le\xi_{t}\)</span>，就相当于说：区间 <span class="arithmatex">\([\xi_{-1},\xi_1]\)</span> 内斜率为 <span class="arithmatex">\(0\)</span>；向左每经过一个拐点，斜率减少一；向右每经过一个拐点，斜率增加一；故而，区间 <span class="arithmatex">\([\xi_2,\xi_3]\)</span> 内，斜率就是 <span class="arithmatex">\(2\)</span>，区间 <span class="arithmatex">\([\xi_{-3},\xi_{-2}]\)</span> 内，斜率就是 <span class="arithmatex">\(-2\)</span>，诸如此类。用形式语言表示，函数可以利用斜率拐点写作</p>
<div class="arithmatex">\[
f(x) = f(\xi_1) + \sum_{i=-s}^{-1}\max\{\xi_i-x,0\} + \sum_{i=1}^{\ell}\max\{x-\xi_i,0\}.
\]</div>
<p>它的最小值就是 <span class="arithmatex">\(f(\xi_{-1})=f(\xi_1)\)</span>，且可以在区间 <span class="arithmatex">\([\xi_{-1},\xi_1]\)</span> 内任意位置取到。</p>
<p><img alt="" src="../../images/slope-trick/epigraph-convex-kinks.svg" /></p>
<h3 id="_10">例题：最小成本递增序列<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<details class="example" open="open">
<summary><a href="https://www.luogu.com.cn/problem/P4331">[BalticOI 2004] Sequence 数字序列</a></summary>
<p>给定长度为 <span class="arithmatex">\(n\)</span> 的序列 <span class="arithmatex">\(\{a_i\}\)</span>，求严格递增序列 <span class="arithmatex">\(\{b_i\}\)</span> 使得 <span class="arithmatex">\(\sum_i|a_i-b_i|\)</span> 最小，输出最小值和任意一种最优方案 <span class="arithmatex">\(\{b_i\}\)</span>。</p>
</details>
<details class="note">
<summary>解答</summary>
<p>首先，<span class="arithmatex">\(\{b_i\}\)</span> 严格递增，等价于 <span class="arithmatex">\(\{b'_i\}=\{b_i-i\}\)</span> 弱增。因此，可以对 <span class="arithmatex">\(\{a'_i\}=\{a_i-i\}\)</span> 求出差值最小的弱增序列 <span class="arithmatex">\(\{b'_i\}=\{b_i-i\}\)</span> 再恢复成序列 <span class="arithmatex">\(\{b_i\}\)</span> 即可。</p>
<p>考虑朴素 DP 解法。设 <span class="arithmatex">\(f_i(x)\)</span> 是已经选取了序列 <span class="arithmatex">\(\{b'_i\}\)</span> 中前 <span class="arithmatex">\(i\)</span> 个数字，且第 <span class="arithmatex">\(i\)</span> 个数字不超过 <span class="arithmatex">\(x\)</span> 时，已经选取的数字与 <span class="arithmatex">\(\{a'_i\}\)</span> 的前 <span class="arithmatex">\(i\)</span> 个数字的最小差值：</p>
<div class="arithmatex">\[
f_i(x) = \min\sum_{j=1}^i|a'_j-b'_j|\text{ s.t. }b'_1\le b'_2\le\cdots\le b'_i\le x.
\]</div>
<p>容易得到状态转移方程为</p>
<div class="arithmatex">\[
f_i(x) = \min_{y\le x}f_{i-1}(y)+|a'_i-y|.
\]</div>
<p>初始状态为 <span class="arithmatex">\(f_0(x)\equiv 0\)</span>，最后要求的就是 <span class="arithmatex">\(\min_xf_n(x)\)</span>。利用前文提到的凸函数的变换，从 <span class="arithmatex">\(f_{i-1}(x)\)</span> 到 <span class="arithmatex">\(f_i(x)\)</span>，需要经过两步变换：</p>
<ol>
<li>首先，加上 <span class="arithmatex">\(|a'_i-x|\)</span>，这相当于对区间 <span class="arithmatex">\((-\infty,a'_i]\)</span> 内的所有斜率段都增加 <span class="arithmatex">\(-1\)</span>，对区间 <span class="arithmatex">\([a'_i,+\infty)\)</span> 内的所有斜率段都增加 <span class="arithmatex">\(1\)</span>；</li>
<li>对得到的函数取最小值，将 <span class="arithmatex">\(g(x)=f_{i-1}(x)+|a'_i-x|\)</span> 变为 <span class="arithmatex">\(f_i(x)=\min_{y\le x}g(y)\)</span>。根据前文分析，这相当于对 <span class="arithmatex">\(g(x)\)</span> 和 <span class="arithmatex">\(0_{[0,+\infty)}\)</span> 做卷积下确界。因为后者的斜率段只有一段，斜率为 <span class="arithmatex">\(0\)</span> 且向右延伸至无限长，将其插入 <span class="arithmatex">\(g(x)\)</span> 的斜率段中，相当于删除其中所有正斜率段。</li>
</ol>
<p>明晰了这些操作后，已经可以直接用平衡树维护所有斜率段了，但代码较复杂。注意到问题中斜率每次变化至多 <span class="arithmatex">\(1\)</span>，故而所有斜率段的绝对值都不超过 <span class="arithmatex">\(n\)</span>。不直接维护斜率段，转而直接维护斜率拐点更为方便。</p>
<p>设 <span class="arithmatex">\(f_{-1}(x)\)</span> 的拐点集为 <span class="arithmatex">\(\xi_{-k}\le\cdots\le\xi_{-1}\le\xi_{1}\le\cdots\le\xi_{\ell}\)</span>。那么，上面的两步操作分别对应：</p>
<ol>
<li>增加一个负斜率段的拐点 <span class="arithmatex">\(a'_i\)</span> 和一个正斜率段的拐点 <span class="arithmatex">\(a'_i\)</span>；</li>
<li>弹出所有正斜率段的拐点 <span class="arithmatex">\(\xi_1,\cdots,\xi_{\ell}\)</span>。</li>
</ol>
<p>实际维护时，因为每次操作结束后都没有正斜率段的拐点，即斜率拐点具有形式 <span class="arithmatex">\(\xi_{-k}\le\cdots\le\xi_{-1}\)</span>，而且操作总发生在正负斜率段交界处，所以直接维护一个最大堆存储所有拐点即可。两步操作分别对应：</p>
<ol>
<li>插入两次 <span class="arithmatex">\(a'_i\)</span>；</li>
<li>弹出堆顶。</li>
</ol>
<p>当然，每次结束后都需要维护当前函数的最小值。因为操作结束后，没有正斜率段，函数最小值就是它在最大堆堆顶处的取值。设每次操作之前堆顶为 <span class="arithmatex">\(\xi_{-1}\)</span>，最小值为 <span class="arithmatex">\(f_{i-1}(\xi_{-1})\)</span>。因为弹出的堆顶是正斜率段的最小拐点，函数的最小值就等于该处函数的取值，所以直接计算弹出前堆顶处函数的取值即可，亦即</p>
<div class="arithmatex">\[
f_{i-1}(\max\{a'_i,\xi_{-1}\})+|\max\{a'_i,\xi_{-1}\}-a'_i|=f_{i-1}(\xi_{-1})+\max\{0,\xi_{-1}-a'_i\}.
\]</div>
<p>其中，第一项相等是因为 <span class="arithmatex">\(f_{i-1}(x)\)</span> 没有正斜率段。因此，每次只需要在最小值上不断累加 <span class="arithmatex">\(\max\{0,\xi_{-1}-a'_i\}\)</span> 即可。</p>
<p>本题还要求输出一种最优方案。因为最后操作结束时，最优解就是堆顶，所以 <span class="arithmatex">\(b'_n\)</span> 的取值可以直接确定。如果已经知道了第 <span class="arithmatex">\(i\)</span> 个最优解 <span class="arithmatex">\(b'_i\)</span>，要求解 <span class="arithmatex">\(f_{i-1}(x)\)</span> 满足 <span class="arithmatex">\(x\le b'\)</span> 的最优解，只需要注意到因为 <span class="arithmatex">\(f_{i-1}(x)\)</span> 是凸的，所以越接近它的全局最小值点，解就越优，故而只要记录 <span class="arithmatex">\(f_{i-1}(x)\)</span> 的全局最小值点，并将它与 <span class="arithmatex">\(b'_i\)</span> 取最小值，就可以得到最优的 <span class="arithmatex">\(b'_{i-1}\)</span>。</p>
<p>时间复杂度为 <span class="arithmatex">\(O(n\log n)\)</span>。</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">C++</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a>
</code></pre></div></td></tr></table></div>
</details>
<p>模板题：</p>
<ul>
<li><a href="https://codeforces.com/problemset/problem/713/C">Codeforces 713 C. Sonya and Problem Without a Legend</a></li>
<li><a href="https://www.luogu.com.cn/problem/P2893">Luogu P2893 [USACO08FEB] Making the Grade G</a></li>
<li><a href="https://www.luogu.com.cn/problem/P4331">Luogu P4331 [BalticOI 2004] Sequence 数字序列</a></li>
<li><a href="https://www.luogu.com.cn/problem/P4597">Luogu P4597 序列 sequence</a></li>
<li><a href="https://atcoder.jp/contests/dwango2016-prelims/tasks/dwango2016qual_e">AtCoder 第 2 回 ドワンゴからの挑戦状 予選 E - 花火</a></li>
</ul>
<h3 id="_11">例题：转移带限制的情形<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<details class="example" open="open">
<summary><a href="https://www.luogu.com.cn/problem/P11598">[NOISG 2018 Finals] Safety</a></summary>
<p>给定长度为 <span class="arithmatex">\(n\)</span> 的序列 <span class="arithmatex">\(\{a_i\}\)</span>，求序列 <span class="arithmatex">\(\{b_i\}\)</span> 使其满足 <span class="arithmatex">\(|b_i-b_{i-1}|\le h\)</span> 对所有 <span class="arithmatex">\(1&lt;i\le n\)</span> 都成立，并使得 <span class="arithmatex">\(\sum_i|a_i-b_i|\)</span> 最小，输出最小值。</p>
</details>
<details class="note">
<summary>解答</summary>
<p>内容大致与上一个题目相仿，只是序列 <span class="arithmatex">\(\{b_i\}\)</span> 的限制发生了变化。同样地，设 <span class="arithmatex">\(f_i(x)\)</span> 为第 <span class="arithmatex">\(i\)</span> 个数字取 <span class="arithmatex">\(x\)</span> 时，前 <span class="arithmatex">\(i\)</span> 个数字的差值的最小值：</p>
<div class="arithmatex">\[
f_i(x) = \min\sum_{j=1}^i|a_j-b_j|\text{ s.t. }|b_{j-1}-b_j|\le h,\forall 1&lt;j\le i,~b_i=x.
\]</div>
<p>由此，有状态转移方程为</p>
<div class="arithmatex">\[
f_i(x) = |a_i-x| + \min_{|y-x|\le h} f_{i-1}(y). 
\]</div>
<p>起始条件为 <span class="arithmatex">\(f_0(x)\equiv 0\)</span>。最后要求的仍然是 <span class="arithmatex">\(\min_xf_n(x)\)</span>。</p>
<p>状态转移拆解为对凸函数的操作，分两步：</p>
<ol>
<li>首先对 <span class="arithmatex">\(f_{i-1}(x)\)</span> 取最值，变为 <span class="arithmatex">\(\min_{|y-x|\le h} f_{i-1}(y)\)</span>，这相当于 <span class="arithmatex">\(f_{i-1}(x)\)</span> 与 <span class="arithmatex">\(0_{[-h,h]}(x)\)</span> 的卷积下确界；</li>
<li>再将得到的函数与 <span class="arithmatex">\(|a_i-x|\)</span> 相加。</li>
</ol>
<p>同样因为斜率每次只变化一，可以考虑维护拐点。这样，这两步操作就可以描述为：</p>
<ol>
<li>将所有负斜率段向左移动 <span class="arithmatex">\(h\)</span>，将所有正斜率段向右移动 <span class="arithmatex">\(h\)</span>；</li>
<li>插入两次 <span class="arithmatex">\(a_i\)</span>。</li>
</ol>
<p>显然，对于本题，将正负斜率段分别维护较为方便。因为操作主要集中在零斜率段附近，因此考虑使用 <a href="../../../ds/binary-heap/#对顶堆">对顶堆</a>，即分别用最大堆和最小堆维护负斜率段和正斜率段的拐点。拐点的整体平移操作用懒标记完成。因为第二步操作需要分别对两个堆插入一个 <span class="arithmatex">\(a_i\)</span>，而且，插入完成后，未必最大堆的堆顶仍然小于等于最小堆的堆顶。此时，交换两堆顶，直到堆顶的大小关系得到满足即可。</p>
<p>最后，考虑操作过程中如何更新最小值。因为第一步平移操作并不会改变最小值，所以只要考虑交换堆顶的操作即可。设 <span class="arithmatex">\(\xi_{-1}&gt;\xi_1\)</span>，将堆顶 <span class="arithmatex">\(\xi_{-1}\)</span> 与 <span class="arithmatex">\(\xi_1\)</span> 交换时，函数由</p>
<div class="arithmatex">\[
\max\{0,x-\xi_{-1}\}+\max\{0,x-\xi_1\}
\]</div>
<p>变为</p>
<div class="arithmatex">\[
\max\{0,x-\xi_{1}\}+\max\{0,x-\xi_{-1}\}.
\]</div>
<p>过程中，函数形状不变，只是向下平移了 <span class="arithmatex">\(|\xi_{-1}-\xi_1|\)</span>。因此，要使得交换堆顶前后函数保持不变，只需要将最小值累加 <span class="arithmatex">\(|\xi_{-1}-\xi_1|\)</span> 即可。</p>
<p>算法的时间复杂度仍为 <span class="arithmatex">\(O(n\log n)\)</span>，因为每次添加元素后，交换堆顶的操作至多执行一次。</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">C++</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a>
</code></pre></div></td></tr></table></div>
</details>
<p>模板题：</p>
<ul>
<li><a href="https://www.luogu.com.cn/problem/P4272">Luogu P4272 [CTSC2009] 序列变换</a></li>
<li><a href="https://www.luogu.com.cn/problem/P11598">Luogu P11598 [NOISG 2018 Finals] Safety</a></li>
<li><a href="https://atcoder.jp/contests/abc217/tasks/abc217_h">AtCoder Beginner Contest 217 H - Snuketoon</a></li>
<li><a href="https://atcoder.jp/contests/arc070/tasks/arc070_c">AtCoder Regular Contest 070 E - NarrowRectangles</a></li>
<li><a href="https://atcoder.jp/contests/arc123/tasks/arc123_d">AtCoder Regular Contest 123 D - Inc, Dec - Decomposition</a></li>
</ul>
<h2 id="_12">维护斜率<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h2>
<p>还有一些问题，维护斜率更为方便。这类问题通常也可以使用 <a href="../../../basic/greedy/#后悔解法">反悔贪心</a> 或模拟费用流的思想解决。费用流模型中，最小费用往往是流量的凸函数，这就为使用 Slope Trick 提供了基础。</p>
<h3 id="_13">例题：股票交易问题<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h3>
<details class="example" open="open">
<summary><a href="https://codeforces.com/problemset/problem/865/D">Codeforces 865 D. Buy Low Sell High</a></summary>
<p>给定 <span class="arithmatex">\(n\)</span> 天股票价格序列 <span class="arithmatex">\(\{p_i\}\)</span>（均为正数），初始持股为 <span class="arithmatex">\(0\)</span>，每天可买入一股、卖出一股或不交易，求 <span class="arithmatex">\(n\)</span> 天后最大利润。</p>
</details>
<details class="note">
<summary>解答</summary>
<p>首先考虑朴素 DP 解法。设 <span class="arithmatex">\(f_i(x)\)</span> 为第 <span class="arithmatex">\(i\)</span> 天结束时持有股票数量为 <span class="arithmatex">\(x\ge 0\)</span> 的最大利润，则</p>
<div class="arithmatex">\[
f_i(x) = \max\{f_{i-1}(x-1)-p_i,f_{i-1}(x),f_{i-1}(x+1)+p_i\}.
\]</div>
<p>初始状态为 <span class="arithmatex">\(f_0(0)=0\)</span>，且对所有 <span class="arithmatex">\(x\neq 0\)</span>，有 <span class="arithmatex">\(f_0(x)=-\infty\)</span>。问题的答案就是 <span class="arithmatex">\(f_n(0)\)</span>。</p>
<p>从 <span class="arithmatex">\(f_{i-1}(x)\)</span> 到 <span class="arithmatex">\(f_i(x)\)</span> 需要经过两步变换：</p>
<ol>
<li>
<p>将 <span class="arithmatex">\(f_{i-1}(x)\)</span> 与函数</p>
<div class="arithmatex">\[
h_i(x) = \begin{cases}p_i,&amp;x=-1,\\0,&amp;x=0,\\-p_i,&amp;x=1\end{cases}
\]</div>
<p>对应的分段线性函数 <span class="arithmatex">\(\tilde h(x)\)</span>（显然是凹函数）做卷积上确界；</p>
</li>
<li>
<p>因为这样会导致函数在区间 <span class="arithmatex">\([-1,0)\)</span> 内具有有限值，这与 <span class="arithmatex">\(x\ge 0\)</span> 的要求矛盾，故而需要截取函数在 <span class="arithmatex">\([0,+\infty)\)</span> 内的部分。</p>
</li>
</ol>
<p>将它们转化为斜率段的变化，就是如下两步：</p>
<ol>
<li>插入长度为 <span class="arithmatex">\(2\)</span>、斜率为 <span class="arithmatex">\(-p_i\)</span> 的斜率段；</li>
<li>删除斜率有限的斜率段中，斜率最大且长度为 <span class="arithmatex">\(1\)</span> 的一段。</li>
</ol>
<p>因为斜率段的长度总是自然数，所以不妨维护若干个长度为一的斜率段，从而只需要记录每段的斜率即可。因为只需要插入和访问最大值操作，所以只需要一个最大堆。操作分两步：</p>
<ol>
<li>插入两次 <span class="arithmatex">\(-p_i\)</span>；</li>
<li>弹出堆顶。</li>
</ol>
<p>还需要维护 <span class="arithmatex">\(f_i(0)\)</span> 的值。因为第一步操作得到的函数在 <span class="arithmatex">\(x=-1\)</span> 处的取值就是 <span class="arithmatex">\(f_{i-1}(0)+p_i\)</span>，所以它在 <span class="arithmatex">\(x=0\)</span> 处的取值就是该值加上马上要弹出的堆顶——它就是函数在区间 <span class="arithmatex">\([-1,0]\)</span> 上的斜率。因为截断不改变函数在 <span class="arithmatex">\(x=0\)</span> 处的取值，所以这就是 <span class="arithmatex">\(f_i(0)\)</span>。</p>
<p>对比该算法实现与上文 <a href="#例题最小成本递增序列">最小成本递增序列</a> 的代码可知，该算法等价于求将股票价格变为弱递减序列的最小成本。</p>
<p>时间复杂度为 <span class="arithmatex">\(O(n\log n)\)</span>。</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">C++</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a>
</code></pre></div></td></tr></table></div>
</details>
<p>模板题：</p>
<ul>
<li><a href="https://codeforces.com/problemset/problem/865/D">Codeforces 865 D. Buy Low Sell High</a></li>
</ul>
<h3 id="_14">例题：搬运土石问题<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<details class="example" open="open">
<summary><a href="https://www.luogu.com.cn/problem/P2748">[USACO16OPEN] Landscaping P</a></summary>
<p>给定长度为 <span class="arithmatex">\(n\)</span> 的序列 <span class="arithmatex">\(\{a_i\}\)</span> 和 <span class="arithmatex">\(\{b_i\}\)</span>，分别表示第 <span class="arithmatex">\(i\)</span> 个花园已经有的泥土数量和需要的泥土数量（不能多也不能少）。购买一单位泥土放入任意花园价格为 <span class="arithmatex">\(X\)</span>，从任意花园运走一单位泥土价格为 <span class="arithmatex">\(Y\)</span>，从花园 <span class="arithmatex">\(i\)</span> 向花园 <span class="arithmatex">\(j\)</span> 运送一单位泥土价格为 <span class="arithmatex">\(Z|i-j|\)</span>。求满足所有花园需求的最小成本。（<span class="arithmatex">\(a_i,b_i\le 10\)</span>）</p>
</details>
<details class="note">
<summary>解答</summary>
<p>考虑朴素 DP 解法。设 <span class="arithmatex">\(f_i(x)\)</span> 为满足前 <span class="arithmatex">\(i\)</span> 个花园需求且净剩余 <span class="arithmatex">\(x\)</span> 单位泥土运到后面的花园时的最小代价。如果 <span class="arithmatex">\(x&lt;0\)</span>，就相当于净亏空 <span class="arithmatex">\(|x|\)</span> 单位泥土需要从后面的花园运送过来。那么，可以写成状态转移方程为</p>
<div class="arithmatex">\[
f_i(x) = \min_{y\in\mathbf R} f_{i-1}(y) + |y|Z + h((x-y)+(b_i-a_i)).
\]</div>
<p>其中，函数 <span class="arithmatex">\(h(\delta)\)</span> 表示当前花园的泥土净购买量为 <span class="arithmatex">\(\delta\)</span> 时的成本，即</p>
<div class="arithmatex">\[
h(\delta) = \max\{0,\delta\}X + \max\{0,-\delta\}Y = \max\{\delta X,-\delta Y\}.
\]</div>
<p>它显然是凸函数。该状态转移方程的含义为</p>
<ul>
<li>之前 <span class="arithmatex">\(i-1\)</span> 个花园净剩余泥土数量为 <span class="arithmatex">\(y\)</span> 时，最小成本为 <span class="arithmatex">\(f_{i-1}(y)\)</span>；</li>
<li>将净剩余（亏空）的泥土数量在 <span class="arithmatex">\(i\)</span> 与 <span class="arithmatex">\(i-1\)</span> 之间运送的成本为 <span class="arithmatex">\(|y|Z\)</span>；</li>
<li>通过买卖，将第 <span class="arithmatex">\(i\)</span> 个花园的泥土数量从 <span class="arithmatex">\(a_i\)</span> 调整为 <span class="arithmatex">\(b_i\)</span>，并将净剩余泥土数量从 <span class="arithmatex">\(y\)</span> 调整到 <span class="arithmatex">\(x\)</span>，最小成本为 <span class="arithmatex">\(h((x-y)+(b_i-a_i))\)</span>。</li>
</ul>
<p>初始状态为 <span class="arithmatex">\(f_0(0)=0\)</span>，且对所有 <span class="arithmatex">\(x\neq 0\)</span>，有 <span class="arithmatex">\(f_0(x)=+\infty\)</span>。问题的答案就是 <span class="arithmatex">\(f_n(0)\)</span>。</p>
<p>将函数 <span class="arithmatex">\(f_{i-1}(x)\)</span> 变换为 <span class="arithmatex">\(f_i(x)\)</span> 可以分为三步：</p>
<ol>
<li>首先，加上 <span class="arithmatex">\(|x|Z\)</span>，得到 <span class="arithmatex">\(f_{i-1}(x)+|x|Z\)</span>；</li>
<li>然后，与 <span class="arithmatex">\(h(x)\)</span> 做卷积下确界，得到 <span class="arithmatex">\(\min_{y\in\mathbf R}f_{i-1}(y)+|y|Z+h(x-y)\)</span>；</li>
<li>最后，将函数向左平移 <span class="arithmatex">\((b_i-a_i)\)</span> 个单位。</li>
</ol>
<p>转化为对斜率段的操作，同样分为三步：</p>
<ol>
<li>将原点左侧斜率段全体加上 <span class="arithmatex">\(-Z\)</span>，将原点右侧斜率段全体加上 <span class="arithmatex">\(Z\)</span>；</li>
<li>将所有小于 <span class="arithmatex">\(-Y\)</span> 的斜率段全部替换为 <span class="arithmatex">\(-Y\)</span>，将所有大于 <span class="arithmatex">\(X\)</span> 的斜率段全部替换为 <span class="arithmatex">\(X\)</span>；</li>
<li>将所有斜率段向左平移 <span class="arithmatex">\((b_i-a_i)\)</span> 个单位。</li>
</ol>
<p>原题中 <span class="arithmatex">\(a_i\)</span> 和 <span class="arithmatex">\(b_i\)</span> 很小，因此只需要维护若干个长度为 <span class="arithmatex">\(1\)</span> 的斜率段即可。虽然斜率段有无穷多个，但是有上界 <span class="arithmatex">\(X\)</span> 和下界 <span class="arithmatex">\(-Y\)</span>，且严格位于两者之间的斜率段数目并不多。因为不涉及插入操作，所以可以用两个栈维护原点两侧的斜率段，区间加和区间最值操作全部打懒标记完成。上述三步操作分别对应：</p>
<ol>
<li>对左右两个栈分别打懒标记，左侧加 <span class="arithmatex">\(-Z\)</span>，右侧加 <span class="arithmatex">\(Z\)</span>；</li>
<li>每次栈内弹出元素时，都对 <span class="arithmatex">\(-Y\)</span> 取最大值，对 <span class="arithmatex">\(X\)</span> 取最小值。如果左栈为空，则弹出 <span class="arithmatex">\(-Y\)</span>。如果右栈为空，则弹出 <span class="arithmatex">\(X\)</span>；</li>
<li>将左栈顶部的 <span class="arithmatex">\((b_i-a_i)\)</span> 个元素弹出，插入右栈；当然，<span class="arithmatex">\(b_i-a_i&lt;0\)</span> 时，就反过来。</li>
</ol>
<p>在交换栈顶时，更新答案，向左移动就减去当前斜率，向右移动就加上当前斜率。</p>
<p>算法复杂度为 <span class="arithmatex">\(O(n\max\{a_i,b_i\})\)</span>。</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">C++</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a>
</code></pre></div></td></tr></table></div>
</details>
<p>模板题：</p>
<ul>
<li><a href="https://www.luogu.com.cn/problem/P2748">Luogu P2748 [USACO16OPEN] Landscaping P</a></li>
<li><a href="https://atcoder.jp/contests/kupc2016/tasks/kupc2016_h">Kyoto University PC 2016 H - WAAAAAAAAAAAAALL</a></li>
<li><a href="https://atcoder.jp/contests/jag2017autumn/tasks/jag2017autumn_j">JAG Practice Contest 2017 J - Farm Village</a></li>
</ul>
<h2 id="_15">习题<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h2>
<p>本文的最后，提供一些各类算法竞赛中出现过的且可以使用 Slope Trick 解决的问题，以供练习。</p>
<ul>
<li><a href="https://www.luogu.com.cn/problem/P3642">Luogu P3642 [APIO2016] 烟火表演</a></li>
<li><a href="https://www.luogu.com.cn/problem/P9962">Luogu P9962 [THUPC 2024 初赛] 一棵树</a></li>
<li><a href="https://www.luogu.com.cn/problem/P11317">Luogu P11317 [RMI 2021] 路径/Paths</a></li>
<li><a href="https://atcoder.jp/contests/abc383/tasks/abc383_g">AtCoder Beginner Contest 383 G - Bar Cover</a></li>
<li><a href="https://codeforces.com/problemset/problem/280/D">Codeforces 280 D. k-Maximum Subsequence Sum</a></li>
<li><a href="https://codeforces.com/problemset/problem/280/E">Codeforces 280 E. Sequence Transformation</a></li>
<li><a href="https://codeforces.com/contest/802/problem/O">Codeforces 802 O. April Fools' Problem (hard)</a></li>
<li><a href="https://codeforces.com/contest/1209/problem/H">Codeforces 1209 H. Moving Walkways</a></li>
<li><a href="https://codeforces.com/contest/1229/problem/F">Codeforces 1229 F. Mateusz and Escape Room</a></li>
<li><a href="https://codeforces.com/problemset/problem/1534/G">Codeforces 1534 G. A New Beginning</a></li>
<li><a href="https://codeforces.com/problemset/problem/1787/H">Codeforces 1787 H. Codeforces Scoreboard</a></li>
<li><a href="https://codeforces.com/gym/102331/problem/H">2019 Summer Petrozavodsk Camp H. Honorable Mention</a></li>
<li><a href="https://codeforces.com/gym/102482/problem/C">2018 ACM-ICPC World Finals C. Conquer The World</a></li>
<li><a href="https://codeforces.com/gym/102538/problem/F">300iq Contest 3 F. Farm of Monsters</a></li>
</ul>
<h2 id="_16">参考文献与注释<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://codeforces.com/blog/entry/47821">[Tutorial] Slope Trick - zscoder</a></li>
<li><a href="https://codeforces.com/blog/entry/77298">Slope trick explained - Kuroni</a></li>
<li><a href="https://usaco.guide/adv/slope-trick?lang=cpp">Slope Trick - USACO Guide</a></li>
<li><a href="https://codeforces.com/blog/entry/103222">[Tutorial] Intuition on Slope Trick - maomao90</a></li>
</ul>
<div class="footnote">
<hr />
<ol>
<li id="fn:convex-def">
<p>不同教材对于凸函数的称呼可能不同。&#160;<a class="footnote-backref" href="#fnref:convex-def" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:inf-conv">
<p>也常称为 <span class="arithmatex">\(\min\)</span> 卷积、<span class="arithmatex">\(\inf\)</span> 卷积或者 <span class="arithmatex">\((\min,+)\)</span> 卷积。&#160;<a class="footnote-backref" href="#fnref:inf-conv" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div>
<!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Render date of last update -->


<!-- Render date of creation -->


<!-- ---------------------------------------------------------------------- -->

<!-- Render authors -->


<!-- ---------------------------------------------------------------------- -->

<!-- Render committers from GitHub -->


<!-- Render committers from GitLab -->


<!-- Render committers -->


<!-- ---------------------------------------------------------------------- -->

<!-- Determine date of last update -->


<!-- Source file information -->

<!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Determine feedback configuration -->

  


<!-- Determine whether to show feedback -->


<!-- Was this page helpful? -->

  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        此页面有帮助吗？
      </legend>
      <div class="md-feedback__inner">

        <!-- Feedback ratings -->
        <div class="md-feedback__list">
          
            <button
              class="md-feedback__icon md-icon"
              type="submit"
              title="This page was helpful"
              data-md-value="1"
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"/></svg>
            </button>
          
            <button
              class="md-feedback__icon md-icon"
              type="submit"
              title="This page could be improved"
              data-md-value="0"
            >
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"/></svg>
            </button>
          
        </div>

        <!-- Feedback rating notes (shown after submission) -->
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              

              <!-- Determine title -->
              
                
              

              <!-- Replace {url} and {title} placeholders in note -->
              谢谢你的反馈！
            </div>
          
            <div data-md-value="0" hidden>
              

              <!-- Determine title -->
              
                
              

              <!-- Replace {url} and {title} placeholders in note -->
              Thanks for your feedback! Help us improve this page by using our <a href="https://marketingplatform.google.com/about/analytics/" target="_blank" rel="noopener">feedback form</a>.
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>

<!--
  Copyright (c) 2016-2023 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Comment system -->





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <style>
  .md-footer {
      background-color: #f0f0f0;
  }
</style>


<!-- Footer -->
<footer class="md-footer">

  <!-- Link to previous and/or next page -->
  
    
  

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; gzh
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
   
      <font color="#B9B9B9">
      <div class="footer-visit-count" style="display: flex; justify-content: center; align-items: center;color: #000;">
        本站访问量：<script async src="//finicounter.eu.org/finicounter.js"></script>
        <span id="finicount_views"></span>    &nbsp;|&nbsp;
        <footer>
          <a href="https://icp.gov.moe/?keyword=20230640" target="_blank">萌ICP备20230640号</a>
        </footer>
      </div>
      </font>

        <style>
          .footer-visit-count {
              height: fit-content;
              min-height: 55px; /* 根据实际情况调整此高度 */
              color: #000;
          }
          </style>
        
          <div class="md-social">
  
    
    
    
    
    <a href="https://cdn.jsdelivr.net/gh/Gongzihang6/Pictures@main/Medias/%E6%88%91%E7%9A%84%E5%BE%AE%E4%BF%A1%E4%BA%8C%E7%BB%B4%E7%A0%81.png" target="_blank" rel="noopener" title="Wechat" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M385.2 167.6c6.4 0 12.6.3 18.8 1.1C387.4 90.3 303.3 32 207.7 32 100.5 32 13 104.8 13 197.4c0 53.4 29.3 97.5 77.9 131.6l-19.3 58.6 68-34.1c24.4 4.8 43.8 9.7 68.2 9.7 6.2 0 12.1-.3 18.3-.8-4-12.9-6.2-26.6-6.2-40.8-.1-84.9 72.9-154 165.3-154m-104.5-52.9c14.5 0 24.2 9.7 24.2 24.4 0 14.5-9.7 24.2-24.2 24.2-14.8 0-29.3-9.7-29.3-24.2.1-14.7 14.6-24.4 29.3-24.4m-136.4 48.6c-14.5 0-29.3-9.7-29.3-24.2 0-14.8 14.8-24.4 29.3-24.4 14.8 0 24.4 9.7 24.4 24.4 0 14.6-9.6 24.2-24.4 24.2M563 319.4c0-77.9-77.9-141.3-165.4-141.3-92.7 0-165.4 63.4-165.4 141.3S305 460.7 397.6 460.7c19.3 0 38.9-5.1 58.6-9.9l53.4 29.3-14.8-48.6C534 402.1 563 363.2 563 319.4m-219.1-24.5c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.8 0 24.4 9.7 24.4 19.3 0 10-9.7 19.6-24.4 19.6m107.1 0c-9.7 0-19.3-9.7-19.3-19.6 0-9.7 9.7-19.3 19.3-19.3 14.5 0 24.4 9.7 24.4 19.3.1 10-9.9 19.6-24.4 19.6"/></svg>
    </a>
  
    
    
    
    
    <a href="https://t.me/gongzihang" target="_blank" rel="noopener" title="telegram" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M248 8C111.033 8 0 119.033 0 256s111.033 248 248 248 248-111.033 248-248S384.967 8 248 8m114.952 168.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.45 10.45 0 0 1 3.53 6.716 43.8 43.8 0 0 1 .417 9.769"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/ZihangGong28792" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8l164.9-188.5L26.8 48h145.6l100.5 132.9zm-24.8 373.8h39.1L151.1 88h-42z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://github.com/Gongzihang6" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="mailto:<zihanggong24@gmail.com>" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M64 112c-8.8 0-16 7.2-16 16v22.1l172.5 141.6c20.7 17 50.4 17 71.1 0L464 150.1V128c0-8.8-7.2-16-16-16zM48 212.2V384c0 8.8 7.2 16 16 16h384c8.8 0 16-7.2 16-16V212.2L322 328.8c-38.4 31.5-93.7 31.5-132 0zM0 128c0-35.3 28.7-64 64-64h384c35.3 0 64 28.7 64 64v256c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://space.bilibili.com/688234000/lists" target="_blank" rel="noopener" title="space.bilibili.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M488.6 104.1c16.7 18.1 24.4 39.7 23.3 65.7v202.4c-.4 26.4-9.2 48.1-26.5 65.1-17.2 17-39.1 25.9-65.5 26.7H92.02c-26.45-.8-48.21-9.8-65.28-27.2C9.682 419.4.767 396.5 0 368.2V169.8c.767-26 9.682-47.6 26.74-65.7C43.81 87.75 65.57 78.77 92.02 78h29.38L96.05 52.19c-5.75-5.73-8.63-13-8.63-21.79 0-8.8 2.88-16.06 8.63-21.797C101.8 2.868 109.1 0 117.9 0q13.2 0 21.9 8.603L213.1 78h88l74.5-69.397C381.7 2.868 389.2 0 398 0q13.2 0 21.9 8.603c5.7 5.737 8.6 12.997 8.6 21.797 0 8.79-2.9 16.06-8.6 21.79L394.6 78h29.3c26.4.77 48 9.75 64.7 26.1m-38.8 69.7c-.4-9.6-3.7-17.4-10.7-23.5-5.2-6.1-14-9.4-22.7-9.8H96.05c-9.59.4-17.45 3.7-23.58 9.8-6.14 6.1-9.4 13.9-9.78 23.5v194.4c0 9.2 3.26 17 9.78 23.5s14.38 9.8 23.58 9.8H416.4c9.2 0 17-3.3 23.3-9.8s9.7-14.3 10.1-23.5zm-264.3 42.7c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2-6.2 6.3-14 9.5-23.6 9.5s-17.5-3.2-23.6-9.5-9.4-14-9.8-23.2v-33.3c.4-9.1 3.8-16.9 10.1-23.2s13.2-9.6 23.3-10c9.2.4 17 3.7 23.3 10m191.5 0c6.3 6.3 9.7 14.1 10.1 23.2V273c-.4 9.2-3.7 16.9-9.8 23.2s-14 9.5-23.6 9.5-17.4-3.2-23.6-9.5c-7-6.3-9.4-14-9.7-23.2v-33.3c.3-9.1 3.7-16.9 10-23.2s14.1-9.6 23.3-10c9.2.4 17 3.7 23.3 10"/></svg>
    </a>
  
</div>
        
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  


<h4>Cookie consent</h4>
<p>我们也使用cookies来识别您的重复访问和偏好来衡量我们文档的有效性以及用户是否找到他们要找的东西。 如果你同意,你可以帮助我们让我们的网站更好</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="analytics" checked>
      <span class="task-list-indicator"></span>
      Google Analytics
    </label>
  </li>

      
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="github" checked>
      <span class="task-list-indicator"></span>
      GitHub
    </label>
  </li>

      
    
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">同意</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">管理设定</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      <script id="__config" type="application/json">{"base": "../../../../../../..", "features": ["announce.dismiss", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.top", "navigation.footer", "search.suggest", "search.highlight", "search.share", "navigation.expand", "navigation.indexes", "content.tabs.link", "content.tooltips", "content.code.copy", "content.code.select", "content.code.annotate"], "search": "../../../../../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": null}</script>
    
    
      <script src="../../../../../../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="../../../../../../../javascripts/extra.js"></script>
      
        <script src="../../../../../../../javascripts/config_mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../../../../../../javascripts/简历.js"></script>
      
    
  </body>
</html>